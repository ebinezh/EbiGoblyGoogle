"use strict";(self.webpackChunkEbiGoogleClone=self.webpackChunkEbiGoogleClone||[]).push([[179],{2011:(gt,Se,F)=>{F.d(Se,{Dh:()=>De,GT:()=>oe,cc:()=>ve,hO:()=>Ue,on:()=>j,pX:()=>se,xv:()=>me});var f=F(4650),X=F(9260),P=F(3069);gt=F.hmd(gt);const ne=["ngOnDestroy"],se=(we,Ee,ke,_e={})=>new Proxy(we,{get:(ge,be)=>ke.runOutsideAngular(()=>{var Le;if(we[be])return!(null===(Le=_e?.spy)||void 0===Le)&&Le.get&&_e.spy.get(be,we[be]),we[be];if(ne.indexOf(be)>-1)return()=>{};const Me=Ee.toPromise().then(V=>{const de=V&&V[be];return"function"==typeof de?de.bind(V):de&&de.then?de.then(Ve=>ke.run(()=>Ve)):ke.run(()=>de)});return new Proxy(()=>{},{get:(V,de)=>Me[de],apply:(V,de,Ve)=>Me.then(Ge=>{var ut;const Xe=Ge&&Ge(...Ve);return!(null===(ut=_e?.spy)||void 0===ut)&&ut.apply&&_e.spy.apply(be,Ve,Xe),Xe})})})}),oe=(we,Ee)=>{Ee.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(_e=>{Object.defineProperty(we.prototype,_e,Object.getOwnPropertyDescriptor(ke.prototype||ke,_e))})})};class xe{constructor(Ee){return Ee}}const De=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function j(we,Ee,ke){const ge="object"==typeof ke&&ke||{};ge.name=ge.name||"string"==typeof ke&&ke||"[DEFAULT]";const Le=X.Z.apps.filter(Me=>Me&&Me.name===ge.name)[0]||Ee.runOutsideAngular(()=>X.Z.initializeApp(we,ge));try{JSON.stringify(we)!==JSON.stringify(Le.options)&&$("error",`${Le.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new xe(Le)}const $=(we,...Ee)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...Ee)},q={provide:xe,useFactory:j,deps:[De,f.R0b,[new f.FiY,me]]};let Ue=(()=>{class we{constructor(ke){X.Z.registerVersion("angularfire",P.q4.full,"core"),X.Z.registerVersion("angularfire",P.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,ke.toString())}static initializeApp(ke,_e){return{ngModule:we,providers:[{provide:De,useValue:ke},{provide:me,useValue:_e}]}}}return we.\u0275fac=function(ke){return new(ke||we)(f.LFG(f.Lbi))},we.\u0275mod=f.oAB({type:we}),we.\u0275inj=f.cJS({providers:[q]}),we})();function ve(we,Ee,ke,_e,ge){const[,be,Le]=globalThis.\u0275AngularfireInstanceCache.find(Me=>Me[0]===we)||[];if(be)return function He(we,Ee){try{return we.toString()===Ee.toString()}catch{return we===Ee}}(ge,Le)||(ce("error",`${Ee} was already initialized on the ${ke} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),ce("warn",{is:ge,was:Le})),be;{const Me=_e();return globalThis.\u0275AngularfireInstanceCache.push([we,Me,ge]),Me}}const rt=!!gt.hot,ce=(we,...Ee)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3069:(gt,Se,F)=>{F.d(Se,{q4:()=>ld,iC:()=>Va,HU:()=>Kr,vb:()=>Ei,JM:()=>at});var f=F(4650),X=F(259),P=F(5861),ne=F(9681),se=F(2090),oe=F(4859),xe=F(1877),De=F(8766);const me="@firebase/installations",j="0.6.4",$=1e4,q=`w:${j}`,Ue="FIS_v2",ve="https://firebaseinstallations.googleapis.com/v1",He=36e5,Ee=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ke(D){return D instanceof se.ZR&&D.code.includes("request-failed")}function _e({projectId:D}){return`${ve}/projects/${D}/installations`}function ge(D){return{token:D.token,requestStatus:2,expiresIn:Ge(D.expiresIn),creationTime:Date.now()}}function be(D,C){return Le.apply(this,arguments)}function Le(){return(Le=(0,P.Z)(function*(D,C){const N=(yield C.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:N.code,serverMessage:N.message,serverStatus:N.status})})).apply(this,arguments)}function Me({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function de(D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Ge(D){return Number(D.replace("s","000"))}function re(){return(re=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const N=_e(D),W=Me(D),Y=C.getImmediate({optional:!0});if(Y){const mt=yield Y.getHeartbeatsHeader();mt&&W.append("x-firebase-client",mt)}const tt={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:Ue,appId:D.appId,sdkVersion:q})},ot=yield de(()=>fetch(N,tt));if(ot.ok){const mt=yield ot.json();return{fid:mt.fid||x,registrationStatus:2,refreshToken:mt.refreshToken,authToken:ge(mt.authToken)}}throw yield be("Create Installation",ot)})).apply(this,arguments)}function ae(D){return new Promise(C=>{setTimeout(C,D)})}const Ce=/^[cdef][\w-]{21}$/,Pe="";function Be(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function Ze(D){return function pe(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ce.test(x)?x:Pe}catch{return Pe}}function We(D){return`${D.appName}!${D.appId}`}const tn=new Map;function yt(D,C){const x=We(D);At(x,C),function Fn(D,C){const x=function _n(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=D=>{At(D.data.key,D.data.fid)}),un}();x&&x.postMessage({key:D,fid:C}),function wn(){0===tn.size&&un&&(un.close(),un=null)}()}(x,C)}function At(D,C){const x=tn.get(D);if(x)for(const N of x)N(C)}let un=null;const ti="firebase-installations-database",Ps=1,ni="firebase-installations-store";let jr=null;function gs(){return jr||(jr=(0,De.X3)(ti,Ps,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ni)}})),jr}function vn(D,C){return $r.apply(this,arguments)}function $r(){return($r=(0,P.Z)(function*(D,C){const x=We(D),W=(yield gs()).transaction(ni,"readwrite"),Y=W.objectStore(ni),Te=yield Y.get(x);return yield Y.put(C,x),yield W.done,(!Te||Te.fid!==C.fid)&&yt(D,C.fid),C})).apply(this,arguments)}function lt(D){return ms.apply(this,arguments)}function ms(){return(ms=(0,P.Z)(function*(D){const C=We(D),N=(yield gs()).transaction(ni,"readwrite");yield N.objectStore(ni).delete(C),yield N.done})).apply(this,arguments)}function hi(D,C){return En.apply(this,arguments)}function En(){return(En=(0,P.Z)(function*(D,C){const x=We(D),W=(yield gs()).transaction(ni,"readwrite"),Y=W.objectStore(ni),Te=yield Y.get(x),tt=C(Te);return void 0===tt?yield Y.delete(x):yield Y.put(tt,x),yield W.done,tt&&(!Te||Te.fid!==tt.fid)&&yt(D,tt.fid),tt})).apply(this,arguments)}function fr(D){return ks.apply(this,arguments)}function ks(){return ks=(0,P.Z)(function*(D){let C;const x=yield hi(D.appConfig,N=>{const W=function Rt(D){return pr(D||{fid:Be(),registrationStatus:0})}(N),Y=function ft(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},N=function Ct(D,C){return Fs.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:N}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:fn(D)}:{installationEntry:C}}(D,W);return C=Y.registrationPromise,Y.installationEntry});return x.fid===Pe?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}}),ks.apply(this,arguments)}function Fs(){return Fs=(0,P.Z)(function*(D,C){try{const x=yield function Xe(D,C){return re.apply(this,arguments)}(D,C);return vn(D.appConfig,x)}catch(x){throw ke(x)&&409===x.customData.serverCode?yield lt(D.appConfig):yield vn(D.appConfig,{fid:C.fid,registrationStatus:0}),x}}),Fs.apply(this,arguments)}function fn(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,P.Z)(function*(D){let C=yield Mr(D.appConfig);for(;1===C.registrationStatus;)yield ae(100),C=yield Mr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:N}=yield fr(D);return N||x}return C})).apply(this,arguments)}function Mr(D){return hi(D,C=>{if(!C)throw Ee.create("installation-not-found");return pr(C)})}function pr(D){return function aa(D){return 1===D.registrationStatus&&D.registrationTime+$<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Hi(){return(Hi=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const N=function Kt(D,{fid:C}){return`${_e(D)}/${C}/authTokens:generate`}(D,x),W=function V(D,{refreshToken:C}){const x=Me(D);return x.append("Authorization",function ut(D){return`${Ue} ${D}`}(C)),x}(D,x),Y=C.getImmediate({optional:!0});if(Y){const mt=yield Y.getHeartbeatsHeader();mt&&W.append("x-firebase-client",mt)}const tt={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},ot=yield de(()=>fetch(N,tt));if(ot.ok)return ge(yield ot.json());throw yield be("Generate Auth Token",ot)})).apply(this,arguments)}function Rr(D){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,P.Z)(function*(D,C=!1){let x;const N=yield hi(D.appConfig,Y=>{if(!Pt(Y))throw Ee.create("not-registered");const Te=Y.authToken;if(!C&&function gr(D){return 2===D.requestStatus&&!function U(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+He}(D)}(Te))return Y;if(1===Te.requestStatus)return x=function $e(D,C){return ye.apply(this,arguments)}(D,C),Y;{if(!navigator.onLine)throw Ee.create("app-offline");const tt=function L(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}(Y);return x=function Et(D,C){return xt.apply(this,arguments)}(D,tt),tt}});return x?yield x:N.authToken}),Mi.apply(this,arguments)}function ye(){return(ye=(0,P.Z)(function*(D,C){let x=yield et(D.appConfig);for(;1===x.authToken.requestStatus;)yield ae(100),x=yield et(D.appConfig);const N=x.authToken;return 0===N.requestStatus?Rr(D,C):N})).apply(this,arguments)}function et(D){return hi(D,C=>{if(!Pt(C))throw Ee.create("not-registered");return function G(D){return 1===D.requestStatus&&D.requestTime+$<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function xt(){return xt=(0,P.Z)(function*(D,C){try{const x=yield function on(D,C){return Hi.apply(this,arguments)}(D,C),N=Object.assign(Object.assign({},C),{authToken:x});return yield vn(D.appConfig,N),x}catch(x){if(!ke(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const N=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield vn(D.appConfig,N)}else yield lt(D.appConfig);throw x}}),xt.apply(this,arguments)}function Pt(D){return void 0!==D&&2===D.registrationStatus}function ee(){return(ee=(0,P.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:N}=yield fr(C);return N?N.catch(console.error):Rr(C).catch(console.error),x.fid})).apply(this,arguments)}function _t(){return _t=(0,P.Z)(function*(D,C=!1){const x=D;return yield function Xt(D){return wt.apply(this,arguments)}(x),(yield Rr(x,C)).token}),_t.apply(this,arguments)}function wt(){return(wt=(0,P.Z)(function*(D){const{registrationPromise:C}=yield fr(D);C&&(yield C)})).apply(this,arguments)}function uu(D){return Ee.create("missing-app-config-values",{valueName:D})}const mc="installations",Dn=D=>{const C=D.getProvider("app").getImmediate(),x=function ua(D){if(!D||!D.options)throw uu("App Configuration");if(!D.name)throw uu("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw uu(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},$l=D=>{const C=D.getProvider("app").getImmediate(),x=(0,ne._getProvider)(C,mc).getImmediate();return{getId:()=>function le(D){return ee.apply(this,arguments)}(x),getToken:W=>function it(D){return _t.apply(this,arguments)}(x,W)}};(function yc(){(0,ne._registerComponent)(new oe.wA(mc,Dn,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("installations-internal",$l,"PRIVATE"))})(),(0,ne.registerVersion)(me,j),(0,ne.registerVersion)(me,j,"esm2017");const ca="@firebase/remote-config",Un=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vs{constructor(C,x,N,W){this.client=C,this.storage=x,this.storageCache=N,this.logger=W}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const N=Date.now()-x,W=N<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${N}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var x=this;return(0,P.Z)(function*(){const[N,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(C.cacheMaxAgeMillis,N))return W;C.eTag=W&&W.eTag;const Y=yield x.client.fetch(C),Te=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&Te.push(x.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(Te),Y})()}}function mi(D=navigator){return D.languages&&D.languages[0]||D.language}class vs{constructor(C,x,N,W,Y,Te){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=N,this.projectId=W,this.apiKey=Y,this.appId=Te}fetch(C){var x=this;return(0,P.Z)(function*(){const[N,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ot={sdk_version:x.sdkVersion,app_instance_id:N,app_instance_id_token:W,app_id:x.appId,language_code:mi()},mt={method:"POST",headers:tt,body:JSON.stringify(ot)},jt=fetch(Te,mt),It=new Promise((Yr,$n)=>{C.signal.addEventListener(()=>{const Ua=new Error("The operation was aborted.");Ua.name="AbortError",$n(Ua)})});let Xn;try{yield Promise.race([jt,It]),Xn=yield jt}catch(Yr){let $n="fetch-client-network";throw"AbortError"===Yr?.name&&($n="fetch-timeout"),Un.create($n,{originalErrorMessage:Yr?.message})}let Jn=Xn.status;const Vo=Xn.headers.get("ETag")||void 0;let Ts,Zr;if(200===Xn.status){let Yr;try{Yr=yield Xn.json()}catch($n){throw Un.create("fetch-client-parse",{originalErrorMessage:$n?.message})}Ts=Yr.entries,Zr=Yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Zr?Jn=500:"NO_CHANGE"===Zr?Jn=304:("NO_TEMPLATE"===Zr||"EMPTY_CONFIG"===Zr)&&(Ts={}),304!==Jn&&200!==Jn)throw Un.create("fetch-status",{httpStatus:Jn});return{status:Jn,eTag:Vo,config:Ts}})()}}class Ri{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const N=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,N)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:N}){var W=this;return(0,P.Z)(function*(){yield function zi(D,C){return new Promise((x,N)=>{const W=Math.max(C-Date.now(),0),Y=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(Y),N(Un.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const Y=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function cn(D){if(!(D instanceof se.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(Y))throw Y;const Te={throttleEndTimeMillis:Date.now()+(0,se.$s)(N),backoffCount:N+1};return yield W.storage.setThrottleMetadata(Te),W.attemptFetch(C,Te)}})()}}class vo{constructor(C,x,N,W,Y){this.app=C,this._client=x,this._storageCache=N,this._storage=W,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Us(D,C){const x=D.target.error||void 0;return Un.create(C,{originalErrorMessage:x&&x?.message})}const Nr="app_namespace_store";class yi{constructor(C,x,N,W=function Hr(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=N=>{C(Us(N,"storage-open"))},x.onsuccess=N=>{D(N.target.result)},x.onupgradeneeded=N=>{0===N.oldVersion&&N.target.result.createObjectStore(Nr,{keyPath:"compositeKey"})}}catch(x){C(Un.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=N,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const N=yield x.openDbPromise;return new Promise((W,Y)=>{const tt=N.transaction([Nr],"readonly").objectStore(Nr),ot=x.createCompositeKey(C);try{const mt=tt.get(ot);mt.onerror=jt=>{Y(Us(jt,"storage-get"))},mt.onsuccess=jt=>{const It=jt.target.result;W(It?It.value:void 0)}}catch(mt){Y(Un.create("storage-get",{originalErrorMessage:mt?.message}))}})})()}set(C,x){var N=this;return(0,P.Z)(function*(){const W=yield N.openDbPromise;return new Promise((Y,Te)=>{const ot=W.transaction([Nr],"readwrite").objectStore(Nr),mt=N.createCompositeKey(C);try{const jt=ot.put({compositeKey:mt,value:x});jt.onerror=It=>{Te(Us(It,"storage-set"))},jt.onsuccess=()=>{Y()}}catch(jt){Te(Un.create("storage-set",{originalErrorMessage:jt?.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const N=yield x.openDbPromise;return new Promise((W,Y)=>{const tt=N.transaction([Nr],"readwrite").objectStore(Nr),ot=x.createCompositeKey(C);try{const mt=tt.delete(ot);mt.onerror=jt=>{Y(Us(jt,"storage-delete"))},mt.onsuccess=()=>{W()}}catch(mt){Y(Un.create("storage-delete",{originalErrorMessage:mt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class da{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),N=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),Y=yield x;Y&&(C.lastFetchStatus=Y);const Te=yield N;Te&&(C.lastSuccessfulFetchTimestampMillis=Te);const tt=yield W;tt&&(C.activeConfig=tt)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ha(){return bh.apply(this,arguments)}function bh(){return(bh=(0,P.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function _i(){(0,ne._registerComponent)(new oe.wA("remote-config",function D(C,{instanceIdentifier:x}){const N=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,se.hl)())throw Un.create("indexed-db-unavailable");const{projectId:Y,apiKey:Te,appId:tt}=N.options;if(!Y)throw Un.create("registration-project-id");if(!Te)throw Un.create("registration-api-key");if(!tt)throw Un.create("registration-app-id");const ot=new yi(tt,N.name,x=x||"firebase"),mt=new da(ot),jt=new xe.Yd(ca);jt.logLevel=xe.in.ERROR;const It=new vs(W,ne.SDK_VERSION,x,Y,Te,tt),Xn=new Ri(It,ot),Jn=new Vs(Xn,ot,mt,jt),Vo=new vo(N,Jn,mt,ot,jt);return function bn(D){const C=(0,se.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Vo),Vo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(ca,"0.4.4"),(0,ne.registerVersion)(ca,"0.4.4","esm2017")}();const Ec="/firebase-messaging-sw.js",qi="/firebase-cloud-messaging-push-scope",wo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fa="https://fcmregistrations.googleapis.com/v1",Ic="google.c.a.c_id",Ch="google.c.a.c_l",Th="google.c.a.ts",bp="google.c.a.e";var Bs=(()=>{return(D=Bs||(Bs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Bs;var D})();function Oi(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cp(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),N=atob(x),W=new Uint8Array(N.length);for(let Y=0;Y<N.length;++Y)W[Y]=N.charCodeAt(Y);return W}const Dc="fcm_token_details_db",bc=5,Pr="fcm_token_object_Store";function zl(){return zl=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Dc))return null;let C=null;return(yield(0,De.X3)(Dc,bc,{upgrade:(N=(0,P.Z)(function*(W,Y,Te,tt){var ot;if(Y<2||!W.objectStoreNames.contains(Pr))return;const mt=tt.objectStore(Pr),jt=yield mt.index("fcmSenderId").get(D);if(yield mt.clear(),jt)if(2===Y){const It=jt;if(!It.auth||!It.p256dh||!It.endpoint)return;C={token:It.fcmToken,createTime:null!==(ot=It.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Oi(It.vapidKey)}}}else if(3===Y){const It=jt;C={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Oi(It.auth),p256dh:Oi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Oi(It.vapidKey)}}}else if(4===Y){const It=jt;C={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Oi(It.auth),p256dh:Oi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Oi(It.vapidKey)}}}}),function(Y,Te,tt,ot){return N.apply(this,arguments)})})).close(),yield(0,De.Lj)(Dc),yield(0,De.Lj)("fcm_vapid_details_db"),yield(0,De.Lj)("undefined"),function Sh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var N}),zl.apply(this,arguments)}const Tc="firebase-messaging-database",js=1,$s="firebase-messaging-store";let cu=null;function Io(){return cu||(cu=(0,De.X3)(Tc,js,{upgrade:(D,C)=>{0===C&&D.createObjectStore($s)}})),cu}function lu(D){return Do.apply(this,arguments)}function Do(){return Do=(0,P.Z)(function*(D){const C=Co(D),N=yield(yield Io()).transaction($s).objectStore($s).get(C);if(N)return N;{const W=yield function Cc(D){return zl.apply(this,arguments)}(D.appConfig.senderId);if(W)return yield Hs(D,W),W}}),Do.apply(this,arguments)}function Hs(D,C){return pa.apply(this,arguments)}function pa(){return(pa=(0,P.Z)(function*(D,C){const x=Co(D),W=(yield Io()).transaction($s,"readwrite");return yield W.objectStore($s).put(C,x),yield W.done,C})).apply(this,arguments)}function bo(){return(bo=(0,P.Z)(function*(D){const C=Co(D),N=(yield Io()).transaction($s,"readwrite");yield N.objectStore($s).delete(C),yield N.done})).apply(this,arguments)}function Co({appConfig:D}){return D.appId}const Sn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function du(D,C){return On.apply(this,arguments)}function On(){return(On=(0,P.Z)(function*(D,C){const x=yield zs(D),N=ga(C),W={method:"POST",headers:x,body:JSON.stringify(N)};let Y;try{Y=yield(yield fetch(So(D.appConfig),W)).json()}catch(Te){throw Sn.create("token-subscribe-failed",{errorInfo:Te?.toString()})}if(Y.error)throw Sn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Sn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(D,C){const x=yield zs(D),N=ga(C.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(N)};let Y;try{Y=yield(yield fetch(`${So(D.appConfig)}/${C.token}`,W)).json()}catch(Te){throw Sn.create("token-update-failed",{errorInfo:Te?.toString()})}if(Y.error)throw Sn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Sn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function jn(D,C){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,P.Z)(function*(D,C){const N={method:"DELETE",headers:yield zs(D)};try{const Y=yield(yield fetch(`${So(D.appConfig)}/${C}`,N)).json();if(Y.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(W){throw Sn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function So({projectId:D}){return`${fa}/projects/${D}/registrations`}function zs(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,P.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ga({p256dh:D,auth:C,endpoint:x,vapidKey:N}){const W={web:{endpoint:x,auth:C,p256dh:D}};return N!==wo&&(W.web.applicationPubKey=N),W}const Ao=6048e5;function Wi(){return Wi=(0,P.Z)(function*(D){const C=yield function xc(D,C){return Mc.apply(this,arguments)}(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Oi(C.getKey("auth")),p256dh:Oi(C.getKey("p256dh"))},N=yield lu(D.firebaseDependencies);if(N){if(function gu(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}(N.subscriptionOptions,x))return Date.now()>=N.createTime+Ao?function St(D,C){return fu.apply(this,arguments)}(D,{token:N.token,createTime:Date.now(),subscriptionOptions:x}):N.token;try{yield jn(D.firebaseDependencies,N.token)}catch(W){console.warn(W)}return ql(D.firebaseDependencies,x)}return ql(D.firebaseDependencies,x)}),Wi.apply(this,arguments)}function ya(){return ya=(0,P.Z)(function*(D){const C=yield lu(D.firebaseDependencies);C&&(yield jn(D.firebaseDependencies,C.token),yield function Sc(D){return bo.apply(this,arguments)}(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),ya.apply(this,arguments)}function fu(){return fu=(0,P.Z)(function*(D,C){try{const x=yield function To(D,C){return Gs.apply(this,arguments)}(D.firebaseDependencies,C),N=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Hs(D.firebaseDependencies,N),x}catch(x){throw yield function ma(D){return ya.apply(this,arguments)}(D),x}}),fu.apply(this,arguments)}function ql(D,C){return pu.apply(this,arguments)}function pu(){return(pu=(0,P.Z)(function*(D,C){const N={token:yield du(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Hs(D,N),N.token})).apply(this,arguments)}function Mc(){return(Mc=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cp(C)})})).apply(this,arguments)}function Ah(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Rc(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const N=C.notification.body;N&&(D.notification.body=N);const W=C.notification.image;W&&(D.notification.image=W);const Y=C.notification.icon;Y&&(D.notification.icon=Y)}(C,D),function ue(D,C){C.data&&(D.data=C.data)}(C,D),function Yt(D,C){var x,N,W,Y,Te;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const tt=null!==(W=null===(N=C.fcmOptions)||void 0===N?void 0:N.link)&&void 0!==W?W:null===(Y=C.notification)||void 0===Y?void 0:Y.click_action;tt&&(D.fcmOptions.link=tt);const ot=null===(Te=C.fcmOptions)||void 0===Te?void 0:Te.analytics_label;ot&&(D.fcmOptions.analyticsLabel=ot)}(C,D),C}function Wl(D,C){const x=[];for(let N=0;N<D.length;N++)x.push(D.charAt(N)),N<C.length&&x.push(C.charAt(N));return x.join("")}function _a(D){return Sn.create("missing-app-config-values",{valueName:D})}Wl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mu{constructor(C,x,N){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function ur(D){if(!D||!D.options)throw _a("App Configuration Object");if(!D.name)throw _a("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const N of C)if(!x[N])throw _a(N);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:x,analyticsProvider:N}}_delete(){return Promise.resolve()}}function qr(D){return yu.apply(this,arguments)}function yu(){return(yu=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ec,{scope:qi}),D.swRegistration.update().catch(()=>{})}catch(C){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Kl(){return(Kl=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield qr(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function vu(){return(vu=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=wo)})).apply(this,arguments)}function Wr(){return Wr=(0,P.Z)(function*(D,C){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield function Nc(D,C){return vu.apply(this,arguments)}(D,C?.vapidKey),yield function _u(D,C){return Kl.apply(this,arguments)}(D,C?.serviceWorkerRegistration),function hu(D){return Wi.apply(this,arguments)}(D)}),Wr.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(D,C,x){const N=function Ni(D){switch(D){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(N,{message_id:x[Ic],message_name:x[Ch],message_time:x[Th],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function va(){return va=(0,P.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Bs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Ah(x)):D.onMessageHandler.next(Ah(x)));const N=x.data;(function Oc(D){return"object"==typeof D&&!!D&&Ic in D})(N)&&"1"===N[bp]&&(yield function ws(D,C,x){return qs.apply(this,arguments)}(D,x.messageType,N))}),va.apply(this,arguments)}const Yl="@firebase/messaging",kc=D=>{const C=new mu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Zl(D,C){return va.apply(this,arguments)}(C,x)),C},Ki=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:N=>function Qn(D,C){return Wr.apply(this,arguments)}(C,N)}};function Fc(){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,P.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ql(){(0,ne._registerComponent)(new oe.wA("messaging",kc,"PUBLIC")),(0,ne._registerComponent)(new oe.wA("messaging-internal",Ki,"PRIVATE")),(0,ne.registerVersion)(Yl,"0.12.4"),(0,ne.registerVersion)(Yl,"0.12.4","esm2017")}();const Jl="analytics",kr="firebase_id",xo="origin",gn=6e4,Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vc="https://www.googletagmanager.com/gtag/js",ir=new xe.Yd("@firebase/analytics");function Rh(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function Ks(){return(Ks=(0,P.Z)(function*(D,C,x,N,W,Y){const Te=N[W];try{if(Te)yield C[Te];else{const ot=(yield Rh(x)).find(mt=>mt.measurementId===W);ot&&(yield C[ot.appId])}}catch(tt){ir.error(tt)}D("config",W,Y)})).apply(this,arguments)}function Es(){return(Es=(0,P.Z)(function*(D,C,x,N,W){try{let Y=[];if(W&&W.send_to){let Te=W.send_to;Array.isArray(Te)||(Te=[Te]);const tt=yield Rh(x);for(const ot of Te){const mt=tt.find(It=>It.measurementId===ot),jt=mt&&C[mt.appId];if(!jt){Y=[];break}Y.push(jt)}}0===Y.length&&(Y=Object.values(C)),yield Promise.all(Y),D("event",N,W||{})}catch(Y){ir.error(Y)}})).apply(this,arguments)}const si=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Eu=30,td=new class Zs{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Oh(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Da(){return(Da=(0,P.Z)(function*(D){var C;const{appId:x,apiKey:N}=D,W={method:"GET",headers:Oh(N)},Y=Ws.replace("{app-id}",x),Te=yield fetch(Y,W);if(200!==Te.status&&304!==Te.status){let tt="";try{const ot=yield Te.json();null!==(C=ot.error)&&void 0!==C&&C.message&&(tt=ot.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:Te.status,responseMessage:tt})}return Te.json()})).apply(this,arguments)}function ba(){return(ba=(0,P.Z)(function*(D,C=td,x){const{appId:N,apiKey:W,measurementId:Y}=D.options;if(!N)throw si.create("no-app-id");if(!W){if(Y)return{measurementId:Y,appId:N};throw si.create("no-api-key")}const Te=C.getThrottleMetadata(N)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new Ca;return setTimeout((0,P.Z)(function*(){tt.abort()}),void 0!==x?x:gn),Zi({appId:N,apiKey:W,measurementId:Y},Te,tt,C)})).apply(this,arguments)}function Zi(D,C,x){return Yi.apply(this,arguments)}function Yi(){return Yi=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},N,W=td){var Y;const{appId:Te,measurementId:tt}=D;try{yield function Ro(D,C){return new Promise((x,N)=>{const W=Math.max(C-Date.now(),0),Y=setTimeout(x,W);D.addEventListener(()=>{clearTimeout(Y),N(si.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(N,C)}catch(ot){if(tt)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:Te,measurementId:tt};throw ot}try{const ot=yield function Ys(D){return Da.apply(this,arguments)}(D);return W.deleteThrottleMetadata(Te),ot}catch(ot){const mt=ot;if(!function Bc(D){if(!(D instanceof se.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(mt)){if(W.deleteThrottleMetadata(Te),tt)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${tt} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:Te,measurementId:tt};throw ot}const jt=503===Number(null===(Y=mt?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,se.$s)(x,W.intervalMillis,Eu):(0,se.$s)(x,W.intervalMillis),It={throttleEndTimeMillis:Date.now()+jt,backoffCount:x+1};return W.setThrottleMetadata(Te,It),ir.debug(`Calling attemptFetch again in ${jt} millis`),Zi(D,It,N,W)}}),Yi.apply(this,arguments)}class Ca{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Iu,bs;function Ds(){return(Ds=(0,P.Z)(function*(D,C,x,N,W){if(W&&W.global)D("event",x,N);else{const Y=yield C;D("event",x,Object.assign(Object.assign({},N),{send_to:Y}))}})).apply(this,arguments)}function jc(){return(jc=(0,P.Z)(function*(){if(!(0,se.hl)())return ir.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(D){return ir.warn(si.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ra(){return Ra=(0,P.Z)(function*(D,C,x,N,W,Y,Te){var tt;const ot=function Cn(D){return ba.apply(this,arguments)}(D);ot.then(Jn=>{x[Jn.measurementId]=Jn.appId,D.options.measurementId&&Jn.measurementId!==D.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Jn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Jn=>ir.error(Jn)),C.push(ot);const mt=function Ma(){return jc.apply(this,arguments)}().then(Jn=>{if(Jn)return N.getId()}),[jt,It]=yield Promise.all([ot,mt]);(function Mo(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Vc)&&x.src.includes(D))return x;return null})(Y)||function Ap(D,C){const x=document.createElement("script");x.src=`${Vc}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}(Y,jt.measurementId),bs&&(W("consent","default",bs),function xa(D){bs=D}(void 0)),W("js",new Date);const Xn=null!==(tt=Te?.config)&&void 0!==tt?tt:{};return Xn[xo]="firebase",Xn.update=!0,null!=It&&(Xn[kr]=It),W("config",jt.measurementId,Xn),Iu&&(W("set",Iu),function Cu(D){Iu=D}(void 0)),jt.measurementId}),Ra.apply(this,arguments)}class nd{constructor(C){this.app=C}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},Tu=[];const Xs={};let Su,Qi,ki="dataLayer",rd="gtag",vi=!1;function Au(D,C,x){!function id(){const D=[];if((0,se.ru)()&&D.push("This is a browser extension environment."),(0,se.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((N,W)=>`(${W+1}) ${N}`).join(" "),x=si.create("invalid-analytics-context",{errorInfo:C});ir.warn(x.message)}}();const N=D.options.appId;if(!N)throw si.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw si.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pi[N])throw si.create("already-exists",{id:N});if(!vi){!function xp(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(ki);const{wrappedGtag:Y,gtagCore:Te}=function Ia(D,C,x,N,W){let Y=function(...Te){window[N].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Y=window[W]),window[W]=function Ea(D,C,x,N){function Y(){return Y=(0,P.Z)(function*(Te,tt,ot){try{"event"===Te?yield function Uc(D,C,x,N,W){return Es.apply(this,arguments)}(D,C,x,tt,ot):"config"===Te?yield function wa(D,C,x,N,W,Y){return Ks.apply(this,arguments)}(D,C,x,N,tt,ot):"consent"===Te?D("consent","update",ot):D("set",tt)}catch(mt){ir.error(mt)}}),Y.apply(this,arguments)}return function W(Te,tt,ot){return Y.apply(this,arguments)}}(Y,D,C,x),{gtagCore:Y,wrappedGtag:window[W]}}(Pi,Tu,Xs,ki,rd);Qi=Y,Su=Te,vi=!0}return Pi[N]=function Qs(D,C,x,N,W,Y,Te){return Ra.apply(this,arguments)}(D,Tu,Xs,C,Su,ki,x),new nd(D)}function xu(){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,P.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const an="@firebase/analytics";!function hy(){(0,ne._registerComponent)(new oe.wA(Jl,(C,{options:x})=>Au(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new oe.wA("analytics-internal",function D(C){try{const x=C.getProvider(Jl).getImmediate();return{logEvent:(N,W,Y)=>function Ph(D,C,x,N){D=(0,se.m9)(D),function Du(D,C,x,N,W){return Ds.apply(this,arguments)}(Qi,Pi[D.app.options.appId],C,x,N).catch(W=>ir.error(W))}(x,N,W,Y)}}catch(x){throw si.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(an,"0.9.4"),(0,ne.registerVersion)(an,"0.9.4","esm2017")}();var Hc=F(727);class Js extends Hc.w0{constructor(C,x){super()}schedule(C,x=0){return this}}const Pa={setInterval(D,C,...x){const{delegate:N}=Pa;return N?.setInterval?N.setInterval(D,C,...x):setInterval(D,C,...x)},clearInterval(D){const{delegate:C}=Pa;return(C?.clearInterval||clearInterval)(D)},delegate:void 0};var Gc=F(8737);class ka extends Js{constructor(C,x){super(C,x),this.scheduler=C,this.work=x,this.pending=!1}schedule(C,x=0){var N;if(this.closed)return this;this.state=C;const W=this.id,Y=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(Y,W,x)),this.pending=!0,this.delay=x,this.id=null!==(N=this.id)&&void 0!==N?N:this.requestAsyncId(Y,this.id,x),this}requestAsyncId(C,x,N=0){return Pa.setInterval(C.flush.bind(C,this),N)}recycleAsyncId(C,x,N=0){if(null!=N&&this.delay===N&&!1===this.pending)return x;null!=x&&Pa.clearInterval(x)}execute(C,x){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const N=this._execute(C,x);if(N)return N;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(C,x){let W,N=!1;try{this.work(C)}catch(Y){N=!0,W=Y||new Error("Scheduled action threw falsy error")}if(N)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:C,scheduler:x}=this,{actions:N}=x;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Gc.P)(N,this),null!=C&&(this.id=this.recycleAsyncId(x,C,null)),this.delay=null,super.unsubscribe()}}}var kh=F(6063);class eo{constructor(C,x=eo.now){this.schedulerActionCtor=C,this.now=x}schedule(C,x=0,N){return new this.schedulerActionCtor(this,C).schedule(N,x)}}eo.now=kh.l.now;class dn extends eo{constructor(C,x=eo.now){super(C,x),this.actions=[],this._active=!1}flush(C){const{actions:x}=this;if(this._active)return void x.push(C);let N;this._active=!0;do{if(N=C.execute(C.state,C.delay))break}while(C=x.shift());if(this._active=!1,N){for(;C=x.shift();)C.unsubscribe();throw N}}}const Ru=new class Fa extends dn{}(class ko extends ka{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,N=0){return null!=N&&N>0||null==N&&this.delay>0?super.requestAsyncId(C,x,N):(C.flush(this),0)}}),wi=new dn(ka);var cd=F(8505),Ou=F(9468),Nu=F(5363);const ld=new f.GfV("7.5.0"),Fh="__angularfire_symbol__analyticsIsSupportedValue",Pu="__angularfire_symbol__analyticsIsSupported",Lh="__angularfire_symbol__remoteConfigIsSupportedValue",cr="__angularfire_symbol__remoteConfigIsSupported",Fo="__angularfire_symbol__messagingIsSupportedValue",no="__angularfire_symbol__messagingIsSupported";function at(D,C,x){if(C){if(1===C.length)return C[0];const Y=C.filter(Te=>Te.app===x);if(1===Y.length)return Y[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Pu]||(globalThis[Pu]=xu().then(D=>globalThis[Fh]=D).catch(()=>globalThis[Fh]=!1)),globalThis[no]||(globalThis[no]=Fc().then(D=>globalThis[Fo]=D).catch(()=>globalThis[Fo]=!1)),globalThis[cr]||(globalThis[cr]=ha().then(D=>globalThis[Lh]=D).catch(()=>globalThis[Lh]=!1));const Ei=(D,C)=>{const x=C?[C]:(0,X.C6)(),N=[];return x.forEach(W=>{W.container.getProvider(D).instances.forEach(Te=>{N.includes(Te)||N.push(Te)})}),N};function lr(){}class ku{constructor(C,x=Ru){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,N){const W=this.zone;return this.delegate.schedule(function(Te){W.runGuarded(()=>{C.apply(this,[Te])})},x,N)}}class io{constructor(C){this.zone=C,this.task=null}call(C,x){const N=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",lr,{},lr,lr)),x.pipe((0,cd.b)({next:N,complete:N,error:N})).subscribe(C).add(N)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Kr=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ku(Zone.current)),this.insideAngular=x.run(()=>new ku(Zone.current,wi)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ji(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Va(D){return Ji(),function Cs(D){return function(x){return(x=x.lift(new io(D.ngZone))).pipe((0,Ou.R)(D.outsideAngular),(0,Nu.Q)(D.insideAngular))}}(Ji())(D)}},2090:(gt,Se,F)=>{F.d(Se,{$s:()=>Et,BH:()=>be,G6:()=>Ce,L:()=>me,LL:()=>yt,Pz:()=>ge,Sg:()=>Le,UG:()=>de,US:()=>oe,ZB:()=>q,ZR:()=>tn,aH:()=>_e,b$:()=>ut,eu:()=>Be,hl:()=>Pe,jU:()=>Ve,m9:()=>gr,ne:()=>Rt,pd:()=>fr,r3:()=>ni,ru:()=>Ge,tV:()=>j,uI:()=>V,vZ:()=>$r,w1:()=>re,xO:()=>hi,xb:()=>gs,z$:()=>Me,zI:()=>Ze,zd:()=>En});const ne=function(U){const L=[];let G=0;for(let le=0;le<U.length;le++){let ee=U.charCodeAt(le);ee<128?L[G++]=ee:ee<2048?(L[G++]=ee>>6|192,L[G++]=63&ee|128):55296==(64512&ee)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(ee=65536+((1023&ee)<<10)+(1023&U.charCodeAt(++le)),L[G++]=ee>>18|240,L[G++]=ee>>12&63|128,L[G++]=ee>>6&63|128,L[G++]=63&ee|128):(L[G++]=ee>>12|224,L[G++]=ee>>6&63|128,L[G++]=63&ee|128)}return L},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let ee=0;ee<U.length;ee+=3){const it=U[ee],_t=ee+1<U.length,Xt=_t?U[ee+1]:0,wt=ee+2<U.length,In=wt?U[ee+2]:0;let fi=(15&Xt)<<2|In>>6,Zn=63&In;wt||(Zn=64,_t||(fi=64)),le.push(G[it>>2],G[(3&it)<<4|Xt>>4],G[fi],G[Zn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(ne(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let G=0,le=0;for(;G<U.length;){const ee=U[G++];if(ee<128)L[le++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const it=U[G++];L[le++]=String.fromCharCode((31&ee)<<6|63&it)}else if(ee>239&&ee<365){const wt=((7&ee)<<18|(63&U[G++])<<12|(63&U[G++])<<6|63&U[G++])-65536;L[le++]=String.fromCharCode(55296+(wt>>10)),L[le++]=String.fromCharCode(56320+(1023&wt))}else{const it=U[G++],_t=U[G++];L[le++]=String.fromCharCode((15&ee)<<12|(63&it)<<6|63&_t)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let ee=0;ee<U.length;){const it=G[U.charAt(ee++)],Xt=ee<U.length?G[U.charAt(ee)]:0;++ee;const In=ee<U.length?G[U.charAt(ee)]:64;++ee;const Ht=ee<U.length?G[U.charAt(ee)]:64;if(++ee,null==it||null==Xt||null==In||null==Ht)throw new xe;le.push(it<<2|Xt>>4),64!==In&&(le.push(Xt<<4&240|In>>2),64!==Ht&&le.push(In<<6&192|Ht))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const me=function(U){return function(U){const L=ne(U);return oe.encodeByteArray(L,!0)}(U).replace(/\./g,"")},j=function(U){try{return oe.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!Ue(G)||(U[G]=q(U[G],L[G]));return U}function Ue(U){return"__proto__"!==U}const we=()=>{try{return function ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&j(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},_e=()=>{var U;return null===(U=we())||void 0===U?void 0:U.config},ge=U=>{var L;return null===(L=we())||void 0===L?void 0:L[`_${U}`]};class be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,le)=>{G?this.reject(G):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,le))}}}function Le(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",ee=U.iat||0,it=U.sub||U.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:ee,exp:ee+3600,auth_time:ee,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},U);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(_t)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function de(){var U;const L=null===(U=we())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ve(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function ut(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const U=Me();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pe(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((U,L)=>{try{let G=!0;const le="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(le);ee.onsuccess=()=>{ee.result.close(),G||self.indexedDB.deleteDatabase(le),U(!0)},ee.onupgradeneeded=()=>{G=!1},ee.onerror=()=>{var it;L((null===(it=ee.error)||void 0===it?void 0:it.message)||"")}}catch(G){L(G)}})}function Ze(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class tn extends Error{constructor(L,G,le){super(G),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yt.prototype.create)}}class yt{constructor(L,G,le){this.service=L,this.serviceName=G,this.errors=le}create(L,...G){const le=G[0]||{},ee=`${this.service}/${L}`,it=this.errors[L],_t=it?function Qt(U,L){return U.replace(Je,(G,le)=>{const ee=L[le];return null!=ee?String(ee):`<${le}?>`})}(it,le):"Error";return new tn(ee,`${this.serviceName}: ${_t} (${ee}).`,le)}}const Je=/\{\$([^}]+)}/g;function ni(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function gs(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function $r(U,L){if(U===L)return!0;const G=Object.keys(U),le=Object.keys(L);for(const ee of G){if(!le.includes(ee))return!1;const it=U[ee],_t=L[ee];if(lt(it)&&lt(_t)){if(!$r(it,_t))return!1}else if(it!==_t)return!1}for(const ee of le)if(!G.includes(ee))return!1;return!0}function lt(U){return null!==U&&"object"==typeof U}function hi(U){const L=[];for(const[G,le]of Object.entries(U))Array.isArray(le)?le.forEach(ee=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(ee))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function En(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[ee,it]=le.split("=");L[decodeURIComponent(ee)]=decodeURIComponent(it)}}),L}function fr(U){const L=U.indexOf("?");if(!L)return"";const G=U.indexOf("#",L);return U.substring(L,G>0?G:void 0)}function Rt(U,L){const G=new ft(U,L);return G.subscribe.bind(G)}class ft{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,le){let ee;if(void 0===L&&void 0===G&&void 0===le)throw new Error("Missing Observer.");ee=function Fs(U,L){if("object"!=typeof U||null===U)return!1;for(const G of L)if(G in U&&"function"==typeof U[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:le},void 0===ee.next&&(ee.next=fn),void 0===ee.error&&(ee.error=fn),void 0===ee.complete&&(ee.complete=fn);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),it}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(le){typeof console<"u"&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}const Mi=1e3,$e=2,ye=144e5,et=.5;function Et(U,L=Mi,G=$e){const le=L*Math.pow(G,U),ee=Math.round(et*le*(Math.random()-.5)*2);return Math.min(ye,le+ee)}function gr(U){return U&&U._delegate?U._delegate:U}},6890:(gt,Se,F)=>{var f=F(4650);let X=null;function P(){return X}class se{}const oe=new f.OlP("DocumentToken");let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function De(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const me=new f.OlP("Location Initialized");let j=(()=>{class n extends xe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){$()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){$()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function q(){return new j((0,f.LFG)(oe))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let rt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(we)},providedIn:"root"}),n})();const ce=new f.OlP("appBaseHref");let we=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xe),f.LFG(ce,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ee=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xe),f.LFG(ce,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Le(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ve(be(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function ge(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ue,n.stripTrailingSlash=ve,n.\u0275fac=function(t){return new(t||n)(f.LFG(rt))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return new ke((0,f.LFG)(rt))}()},providedIn:"root"}),n})();function be(n){return n.replace(/\/index.html$/,"")}function ar(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class Bn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Bn(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),bn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{bn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bn(n,e){n.context.$implicit=e.item}let ys=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new kt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_c("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_c("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class kt{constructor(){this.$implicit=null,this.ngIf=null}}function _c(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Dc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();let Io=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new lu((0,f.LFG)(oe),window)}),n})();class lu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Do(this.window.history)||Do(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Do(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Sc{}class Es extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ea extends Es{static makeCurrent(){!function ne(n){X||(X=n)}(new Ea)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Mo(){return Ia=Ia||document.querySelector("base"),Ia?Ia.getAttribute("href"):null}();return null==t?null:function si(n){Is=Is||document.createElement("a"),Is.setAttribute("href",n);const e=Is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ar(document.cookie,e)}}let Is,Ia=null;const Eu=new f.OlP("TRANSITION_ID"),Zs=[{provide:f.ip1,useFactory:function ed(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Eu,oe,f.zs3],multi:!0}];let Oh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ys=new f.OlP("EventManagerPlugins");let Da=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ys),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Cn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let ba=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Zi=(()=>{class n extends ba{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Yi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ro=/%COMP%/g,Oo=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Sa(n,e){return e.flat(100).map(t=>t.replace(Ro,n))}function bu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _r=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Aa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof jc?s.applyToHost(t):s instanceof Ma&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case f.ifc.Emulated:u=new jc(l,m,r,this.appId,w);break;case f.ifc.ShadowDom:return new Cu(l,m,t,r);default:u=new Ma(l,m,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Da),f.LFG(Zi),f.LFG(f.AFp),f.LFG(Oo))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Aa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Yi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Yi[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Yi[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bu(r)):this.eventManager.addEventListener(e,t,bu(r))}}function xa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cu extends Aa{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Sa(s.id,s.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ma extends Aa{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=Sa(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class jc extends Ma{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function No(n){return"_ngcontent-%COMP%".replace(Ro,n)}(l),this.hostAttr=function Ta(n){return"_nghost-%COMP%".replace(Ro,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Qs=(()=>{class n extends Cn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ra=["alt","control","meta","shift"],nd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Tu=(()=>{class n extends Cn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ra.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=nd[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Ra.forEach(l=>{l!==s&&(0,Pi[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const sd=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function vi(){Ea.makeCurrent()},multi:!0},{provide:oe,useFactory:function id(){return(0,f.RDi)(document),document},deps:[]}]),$c=new f.OlP(""),xu=[{provide:f.rWj,useClass:class td{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Xi=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Mp(){return new f.qLn},deps:[]},{provide:Ys,useClass:Qs,multi:!0,deps:[oe,f.R0b,f.Lbi]},{provide:Ys,useClass:Tu,multi:!0,deps:[oe]},{provide:_r,useClass:_r,deps:[Da,Zi,f.AFp,Oo]},{provide:f.FYo,useExisting:_r},{provide:ba,useExisting:Zi},{provide:Zi,useClass:Zi,deps:[oe]},{provide:Da,useClass:Da,deps:[Ys,f.R0b]},{provide:Sc,useClass:Oh,deps:[]},[]];let Oa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Eu,useExisting:f.AFp},Zs]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG($c,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Xi,...xu],imports:[Dc,f.hGG]}),n})(),Ph=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Na(){return new Ph((0,f.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Nn=F(8996),ro=F(7669);function at(...n){const e=(0,ro.yG)(n);return(0,Nn.D)(n,e)}var Ei=F(7579);class lr extends Ei.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const io=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Kr=F(9751);const{isArray:Ji}=Array,{getPrototypeOf:La,prototype:Fi,keys:Fu}=Object;function Vh(n){if(1===n.length){const e=n[0];if(Ji(e))return{args:e,keys:null};if(function Va(n){return n&&"object"==typeof n&&La(n)===Fi}(e)){const t=Fu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Cs=F(4671),Mt=F(4004);const{isArray:zc}=Array;function C(n){return(0,Mt.U)(e=>function D(n,e){return zc(e)?n(...e):n(e)}(n,e))}function x(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var N=F(5403),W=F(9672);function Y(...n){const e=(0,ro.yG)(n),t=(0,ro.jO)(n),{args:r,keys:s}=Vh(n);if(0===r.length)return(0,Nn.D)([],e);const u=new Kr.y(function Te(n,e,t=Cs.y){return r=>{tt(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)tt(e,()=>{const b=(0,Nn.D)(n[w],e);let A=!1;b.subscribe((0,N.x)(r,O=>{u[w]=O,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>x(s,l):Cs.y));return t?u.pipe(C(t)):u}function tt(n,e,t){n?(0,W.f)(t,n,e):e()}var ot=F(8189);function jt(...n){return function mt(){return(0,ot.J)(1)}()((0,Nn.D)(n,(0,ro.yG)(n)))}var It=F(8421);function Xn(n){return new Kr.y(e=>{(0,It.Xf)(n()).subscribe(e)})}var Jn=F(9635),Vo=F(576);function Ts(n,e){const t=(0,Vo.m)(n)?n:()=>n,r=s=>s.error(t());return new Kr.y(e?s=>e.schedule(r,0,s):r)}var Zr=F(515),Yr=F(727),$n=F(4482);function Ua(){return(0,$n.e)((n,e)=>{let t=null;n._refCount++;const r=(0,N.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Op extends Kr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$n.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yr.w0;const t=this.getSubject();e.add(this.source.subscribe((0,N.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yr.w0.EMPTY)}return e}refCount(){return Ua()(this)}}function An(n,e){return(0,$n.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,N.x)(r,w=>{s?.unsubscribe();let b=0;const A=u++;(0,It.Xf)(n(w,A)).subscribe(s=(0,N.x)(r,O=>r.next(e?e(w,O,A,b++):O),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function dd(n){return n<=0?()=>Zr.E:(0,$n.e)((e,t)=>{let r=0;e.subscribe((0,N.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Li(n,e){return(0,$n.e)((t,r)=>{let s=0;t.subscribe((0,N.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var oi=F(5577);function Uh(n){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe((0,N.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function py(n=V0){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe((0,N.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function V0(){return new io}function Uo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((s,u)=>n(s,u,r)):Cs.y,dd(1),t?Uh(e):py(()=>new io))}function Ss(n,e){return(0,Vo.m)(e)?(0,oi.z)(n,e,1):(0,oi.z)(n,1)}var vr=F(8505);function As(n){return(0,$n.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,N.x)(t,void 0,void 0,l=>{u=(0,It.Xf)(n(l,As(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Bh(n,e){return(0,$n.e)(function Np(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,N.x)(l,A=>{const O=b++;w=m?n(w,A,O):(m=!0,A),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function hd(n){return n<=0?()=>Zr.E:(0,$n.e)((e,t)=>{let r=[];e.subscribe((0,N.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Vi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Li((s,u)=>n(s,u,r)):Cs.y,hd(1),t?Uh(e):py(()=>new io))}function jh(n){return(0,$n.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Nt="primary",so=Symbol("RouteTitle");class yy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bo(n){return new yy(n)}function _y(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function xs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!fd(n[s],e[s]))return!1;return!0}function fd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Qr(n){return Array.prototype.concat.apply([],n)}function qc(n){return n.length>0?n[n.length-1]:null}function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xn(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Nn.D)(Promise.resolve(n)):at(n)}const jo=!1,kp={exact:function vy(n,e,t){if(!Ii(n.segments,e.segments)||!Lu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vy(n.children[r],e.children[r],t))return!1;return!0},subset:Lp},Hh={exact:function Fp(n,e){return xs(n,e)},subset:function $o(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fd(n[t],e[t]))},ignored:()=>!0};function Gh(n,e,t){return kp[t.paths](n.root,e.root,t.matrixParams)&&Hh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lp(n,e,t){return zh(n,e,e.segments,t)}function zh(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ii(s,t)||e.hasChildren()||!Lu(s,t,r))}if(n.segments.length===t.length){if(!Ii(n.segments,t)||!Lu(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Lp(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ii(n.segments,s)&&Lu(n.segments,s,r)&&n.children[Nt])&&zh(n.children[Nt],e,u,r)}}function Lu(n,e,t){return e.every((r,s)=>Hh[t](n[s].parameters,r.parameters))}class Ho{constructor(e=new Ut([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bo(this.queryParams)),this._queryParamMap}toString(){return qh.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sr(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kc(this)}}class Ba{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bo(this.parameters)),this._parameterMap}toString(){return md(this)}}function Ii(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new ja},providedIn:"root"}),n})();class ja{parse(e){const t=new by(e);return new Ho(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ms(e.root,!0)}`,r=function Iy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Zc(t)}=${Zc(s)}`).join("&"):`${Zc(t)}=${Zc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qh=new ja;function Kc(n){return n.segments.map(e=>md(e)).join("/")}function Ms(n,e){if(!n.hasChildren())return Kc(n);if(e){const t=n.children[Nt]?Ms(n.children[Nt],!1):"",r=[];return sr(n.children,(s,u)=>{u!==Nt&&r.push(`${u}:${Ms(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ey(n,e){let t=[];return sr(n.children,(r,s)=>{s===Nt&&(t=t.concat(e(r,s)))}),sr(n.children,(r,s)=>{s!==Nt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Nt?[Ms(n.children[Nt],!1)]:[`${s}:${Ms(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Kc(n)}/${t[0]}`:`${Kc(n)}/(${t.join("//")})`}}function pd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zc(n){return pd(n).replace(/%3B/gi,";")}function $a(n){return pd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gd(n){return decodeURIComponent(n)}function Up(n){return gd(n.replace(/\+/g,"%20"))}function md(n){return`${$a(n.path)}${function Wh(n){return Object.keys(n).map(e=>`;${$a(e)}=${$a(n[e])}`).join("")}(n.parameters)}`}const Dy=/^[^\/()?;=#]+/;function Go(n){const e=n.match(Dy);return e?e[0]:""}const Kh=/^[^=?&#]+/,Zh=/^[^&#]+/;class by{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new Ut(e,t)),r}parseSegment(){const e=Go(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,jo);return this.capture(e),new Ba(gd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Go(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Go(this.remaining);s&&(r=s,this.capture(r))}e[gd(t)]=gd(r)}parseQueryParam(e){const t=function Bp(n){const e=n.match(Kh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function jp(n){const e=n.match(Zh);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Up(t),u=Up(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Go(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,jo);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Nt]:new Ut([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,jo)}}function yd(n){return n.segments.length>0?new Ut([],{[Nt]:n}):n}function Yc(n){const e={};for(const r of Object.keys(n.children)){const u=Yc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ha(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function Ui(n){return n instanceof Ho}const _d=!1;function Sy(n,e,t,r,s){if(0===t.length)return oo(e.root,e.root,e.root,r,s);const u=function Xc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vd(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return sr(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new vd(t,e,r)}(t);return u.toRoot()?oo(e.root,e.root,new Ut([],{}),r,s):function l(w){const b=function Xr(n,e,t,r){if(n.isAbsolute)return new es(e.root,!0,0);if(-1===r)return new es(t,t===e.root,0);return function zo(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,_d&&"Invalid number of '../'");s=r.segments.length}return new es(r,!1,s-u)}(t,r+(Vu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=b.processChildren?qo(b.segmentGroup,b.index,u.commands):za(b.segmentGroup,b.index,u.commands);return oo(e.root,b.segmentGroup,A,r,s)}(n.snapshot?._lastPathIndex)}function Vu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ga(n){return"object"==typeof n&&null!=n&&n.outlets}function oo(n,e,t,r,s){let l,u={};r&&sr(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:Uu(n,e,t);const m=yd(Yc(l));return new Ho(m,u,s)}function Uu(n,e,t){const r={};return sr(n.children,(s,u)=>{r[u]=s===e?t:Uu(s,e,t)}),new Ut(n.segments,r)}class vd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vu(r[0]))throw new f.vHH(4003,_d&&"Root segment cannot have matrix parameters");const s=r.find(Ga);if(s&&s!==qc(r))throw new f.vHH(4004,_d&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class es{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function za(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return qo(n,e,t);const r=function Ed(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(Ga(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Rs(w,b,l))return u;r+=2}else{if(!Rs(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ut(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new Ut(n.segments.slice(r.pathIndex),n.children),qo(u,0,s)}return r.match&&0===s.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?Yh(n,e,t):r.match?qo(n,0,s):Yh(n,e,t)}function qo(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function wd(n){return Ga(n[0])?n[0].outlets:{[Nt]:n}}(t),s={};return!r[Nt]&&n.children[Nt]&&1===n.numberOfChildren&&0===n.children[Nt].segments.length?qo(n.children[Nt],e,t):(sr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=za(n.children[l],e,u))}),sr(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new Ut(n.segments,s))}}function Yh(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ga(u)){const w=Hp(u.outlets);return new Ut(r,w)}if(0===s&&Vu(t[0])){r.push(new Ba(n.segments[e].path,Gp(t[0]))),s++;continue}const l=Ga(u)?u.outlets[Nt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&Vu(m)?(r.push(new Ba(l,Gp(m))),s+=2):(r.push(new Ba(l,{})),s++)}return new Ut(r,{})}function Hp(n){const e={};return sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yh(new Ut([],{}),0,t))}),e}function Gp(n){const e={};return sr(n,(t,r)=>e[r]=`${t}`),e}function Rs(n,e,t){return n==t.path&&xs(e,t.parameters)}const qa="imperative";class Di{constructor(e,t){this.id=e,this.url=t}}class Jc extends Di{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bi extends Di{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class el extends Di{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wr extends Di{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class Id extends Di{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qh extends Di{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xh extends Di{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ao extends Di{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bu extends Di{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tl extends Di{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dd{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bd{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ay{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let g=(()=>{class n{createUrlTree(t,r,s,u,l,m){return Sy(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return g.\u0275fac(e)},providedIn:"root"}),n})();class R{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=z(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=z(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ie(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ie(e,this._root).map(t=>t.value)}}function z(n,e){if(n===e.value)return e;for(const t of e.children){const r=z(n,t);if(r)return r}return null}function ie(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ie(n,t);if(r.length)return r.unshift(e),r}return[]}class Ne{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qe(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Dt extends R{constructor(e,t){super(e),this.snapshot=t,Ko(this,e)}toString(){return this.snapshot.toString()}}function ht(n,e){const t=function or(n,e){const l=new Wo([],{},{},"",{},Nt,e,null,n.root,-1,{});return new ts("",new Ne(l,[]))}(n,e),r=new lr([new Ba("",{})]),s=new lr({}),u=new lr({}),l=new lr({}),m=new lr(""),w=new Er(r,s,l,m,u,Nt,e,t.root);return w.snapshot=t.root,new Dt(new Ne(w,[]),t)}class Er{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,Mt.U)(b=>b[so]))??at(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>Bo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>Bo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Zp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Wo{get title(){return this.data?.[so]}constructor(e,t,r,s,u,l,m,w,b,A,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ts extends R{constructor(e,t){super(t),this.url=e,Ko(this,t)}toString(){return rl(this._root)}}function Ko(n,e){e.value._routerState=n,e.children.forEach(t=>Ko(n,t))}function rl(n){const e=n.children.length>0?` { ${n.children.map(rl).join(", ")} } `:"";return`${n.value}${e}`}function il(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),xs(e.params,t.params)||n.params.next(t.params),function $h(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function sl(n,e){const t=xs(n.params,e.params)&&function wy(n,e){return Ii(n,e)&&n.every((t,r)=>xs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sl(n.parent,e.parent))}function ol(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function U0(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return ol(n,r,s);return ol(n,r)})}(n,e,t);return new Ne(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>ol(n,m)),l}}const r=function al(n){return new Er(new lr(n.url),new lr(n.params),new lr(n.queryParams),new lr(n.fragment),new lr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>ol(n,u));return new Ne(r,s)}}const ul="ngNavigationCancelingError";function BD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ui(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=jD(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function jD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ul]=!0,r.cancellationCode=e,t&&(r.url=t),r}function xy(n){return B0(n)&&Ui(n.url)}function B0(n){return n&&n[ul]}class $D{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jh,this.attachRef=null}}let Jh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new $D,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qp=!1;let Xp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Nt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Jh),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Qp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Qp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Qp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,Qp);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Jp(t,m,s.injector);if(r&&function HD(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class Jp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Er?this.route:e===Jh?this.childContexts:this.parent.get(e,t)}}let ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Xp],encapsulation:2}),n})();function j0(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function My(n){const e=n.children&&n.children.map(My),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=ef),t}function ns(n){return n.outlet||Nt}function WD(n,e){const t=n.filter(r=>ns(r)===e);return t.push(...n.filter(r=>ns(r)!==e)),t}function tg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ry{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),il(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Qe(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),sr(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Qe(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Qe(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Qe(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Ay(u.value.snapshot))}),e.children.length&&this.forwardEvent(new qp(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(il(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),il(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=tg(s.snapshot),w=m?.get(f._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Oy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nf{constructor(e,t){this.component=e,this.route=t}}function H0(n,e,t){const r=n._root;return Td(r,e?e._root:null,t,[r.value])}function Cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Td(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Qe(e);return n.children.forEach(l=>{(function G0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function Ny(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sl(n,e)||!xs(n.queryParams,e.queryParams);default:return!sl(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new Oy(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Td(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new nf(m.outlet.component,l))}else l&&ng(e,m,s),s.canActivateChecks.push(new Oy(r)),Td(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),sr(u,(l,m)=>ng(l,t.getContext(m),s)),s}function ng(n,e,t){const r=Qe(n),s=n.value;sr(r,(u,l)=>{ng(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new nf(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function cl(n){return"function"==typeof n}function ky(n){return n instanceof io||"EmptyError"===n?.name}const Sd=Symbol("INITIAL_VALUE");function Wa(){return An(n=>Y(n.map(e=>e.pipe(dd(1),function L0(...n){const e=(0,ro.yG)(n);return(0,$n.e)((t,r)=>{(e?jt(n,t,e):jt(n,t)).subscribe(r)})}(Sd)))).pipe((0,Mt.U)(e=>{for(const t of e)if(!0!==t){if(t===Sd)return Sd;if(!1===t||t instanceof Ho)return t}return!0}),Li(e=>e!==Sd),dd(1)))}function Y0(n){return(0,Jn.z)((0,vr.b)(e=>{if(Ui(e))throw BD(0,e)}),(0,Mt.U)(e=>!0===e))}const Vy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uy(n,e,t,r,s){const u=By(n,e,t);return u.matched?function Ly(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?at(s.map(l=>{const m=Cd(l,n);return xn(function YD(n){return n&&cl(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Wa(),Y0()):at(!0)}(r=j0(e,r),e,t).pipe((0,Mt.U)(l=>!0===l?u:{...Vy})):at(u)}function By(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Vy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||_y)(t,n,e);if(!s)return{...Vy};const u={};sr(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function rf(n,e,t,r){if(t.length>0&&function sf(n,e,t){return t.some(r=>Ka(n,e,r)&&ns(r)!==Nt)}(n,t,r)){const u=new Ut(e,function tb(n,e,t,r){const s={};s[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ns(u)!==Nt){const l=new Ut([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[ns(u)]=l}return s}(n,e,r,new Ut(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function nb(n,e,t){return t.some(r=>Ka(n,e,r))}(n,t,r)){const u=new Ut(n.segments,function wA(n,e,t,r,s){const u={};for(const l of r)if(Ka(n,t,l)&&!s[ns(l)]){const m=new Ut([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[ns(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Ut(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Ka(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function xd(n,e,t,r){return!!(ns(n)===r||r!==Nt&&Ka(e,t,n))&&("**"===n.path||By(e,n,t).matched)}function Q0(n,e,t){return 0===e.length&&!n.children[t]}const af=!1;class ig{constructor(e){this.segmentGroup=e||null}}class X0{constructor(e){this.urlTree=e}}function uf(n){return Ts(new ig(n))}function jy(n){return Ts(new X0(n))}class rb{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=rf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Nt).pipe((0,Mt.U)(u=>this.createUrlTree(Yc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(As(u=>{if(u instanceof X0)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ig?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Nt).pipe((0,Mt.U)(s=>this.createUrlTree(Yc(s),e.queryParams,e.fragment))).pipe(As(s=>{throw s instanceof ig?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,af)}createUrlTree(e,t,r){const s=yd(e);return new Ho(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new Ut([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Nn.D)(s).pipe(Ss(u=>{const l=r.children[u],m=WD(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,Mt.U)(w=>({segment:w,outlet:u})))}),Bh((u,l)=>(u[l.outlet]=l.segment,u),{}),Vi())}expandSegment(e,t,r,s,u,l){return(0,Nn.D)(r).pipe(Ss(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(As(b=>{if(b instanceof ig)return at(null);throw b}))),Uo(m=>!!m),As((m,w)=>{if(ky(m))return Q0(t,s,u)?at(new Ut([],{})):uf(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return xd(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):uf(t):uf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jy(u):this.lineralizeSegments(r,u).pipe((0,oi.z)(l=>{const m=new Ut(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=By(t,s,u);if(!m)return uf(t);const O=this.applyRedirectCommands(w,s.redirectTo,A);return s.redirectTo.startsWith("/")?jy(O):this.lineralizeSegments(s,O).pipe((0,oi.z)(B=>this.expandSegment(e,t,r,B.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=j0(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Mt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ut(s,{})))):at(new Ut(s,{}))):Uy(t,r,s,e).pipe(An(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,oi.z)(A=>{const O=A.injector??e,B=A.routes,{segmentGroup:K,slicedSegments:Q}=rf(t,m,w,B),Re=new Ut(K.segments,K.children);if(0===Q.length&&Re.hasChildren())return this.expandChildren(O,B,Re).pipe((0,Mt.U)(zt=>new Ut(m,zt)));if(0===B.length&&0===Q.length)return at(new Ut(m,{}));const je=ns(r)===u;return this.expandSegment(O,Re,B,Q,je?Nt:u,!0).pipe((0,Mt.U)($t=>new Ut(m.concat($t.segments),$t.children)))})):uf(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function eb(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?at(!0):at(s.map(l=>{const m=Cd(l,n);return xn(function Py(n){return n&&cl(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Wa(),Y0())}(e,t,r).pipe((0,oi.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,vr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function $y(n){return Ts(jD(af,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return at(r);if(s.numberOfChildren>1||!s.children[Nt])return e.redirectTo,Ts(new f.vHH(4e3,af));s=s.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Ho(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sr(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return sr(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new Ut(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,af);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class ib{}class ab{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=rf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Nt).pipe((0,Mt.U)(t=>{if(null===t)return null;const r=new Wo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Ne(r,t),u=new ts(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=nl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Nn.D)(Object.keys(r.children)).pipe(Ss(s=>{const u=r.children[s],l=WD(t,s);return this.processSegmentGroup(e,l,u,s)}),Bh((s,u)=>s&&u?(s.push(...u),s):null),function gy(n,e=!1){return(0,$n.e)((t,r)=>{let s=0;t.subscribe((0,N.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Uh(null),Vi(),(0,Mt.U)(s=>{if(null===s)return null;const u=hl(s);return function ub(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Nn.D)(t).pipe(Ss(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Uo(l=>!!l),As(l=>{if(ky(l))return Q0(r,s,u)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!xd(t,r,s,u))return at(null);let l;if("**"===t.path){const m=s.length>0?qc(s).parameters:{},w=tw(r)+s.length;l=at({snapshot:new Wo(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,db(t),ns(t),t.component??t._loadedComponent??null,t,ew(r),w,zy(t)),consumedSegments:[],remainingSegments:[]})}else l=Uy(r,t,s,e).pipe((0,Mt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:A})=>{if(!m)return null;const O=tw(r)+w.length;return{snapshot:new Wo(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,db(t),ns(t),t.component??t._loadedComponent??null,t,ew(r),O,zy(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(An(m=>{if(null===m)return at(null);const{snapshot:w,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const O=t._loadedInjector??e,B=function cb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:Q}=rf(r,b,A,B.filter(je=>void 0===je.redirectTo));if(0===Q.length&&K.hasChildren())return this.processChildren(O,B,K).pipe((0,Mt.U)(je=>null===je?null:[new Ne(w,je)]));if(0===B.length&&0===Q.length)return at([new Ne(w,[])]);const Re=ns(t)===u;return this.processSegment(O,B,K,Q,Re?Nt:u).pipe((0,Mt.U)(je=>null===je?null:[new Ne(w,je)]))}))}}function lb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hl(n){const e=[],t=new Set;for(const r of n){if(!lb(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=hl(r.children);e.push(new Ne(r.value,s))}return e.filter(r=>!t.has(r))}function ew(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function db(n){return n.data||{}}function zy(n){return n.resolve||{}}function sw(n){return"string"==typeof n.title||null===n.title}function rs(n){return An(e=>{const t=n(e);return t?(0,Nn.D)(t).pipe((0,Mt.U)(()=>e)):at(e)})}const Rd=new f.OlP("ROUTES");let Wy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=xn(t.loadComponent()).pipe((0,Mt.U)(ow),(0,vr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),jh(()=>{this.componentLoaders.delete(t)})),s=new Op(r,()=>new Ei.x).pipe(Ua());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Mt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,A=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Qr(w.get(Rd,[],f.XFs.Self|f.XFs.Optional)));return{routes:b.map(My),injector:w}}),jh(()=>{this.childrenLoaders.delete(r)})),l=new Op(u,()=>new Ei.x).pipe(Ua());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return xn(t()).pipe((0,Mt.U)(ow),(0,oi.z)(s=>s instanceof f.YKP||Array.isArray(s)?at(s):(0,Nn.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ow(n){return function gb(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ei.x,this.configLoader=(0,f.f3M)(Wy),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Wc),this.rootContexts=(0,f.f3M)(Jh),this.navigationId=0,this.afterPreactivation=()=>at(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new zp(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Dd(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new lr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qa,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Li(r=>0!==r.id),(0,Mt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),An(r=>{let s=!1,u=!1;return at(r).pipe((0,vr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),An(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new wr(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Zr.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return aw(l.source)&&(t.browserUrlTree=l.extractedUrl),at(l).pipe(An(A=>{const O=this.transitions?.getValue();return this.events.next(new Jc(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),O!==this.transitions?.getValue()?Zr.E:Promise.resolve(A)}),function Gy(n,e,t,r){return An(s=>function Hy(n,e,t,r,s){return new rb(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Mt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,vr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function EA(n,e,t,r,s){return(0,oi.z)(u=>function ob(n,e,t,r,s,u,l="emptyOnly"){return new ab(n,e,t,r,s,l,u).recognize().pipe(An(m=>null===m?function sb(n){return new Kr.y(e=>e.error(n))}(new ib):at(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,Mt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,vr.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const B=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(B,A)}t.browserUrlTree=A.urlAfterRedirects}const O=new Qh(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(O)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:O,source:B,restoredState:K,extras:Q}=l,Re=new Jc(A,this.urlSerializer.serialize(O),B,K);this.events.next(Re);const je=ht(O,this.rootComponentType).snapshot;return at(r={...l,targetSnapshot:je,urlAfterRedirects:O,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new wr(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Zr.E}}),(0,vr.b)(l=>{const m=new Xh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,Mt.U)(l=>r={...l,guards:H0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function dl(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?at({...t,guardsResult:!0}):function K0(n,e,t,r){return(0,Nn.D)(n).pipe((0,oi.z)(s=>function JD(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?at(u.map(m=>{const w=tg(e)??s,b=Cd(m,w);return xn(function ll(n){return n&&cl(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Uo())})).pipe(Wa()):at(!0)}(s.component,s.route,t,e,r)),Uo(s=>!0!==s,!0))}(l,r,s,n).pipe((0,oi.z)(m=>m&&function ZD(n){return"boolean"==typeof n}(m)?function Fy(n,e,t,r){return(0,Nn.D)(e).pipe(Ss(s=>jt(function XD(n,e){return null!==n&&e&&e(new bd(n)),at(!0)}(s.route.parent,r),function QD(n,e){return null!==n&&e&&e(new Wp(n)),at(!0)}(s.route,r),function Ad(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function KD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Xn(()=>at(l.guards.map(w=>{const b=tg(l.node)??t,A=Cd(w,b);return xn(function q0(n){return n&&cl(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Uo())})).pipe(Wa())));return at(u).pipe(Wa())}(n,s.path,t),function Z0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const s=r.map(u=>Xn(()=>{const l=tg(e)??t,m=Cd(u,l);return xn(function z0(n){return n&&cl(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Uo())}));return at(s).pipe(Wa())}(n,s.route,t))),Uo(s=>!0!==s,!0))}(r,u,n,e):at(m)),(0,Mt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,vr.b)(l=>{if(r.guardsResult=l.guardsResult,Ui(l.guardsResult))throw BD(0,l.guardsResult);const m=new ao(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Li(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),rs(l=>{if(l.guards.canActivateChecks.length)return at(l).pipe((0,vr.b)(m=>{const w=new Bu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),An(m=>{let w=!1;return at(m).pipe(function nw(n,e){return(0,oi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return at(t);let u=0;return(0,Nn.D)(s).pipe(Ss(l=>function rw(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!sw(s)&&(u[so]=s.title),function hb(n,e,t,r){const s=function iw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return at({});const u={};return(0,Nn.D)(s).pipe((0,oi.z)(l=>function fb(n,e,t,r){const s=tg(e)??r,u=Cd(n,s);return xn(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Uo(),(0,vr.b)(m=>{u[l]=m}))),hd(1),function my(n){return(0,Mt.U)(()=>n)}(u),As(l=>ky(l)?Zr.E:Ts(l)))}(u,n,e,r).pipe((0,Mt.U)(l=>(n._resolvedData=l,n.data=nl(n,t).resolve,s&&sw(s)&&(n.data[so]=s.title),null)))}(l.route,r,n,e)),(0,vr.b)(()=>u++),hd(1),(0,oi.z)(l=>u===s.length?at(t):Zr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,vr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,vr.b)(m=>{const w=new tl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),rs(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,vr.b)(A=>{w.component=A}),(0,Mt.U)(()=>{})));for(const A of w.children)b.push(...m(A));return b};return Y(m(l.targetSnapshot.root)).pipe(Uh(),dd(1))}),rs(()=>this.afterPreactivation()),(0,Mt.U)(l=>{const m=function Yp(n,e,t){const r=ol(n,e._root,t?t._root:void 0);return new Dt(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,vr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new Ry(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,vr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),jh(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),As(l=>{if(u=!0,B0(l)){xy(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new el(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),xy(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||aw(r.source)};t.scheduleNavigation(w,qa,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new Id(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Zr.E}))}))}cancelNavigationTransition(t,r,s){const u=new el(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aw(n){return n!==qa}let uw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Nt);return r}getResolvedTitleForRoute(t){return t.data[so]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Bt)},providedIn:"root"}),n})(),Bt=(()=>{class n extends uw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ph))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(dw)},providedIn:"root"}),n})();class lw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let dw=(()=>{class n extends lw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const og=new f.OlP("",{providedIn:"root",factory:()=>({})});let hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(yb)},providedIn:"root"}),n})(),yb=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _b(n){throw n}function vb(n,e,t){return e.parse("/")}const IA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(og,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_b,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||vb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(hw),this.routeReuseStrategy=(0,f.f3M)(cw),this.urlCreationStrategy=(0,f.f3M)(S),this.titleStrategy=(0,f.f3M)(uw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Qr((0,f.f3M)(Rd,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(sg),this.urlSerializer=(0,f.f3M)(Wc),this.location=(0,f.f3M)(ke),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ho,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ht(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qa,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(My),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ui(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,qa,null,r)}navigate(t,r={skipLocationChange:!1}){return function fl(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...IA}:!1===r?{...fw}:r,Ui(t))return Gh(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Gh(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,A;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((O,B)=>{m=O,w=B}),A="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pw{}let DA=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Li(t=>t instanceof Bi),Ss(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,Nn.D)(s).pipe((0,ot.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const u=s.pipe((0,oi.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Nn.D)([u,l]).pipe((0,ot.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bi),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(pw),f.LFG(Wy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qy=new f.OlP("");let Xy=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Kp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var Os=(()=>((Os=Os||{})[Os.COMPLETE=0]="COMPLETE",Os[Os.FAILED=1]="FAILED",Os[Os.REDIRECTING=2]="REDIRECTING",Os))();const uo=!1;function co(n,e){return{\u0275kind:n,\u0275providers:e}}const e_=new f.OlP("",{providedIn:"root",factory:()=>!1});function mw(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(bi),s=n.get(yw);1===n.get(t_)&&r.initialNavigation(),n.get(n_,null,f.XFs.Optional)?.setUpPreloading(),n.get(Qy,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const yw=new f.OlP(uo?"bootstrap done indicator":"",{factory:()=>new Ei.x}),t_=new f.OlP(uo?"initial navigation":"",{providedIn:"root",factory:()=>1});function vw(){let n=[];return n=uo?[{provide:f.Xts,multi:!0,useFactory:()=>{const e=(0,f.f3M)(bi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function y(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],co(1,n)}const n_=new f.OlP(uo?"router preloader":"");function r_(n){return co(0,[{provide:n_,useExisting:DA},{provide:pw,useExisting:n}])}const ug=!1,i_=new f.OlP(ug?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ib=[ke,{provide:Wc,useClass:ja},bi,Jh,{provide:Er,useFactory:function Jy(n){return n.routerState.root},deps:[bi]},Wy,ug?{provide:e_,useValue:!0}:[]];function Ew(){return new f.PXZ("Router",bi)}let Iw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ib,ug&&r?.enableTracing?vw().\u0275providers:[],{provide:Rd,multi:!0,useValue:t},{provide:i_,useFactory:s_,deps:[[bi,new f.FiY,new f.tp0]]},{provide:og,useValue:r||{}},r?.useHash?{provide:rt,useClass:Ee}:{provide:rt,useClass:we},{provide:Qy,useFactory:()=>{const n=(0,f.f3M)(Io),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(og),r=(0,f.f3M)(sg),s=(0,f.f3M)(Wc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Xy(s,r,n,e,t)}},r?.preloadingStrategy?r_(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:Ew},r?.initialNavigation?df(r):[],[{provide:lg,useFactory:mw},{provide:f.tb,multi:!0,useExisting:lg}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Rd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(i_,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ef]}),n})();function s_(n){if(ug&&n)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function df(n){return["disabled"===n.initialNavigation?co(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(bi);return()=>{e.setUpLocationChangeListener()}}},{provide:t_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?co(2,[{provide:t_,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(me,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(bi),u=e.get(yw);(function wb(n,e){n.events.pipe(Li(t=>t instanceof Bi||t instanceof el||t instanceof Id||t instanceof wr),(0,Mt.U)(t=>t instanceof Bi||t instanceof wr?Os.COMPLETE:t instanceof el&&(0===t.code||1===t.code)?Os.REDIRECTING:Os.FAILED),Li(t=>t!==Os.REDIRECTING),dd(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(sg).afterPreactivation=()=>(r(!0),u.closed?at(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const lg=new f.OlP(ug?"Router Initializer":"");let hg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ya=(()=>{class n extends hg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const lo=new f.OlP("NgValueAccessor"),Cb={provide:lo,useExisting:(0,f.Gpc)(()=>Nd),multi:!0},Tb=new f.OlP("CompositionEventMode");let Nd=(()=>{class n extends hg{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bw(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Tb,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Cb]),f.qOj]}),n})();const Cw=!1,mn=new f.OlP("NgValidators"),Qa=new f.OlP("NgAsyncValidators");function Ow(n){return null!=n}function Nw(n){const e=(0,f.QGY)(n)?(0,Nn.D)(n):n;if(Cw&&!(0,f.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,t)}return e}function Pw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function kw(n,e){return e.map(t=>t(n))}function ho(n){return n.map(e=>function Ab(n){return!n.validate}(e)?e:t=>e.validate(t))}function l_(n){return null!=n?function pg(n){if(!n)return null;const e=n.filter(Ow);return 0==e.length?null:function(t){return Pw(kw(t,e))}}(ho(n)):null}function gg(n){return null!=n?function Fw(n){if(!n)return null;const e=n.filter(Ow);return 0==e.length?null:function(t){return function o_(...n){const e=(0,ro.jO)(n),{args:t,keys:r}=Vh(n),s=new Kr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let A=0;A<l;A++){let O=!1;(0,It.Xf)(t[A]).subscribe((0,N.x)(u,B=>{O||(O=!0,b--),m[A]=B},()=>w--,void 0,()=>{(!w||!O)&&(b||u.next(r?x(r,m):m),u.complete())}))}});return e?s.pipe(C(e)):s}(kw(t,e).map(Nw)).pipe((0,Mt.U)(Pw))}}(ho(n)):null}function Lw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hf(n){return n?Array.isArray(n)?n:[n]:[]}function mg(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bw(n,e){const t=hf(e);return hf(n).forEach(s=>{mg(t,s)||t.push(s)}),t}function ff(n,e){return hf(e).filter(t=>!mg(n,t))}class yg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=l_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fr extends yg{get formDirective(){return null}get path(){return null}}class pl extends yg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class _g{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vg=(()=>{class n extends _g{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pl,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})();const pf="VALID",bg="INVALID",Ld="PENDING",Vd="DISABLED";function Cg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Gw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pf}get invalid(){return this.status===bg}get pending(){return this.status==Ld}get disabled(){return this.status===Vd}get enabled(){return this.status!==Vd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ff(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ff(e,this._rawAsyncValidators))}hasValidator(e){return mg(this._rawValidators,e)}hasAsyncValidator(e){return mg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ld,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pf||this.status===Ld)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vd:pf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ld,this._hasOwnPendingAsyncValidator=!0;const t=Nw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Vd:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ld)?Ld:this._anyControlsHaveStatus(bg)?bg:pf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Lb(n){return Array.isArray(n)?l_(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Vb(n){return Array.isArray(n)?gg(n):n||null}(this._rawAsyncValidators)}}const yf=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>_f}),_f="always";function $u(n,e,t=_f){(function g_(n,e){const t=function Vw(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Lw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Uw(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Lw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Sg(e._rawValidators,s),Sg(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function vf(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Hu(n,e)})}(n,e),function Ag(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ai(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Hu(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function p_(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Sg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hu(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function y_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function __(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const v_=class extends Gw{constructor(e=null,t,r){super(function gf(n){return(Cg(n)?n.validators:n)||null}(t),function mf(n,e){return(Cg(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=__(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){y_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){y_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){__(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Mg={provide:pl,useExisting:(0,f.Gpc)(()=>$d)},Df=(()=>Promise.resolve())();let $d=(()=>{class n extends pl{constructor(t,r,s,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new v_,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function qu(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Nd?t=u:function Bd(n){return Object.getPrototypeOf(n.constructor)===Ya}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function zu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$u(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Df.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,f.D6c)(r);Df.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function f_(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Fr,9),f.Y36(mn,10),f.Y36(Qa,10),f.Y36(lo,10),f.Y36(f.sBO,8),f.Y36(yf,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([Mg]),f.qOj,f.TTD]}),n})(),Og=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Jb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Og]}),n})(),fo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yf,useValue:t.callSetDisabledState??_f}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Jb]}),n})();class Hd{constructor(e){this.router=e}ngOnInit(){}route(){this.router.navigate(["/result"],{queryParams:{term:this.data}})}search(e){13===e.keyCode&&this.route()}}Hd.\u0275fac=function(e){return new(e||Hd)(f.Y36(bi))},Hd.\u0275cmp=f.Xpm({type:Hd,selectors:[["app-search"]],decls:29,vars:1,consts:[[1,"home__body"],["src","./assets/a2.png","alt","Google Logo"],[1,"home__inputContainer"],[1,"search"],[1,"search__input"],["focusable","false","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"search__inputIcon"],["d","M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"],["type","text",3,"ngModel","ngModelChange","keydown"],["focusable","false","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"search__inputIcon"],["d","m12 15c1.66 0 3-1.31 3-2.97v-7.02c0-1.66-1.34-3.01-3-3.01s-3 1.34-3 3.01v7.02c0 1.66 1.34 2.97 3 2.97z","fill","#4285f4"],["d","m11 18.08h2v3.92h-2z","fill","#34a853"],["d","m7.05 16.87c-1.27-1.33-2.05-2.83-2.05-4.87h2c0 1.45 0.56 2.42 1.47 3.38v0.32l-1.15 1.18z","fill","#f4b400"],["d","m12 16.93a4.97 5.25 0 0 1 -3.54 -1.55l-1.41 1.49c1.26 1.34 3.02 2.13 4.95 2.13 3.87 0 6.99-2.92 6.99-7h-1.99c0 2.92-2.24 4.93-5 4.93z","fill","#ea4335"],[1,"search__buttons"],["type","submit",3,"click"],[1,"search__extra"],["href","https://ebinezh.github.io/WeatherAppTrial3/",1,"search__extraLinks"],["href","https://ebinezh.github.io/NetflixClone/",1,"search__extraLinks"],["href","https://ebinezh.github.io/TicTacGame/tic.html",1,"search__extraLinks"],["href","https://ebinezh.github.io/crypty/",1,"search__extraLinks"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.TgZ(2,"div",2)(3,"div",3)(4,"div",4),f.O4$(),f.TgZ(5,"svg",5),f._UZ(6,"path",6),f.qZA(),f.kcU(),f.TgZ(7,"input",7),f.NdJ("ngModelChange",function(s){return t.data=s})("keydown",function(s){return t.search(s)}),f.qZA(),f.O4$(),f.TgZ(8,"svg",8),f._UZ(9,"path",9)(10,"path",10)(11,"path",11)(12,"path",12),f.qZA()()()()(),f.kcU(),f.TgZ(13,"div",13)(14,"button",14),f.NdJ("click",function(){return t.route()}),f._uU(15,"Google Search"),f.qZA(),f.TgZ(16,"button"),f._uU(17,"I'm Feeling Lucky"),f.qZA()(),f.TgZ(18,"div",15)(19,"span"),f._uU(20,"Check out my other projects\u{1f601} "),f.TgZ(21,"a",16),f._uU(22,"WeatherApp"),f.qZA(),f.TgZ(23,"a",17),f._uU(24,"NetflixClone"),f.qZA(),f.TgZ(25,"a",18),f._uU(26,"TicTacGame"),f.qZA(),f.TgZ(27,"a",19),f._uU(28,"CryptoDetails"),f.qZA()()()),2&e&&(f.xp6(7),f.Q6J("ngModel",t.data))},dependencies:[Nd,vg,$d],styles:[".home__body[_ngcontent-%COMP%]{display:flex;flex:1;margin-top:6.6%;flex-direction:column}.home__body[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{object-fit:contain;height:100px}.search__input[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid lightgray;height:30px;padding:10px 20px;border-radius:999px;width:75vw;margin:40px auto 0;max-width:560px}.search__input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{flex:1;padding:10px 20px;border:none;font-size:medium}.search__input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline-width:0}.search__inputIcon[_ngcontent-%COMP%]{height:24px}.search__buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;height:70px;padding-top:18px;top:53px;z-index:0}.search__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-image:-webkit-linear-gradient(top,#f5f5f5,#f1f1f1);background-color:#f2f2f2;border:1px solid #f2f2f2;border-radius:4px;color:#5f6368;font-family:arial,sans-serif;font-size:14px;margin:11px 4px;padding:0 16px;line-height:27px;height:36px;min-width:54px;text-align:center;cursor:pointer;-webkit-user-select:none;user-select:none}.search__buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:0 1px 1px #0000001a;background-image:-webkit-linear-gradient(top,#f5f5f5,#f1f1f1);background-color:#f5f5f5;border:1px solid #c6c6c6;color:#222}.search__extra[_ngcontent-%COMP%]{text-align:center;color:#222;font-family:arial,sans-serif;line-height:28px}.search__extraLinks[_ngcontent-%COMP%]{padding:0 3px;margin-left:5px;color:#00f;font-size:small;text-decoration:inherit}.search__extraLinks[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{text-decoration:underline}"]});var ct,gE=F(9260),tC=(F(4217),F(3942)),he=F(5861),tu=F(9681),Zu=F(4859),Yu=F(1877),rn=F(2090),nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yo={},Gd=Gd||{},Ft=nC||self;function Tf(){}function Sf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _l(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Af="closure_uid_"+(1e9*Math.random()>>>0),mE=0;function yE(n,e,t){return n.call.apply(n.bind,arguments)}function _E(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yE:_E).apply(null,arguments)}function xf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function nu(){this.s=this.s,this.o=this.o}nu.prototype.s=!1,nu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Lg(n){Object.prototype.hasOwnProperty.call(n,Af)&&n[Af]||(n[Af]=++mE)}(this)},nu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function k_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Sf(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ui.prototype.h=function(){this.defaultPrevented=!0};var iC=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",Tf,e),Ft.removeEventListener("test",Tf,e)}catch{}return n}();function Vg(n){return/^[\s\xa0]*$/.test(n)}var EE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function F_(n,e){return n<e?-1:n>e?1:0}function Ug(){var n=Ft.navigator;return n&&(n=n.userAgent)?n:""}function Qo(n){return-1!=Ug().indexOf(n)}function L_(n){return L_[" "](n),n}L_[" "]=Tf;var Mf,n,oC=Qo("Opera"),zd=Qo("Trident")||Qo("MSIE"),IE=Qo("Edge"),V_=IE||zd,DE=Qo("Gecko")&&!(-1!=Ug().toLowerCase().indexOf("webkit")&&!Qo("Edge"))&&!(Qo("Trident")||Qo("MSIE"))&&!Qo("Edge"),bE=-1!=Ug().toLowerCase().indexOf("webkit")&&!Qo("Edge");function U_(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Bg="",jg=(n=Ug(),DE?/rv:([^\);]+)(\)|;)/.exec(n):IE?/Edge\/([\d\.]+)/.exec(n):zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bE?/WebKit\/(\S+)/.exec(n):oC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(jg&&(Bg=jg?jg[1]:""),zd){var $g=U_();if(null!=$g&&$g>parseFloat(Bg)){Mf=String($g);break e}}Mf=Bg}var CE={};var SE=Ft.document&&zd&&(U_()||parseInt(Mf,10))||void 0;function po(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(DE){e:{try{L_(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:aC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&po.X.h.call(this)}}Lr(po,ui);var aC={2:"touch",3:"pen",4:"mouse"};po.prototype.h=function(){po.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rf="closure_listenable_"+(1e6*Math.random()|0),qd=0;function $A(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++qd,this.ba=this.ea=!1}function Wd(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function AE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function j_(n){const e={};for(const t in n)e[t]=n[t];return e}const $_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uC(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<$_.length;u++)t=$_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vt(n){this.src=n,this.g={},this.h=0}function H_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=vE(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Wd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function G_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}vt.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=G_(n,e,r,s);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new $A(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var z_="closure_lm_"+(1e6*Math.random()|0),Qu={};function xE(n,e,t,r,s){if(r&&r.once)return Hn(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)xE(n,e[u],t,r,s);return null}return t=Kg(t),n&&n[Rf]?n.N(e,t,_l(r)?!!r.capture:!!r,s):Of(n,e,t,!1,r,s)}function Of(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=_l(s)?!!s.capture:!!s,m=qg(n);if(m||(n[z_]=m=new vt(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function Gg(){const e=lC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)iC||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(q_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Hn(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Hn(n,e[u],t,r,s);return null}return t=Kg(t),n&&n[Rf]?n.O(e,t,_l(r)?!!r.capture:!!r,s):Of(n,e,t,!0,r,s)}function cC(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)cC(n,e[u],t,r,s);else r=_l(r)?!!r.capture:!!r,t=Kg(t),n&&n[Rf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=G_(u=n.g[e],t,r,s))&&(Wd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=qg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=G_(e,t,r,s)),(t=-1<n?e[n]:null)&&zg(t))}function zg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Rf])H_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(q_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qg(e))?(H_(t,n),0==t.h&&(t.src=null,e[z_]=null)):Wd(n)}}}function q_(n){return n in Qu?Qu[n]:Qu[n]="on"+n}function lC(n,e){if(n.ba)n=!0;else{e=new po(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&zg(n),n=t.call(r,e)}return n}function qg(n){return(n=n[z_])instanceof vt?n:null}var Wg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kg(n){return"function"==typeof n?n:(n[Wg]||(n[Wg]=function(e){return n.handleEvent(e)}),n[Wg])}function Dr(){nu.call(this),this.i=new vt(this),this.P=this,this.I=null}function ei(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var s=e;uC(e=new ui(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Zg(l,r,!0,e)&&s}if(s=Zg(l=e.g=n,r,!0,e)&&s,s=Zg(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Zg(l=e.g=t[u],r,!1,e)&&s}function Zg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&H_(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Lr(Dr,nu),Dr.prototype[Rf]=!0,Dr.prototype.removeEventListener=function(n,e,t,r){cC(this,n,e,t,r)},Dr.prototype.M=function(){if(Dr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Wd(t[r]);delete n.g[e],n.h--}}this.I=null},Dr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var W_=Ft.JSON.stringify;function Nf(){var n=Kd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qg,ME=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hC,n=>n.reset());class hC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yg(n){Ft.setTimeout(()=>{throw n},0)}function K_(n,e){Qg||function RE(){var n=Ft.Promise.resolve(void 0);Qg=function(){n.then(Pf)}}(),Z_||(Qg(),Z_=!0),Kd.add(n,e)}var Z_=!1,Kd=new class dC{constructor(){this.h=this.g=null}add(e,t){const r=ME.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Pf(){for(var n;n=Nf();){try{n.h.call(n.g)}catch(t){Yg(t)}var e=ME;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Z_=!1}function Xg(n,e){Dr.call(this),this.h=n||1,this.g=e||Ft,this.j=Jr(this.lb,this),this.l=Date.now()}function Y_(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Q_(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function X_(n){n.g=Q_(()=>{n.g=null,n.i&&(n.i=!1,X_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Lr(Xg,Dr),(ct=Xg.prototype).ca=!1,ct.R=null,ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ei(this,"tick"),this.ca&&(Y_(this),this.start()))}},ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Xg.X.M.call(this),Y_(this),delete this.g};class OE extends nu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:X_(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zd(n){nu.call(this),this.h=n,this.g={}}Lr(Zd,nu);var NE=[];function J_(n,e,t,r){Array.isArray(t)||(t&&(NE[0]=t.toString()),t=NE);for(var s=0;s<t.length;s++){var u=xE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function PE(n){AE(n.g,function(e,t){this.g.hasOwnProperty(t)&&zg(e)},n),n.g={}}function Jg(){this.g=!0}function kf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return W_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Zd.prototype.M=function(){Zd.X.M.call(this),PE(this)},Zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jg.prototype.Aa=function(){this.g=!1},Jg.prototype.info=function(){};var Xo={},FE=null;function em(){return FE=FE||new Dr}function ev(n){ui.call(this,Xo.Pa,n)}function ru(n){const e=em();ei(e,new ev(e))}function LE(n,e){ui.call(this,Xo.STAT_EVENT,n),this.stat=e}function Ci(n){const e=em();ei(e,new LE(e,n))}function VE(n,e){ui.call(this,Xo.Qa,n),this.size=e}function Ff(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Xo.Pa="serverreachability",Lr(ev,ui),Xo.STAT_EVENT="statevent",Lr(LE,ui),Xo.Qa="timingevent",Lr(VE,ui);var tv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},UE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function tm(){}function jE(){}tm.prototype.h=null;var rv,iu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function nv(){ui.call(this,"d")}function nm(){ui.call(this,"c")}function Lf(){}function Vf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Zd(this),this.O=fC,this.T=new Xg(n=V_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new iv}function iv(){this.i=null,this.g="",this.h=!1}Lr(nv,ui),Lr(nm,ui),Lr(Lf,tm),Lf.prototype.g=function(){return new XMLHttpRequest},Lf.prototype.i=function(){return{}},rv=new Lf;var fC=45e3,Uf={},rm={};function im(n,e,t){n.K=1,n.v=am(Jo(e)),n.s=t,n.P=!0,sv(n,null)}function sv(n,e){n.F=Date.now(),vl(n),n.A=Jo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),WE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new iv,n.g=lI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new OE(Jr(n.La,n,n.g),n.N)),J_(n.S,n.g,"readystatechange",n.ib),e=n.H?j_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ru(),function HA(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var A=b[0];b=b[1];var O=A.split("_");l=2<=O.length&&"type"==O[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function $E(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function HE(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=pC(n,t),s==rm){4==e&&(n.o=4,Ci(14),r=!1),kf(n.j,n.m,null,"[Incomplete Response]");break}if(s==Uf){n.o=4,Ci(15),kf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kf(n.j,n.m,s,null),ov(n,s)}$E(n)&&s!=rm&&s!=Uf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Iv(e),e.K=!0,Ci(11))):(kf(n.j,n.m,t,"[Invalid Chunked Response]"),wl(n),jf(n))}function pC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rm:(t=Number(e.substring(t,r)),isNaN(t)?Uf:(r+=1)+t>e.length?rm:(e=e.substr(r,t),n.C=r+t,e))}function vl(n){n.V=Date.now()+n.O,GE(n,n.O)}function GE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ff(Jr(n.gb,n),e)}function Bf(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function jf(n){0==n.l.G||n.I||aI(n.l,n)}function wl(n){Bf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Y_(n.T),PE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ov(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||zf(t.h,n)))if(!n.J&&zf(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;os(t),mm(t)}Dl(t),Ci(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ff(Jr(t.cb,t),6e3));if(1>=gv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else go(t,11)}else if((n.J||t.g==n)&&os(t),!Vg(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const O=b[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const B=b[5];null!=B&&"number"==typeof B&&0<B&&(t.J=r=1.5*B,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const Q=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var u=r.h;u.g||-1==Q.indexOf("spdy")&&-1==Q.indexOf("quic")&&-1==Q.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(um(u,u.h),u.h=null))}if(r.D){const Re=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,Pn(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=cI(r,r.H?r.ka:null,r.V),l.J){mv(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(Bf(m),vl(m)),r.g=l}else oI(r);0<t.i.length&&Ev(t)}else"stop"!=b[0]&&"close"!=b[0]||go(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?go(t,7):gm(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}ru()}catch{}}function zE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function mC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Sf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function gC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Sf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ct=Vf.prototype).setTimeout=function(n){this.O=n},ct.ib=function(n){n=n.target;const e=this.L;e&&3==ou(n)?e.l():this.La(n)},ct.La=function(n){try{if(n==this.g)e:{const A=ou(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||V_||this.g&&(this.h.h||this.g.fa()||Qd(this.g)))){this.I||4!=A||7==e||ru(),Bf(this);var t=this.g.aa();this.Y=t;t:if($E(this)){var r=Qd(this.g);n="";var s=r.length,u=4==ou(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wl(this),jf(this);var l="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function GA(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vg(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ci(12),wl(this),jf(this);break e}kf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ov(this,t)}this.P?(HE(this,A,l),V_&&this.i&&3==A&&(J_(this.S,this.T,"tick",this.hb),this.T.start())):(kf(this.j,this.m,l,null),ov(this,l)),4==A&&wl(this),this.i&&!this.I&&(4==A?aI(this.l,this):(this.i=!1,vl(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),wl(this),jf(this)}}}catch{}},ct.hb=function(){if(this.g){var n=ou(this.g),e=this.g.fa();this.C<e.length&&(Bf(this),HE(this,n,e),this.i&&4!=n&&vl(this))}},ct.cancel=function(){this.I=!0,wl(this)},ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function zA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ru(),Ci(17)),wl(this),this.o=2,jf(this)):GE(this,this.V-n)};var qE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xu){this.h=void 0!==e?e:n.h,sm(this,n.j),this.s=n.s,this.g=n.g,om(this,n.m),this.l=n.l,e=n.i;var t=new Hf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),av(this,t),this.o=n.o}else n&&(t=String(n).match(qE))?(this.h=!!e,sm(this,t[1]||"",!0),this.s=$f(t[2]||""),this.g=$f(t[3]||"",!0),om(this,t[4]),this.l=$f(t[5]||"",!0),av(this,t[6]||"",!0),this.o=$f(t[7]||"")):(this.h=!!e,this.i=new Hf(null,this.h))}function Jo(n){return new Xu(n)}function sm(n,e,t){n.j=t?$f(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function om(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function av(n,e,t){e instanceof Hf?(n.i=e,function KE(n,e){e&&!n.j&&(su(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Il(this,r),WE(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=El(e,vC)),n.i=new Hf(e,n.h))}function Pn(n,e,t){n.i.set(e,t)}function am(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $f(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function El(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(El(e,cv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(El(e,cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(El(t,"/"==t.charAt(0)?_C:lv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",El(t,dv)),n.join("")};var cv=/[#\/\?@]/g,lv=/[#\?:]/g,_C=/[#\?]/g,vC=/[#\?@]/g,dv=/#/g;function Hf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function su(n){n.g||(n.g=new Map,n.h=0,n.i&&function yC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Il(n,e){su(n),e=Gf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function hv(n,e){return su(n),e=Gf(n,e),n.g.has(e)}function WE(n,e,t){Il(n,e),0<t.length&&(n.i=null,n.g.set(Gf(n,e),k_(t)),n.h+=t.length)}function Gf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZE(n){this.l=n||pv,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ga&&Ft.g.Ga()&&Ft.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=Hf.prototype).add=function(n,e){su(this),this.i=null,n=Gf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){su(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ct.oa=function(){su(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ct.W=function(n){su(this);let e=[];if("string"==typeof n)hv(this,n)&&(e=e.concat(this.g.get(Gf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return su(this),this.i=null,hv(this,n=Gf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var pv=10;function YE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gv(n){return n.h?1:n.g?n.g.size:0}function zf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function um(n,e){n.g?n.g.add(e):n.h=e}function mv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function yv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return k_(n.i)}function cm(){}function wC(){this.g=new cm}function EC(n,e,t){const r=t||"";try{zE(n,function(s,u){let l=s;_l(s)&&(l=W_(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function lm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Yd(n){this.l=n.ac||null,this.j=n.jb||!1}function _v(n,e){Dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZE.prototype.cancel=function(){if(this.i=yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},cm.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},cm.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Lr(Yd,tm),Yd.prototype.g=function(){return new _v(this.l,this.j)},Yd.prototype.i=function(n){return function(){return n}}({}),Lr(_v,Dr);var dm=0;function QE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function qf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hm(n)}function hm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=_v.prototype).open=function(n,e){if(this.readyState!=dm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hm(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qf(this)),this.readyState=dm},ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hm(this)),this.g&&(this.readyState=3,hm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ft.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qf(this):hm(this),3==this.readyState&&QE(this)}},ct.Va=function(n){this.g&&(this.response=this.responseText=n,qf(this))},ct.Ua=function(n){this.g&&(this.response=n,qf(this))},ct.ga=function(){this.g&&qf(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_v.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DC=Ft.JSON.parse;function er(n){Dr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=XE,this.K=this.L=!1}Lr(er,Dr);var XE="",bC=/^https?$/i,CC=["POST","PUT"];function JE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eI(n),fm(n)}function eI(n){n.D||(n.D=!0,ei(n,"complete"),ei(n,"error"))}function tI(n){if(n.h&&typeof Gd<"u"&&(!n.C[1]||4!=ou(n)||2!=n.aa()))if(n.v&&4==ou(n))Q_(n.Ha,0,n);else if(ei(n,"readystatechange"),4==ou(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(qE)[1]||null;if(!s&&Ft.self&&Ft.self.location){var u=Ft.self.location.protocol;s=u.substr(0,u.length-1)}r=!bC.test(s?s.toLowerCase():"")}t=r}if(t)ei(n,"complete"),ei(n,"success");else{n.m=6;try{var l=2<ou(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",eI(n)}}finally{fm(n)}}}function fm(n,e){if(n.g){nI(n);const t=n.g,r=n.C[0]?Tf:null;n.g=null,n.C=null,e||ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function nI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function ou(n){return n.g?n.g.readyState:0}function Qd(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case XE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function vv(n){let e="";return AE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function pm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=vv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function Xd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wv(n){this.Ca=0,this.i=[],this.j=new Jg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Xd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Xd("baseRetryDelayMs",5e3,n),this.bb=Xd("retryDelaySeedMs",1e4,n),this.$a=Xd("forwardChannelMaxRetries",2,n),this.ta=Xd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ZE(n&&n.concurrentRequestLimit),this.Fa=new wC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function gm(n){if(rI(n),3==n.G){var e=n.U++,t=Jo(n.F);Pn(t,"SID",n.I),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),Wf(n,t),(e=new Vf(n,n.j,e,void 0)).K=2,e.v=am(Jo(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=lI(e.l,null),e.g.da(e.v)),e.F=Date.now(),vl(e)}uI(n)}function mm(n){n.g&&(Iv(n),n.g.cancel(),n.g=null)}function rI(n){mm(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),os(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function Ev(n){YE(n.h)||n.m||(n.m=!0,K_(n.Ja,n),n.C=0)}function iI(n,e){var t;t=e?e.m:n.U++;const r=Jo(n.F);Pn(r,"SID",n.I),Pn(r,"RID",t),Pn(r,"AID",n.T),Wf(n,r),n.o&&n.s&&pm(r,n.o,n.s),t=new Vf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=sI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),um(n.h,t),im(t,r,e)}function Wf(n,e){n.ia&&AE(n.ia,function(t,r){Pn(e,r,t)}),n.l&&zE({},function(t,r){Pn(e,r,t)})}function sI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Jr(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const A=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{EC(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function oI(n){n.g||n.u||(n.Z=1,K_(n.Ia,n),n.A=0)}function Dl(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ff(Jr(n.Ia,n),_m(n,n.A)),n.A++,0))}function Iv(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function ym(n){n.g=new Vf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Jo(n.sa);Pn(e,"RID","rpc"),Pn(e,"SID",n.I),Pn(e,"CI",n.L?"0":"1"),Pn(e,"AID",n.T),Pn(e,"TYPE","xmlhttp"),Wf(n,e),n.o&&n.s&&pm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=am(Jo(e)),t.s=null,t.P=!0,sv(t,n)}function os(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function aI(n,e){var t=null;if(n.g==e){os(n),Iv(n),n.g=null;var r=2}else{if(!zf(n.h,e))return;t=e.D,mv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ei(r=em(),new VE(r,t)),Ev(n)}else oI(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function SC(n,e){return!(gv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ff(Jr(n.Ja,n,e),_m(n,n.C)),n.C++,0)))}(n,e)||2==r&&Dl(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:go(n,5);break;case 4:go(n,10);break;case 3:go(n,6);break;default:go(n,2)}}function _m(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function go(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Jr(n.kb,n);t||(t=new Xu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||sm(t,"https"),am(t)),function IC(n,e){const t=new Jg;if(Ft.Image){const r=new Image;r.onload=xf(lm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=xf(lm,t,r,"TestLoadImage: error",!1,e),r.onabort=xf(lm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=xf(lm,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.G=0,n.l&&n.l.va(e),uI(n),rI(n)}function uI(n){if(n.G=0,n.la=[],n.l){const e=yv(n.h);(0!=e.length||0!=n.i.length)&&(wE(n.la,e),wE(n.la,n.i),n.h.i.length=0,k_(n.i),n.i.length=0),n.l.ua()}}function cI(n,e,t){var r=t instanceof Xu?Jo(t):new Xu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),om(r,r.m);else{var s=Ft.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Xu(null,void 0);r&&sm(u,r),e&&(u.g=e),s&&om(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Pn(r,t,e),Pn(r,"VER",n.ma),Wf(n,r),r}function lI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new er(t&&n.Da&&!n.ra?new Yd({jb:!0}):n.ra)).Ka(n.H),e}function Kf(){}function bl(){if(zd&&!(10<=Number(SE)))throw Error("Environmental error: no available transport.")}function as(n,e){Dr.call(this),this.g=new wv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cl(this)}function dI(n){nv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Dv(){nm.call(this),this.status=1}function Cl(n){this.g=n}(ct=er.prototype).Ka=function(n){this.L=n},ct.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rv.g(),this.C=function BE(n){return n.h||(n.h=n.i())}(this.u?this.u:rv),this.g.onreadystatechange=Jr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void JE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Ft.FormData&&n instanceof Ft.FormData,!(0<=vE(CC,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nI(this),0<this.B&&((this.K=function TC(n){return zd&&function TE(){return function sC(n){var e=CE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=EE(String(Mf)).split("."),t=EE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=F_(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||F_(0==s[2].length,0==u[2].length)||F_(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.qa,this)):this.A=Q_(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){JE(this,u)}},ct.qa=function(){typeof Gd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ei(this,"complete"),ei(this,"abort"),fm(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fm(this,!0)),er.X.M.call(this)},ct.Ha=function(){this.s||(this.F||this.v||this.l?tI(this):this.fb())},ct.fb=function(){tI(this)},ct.aa=function(){try{return 2<ou(this)?this.g.status:-1}catch{return-1}},ct.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),DC(e)}},ct.Ea=function(){return this.m},ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=wv.prototype).ma=8,ct.G=1,ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Vf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=j_(u),uC(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=sI(this,s,e),Pn(t=Jo(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),Wf(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(vv(u)))+"&"+e:this.o&&pm(t,this.o,u)),um(this.h,s),this.Ya&&Pn(t,"TYPE","init"),this.O?(Pn(t,"$req",e),Pn(t,"SID","null"),s.Z=!0,im(s,t,null)):im(s,t,e),this.G=2}}else 3==this.G&&(n?iI(this,n):0==this.i.length||YE(this.h)||iI(this))},ct.Ia=function(){if(this.u=null,ym(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ff(Jr(this.eb,this),n)}},ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ci(10),mm(this),ym(this))},ct.cb=function(){null!=this.v&&(this.v=null,mm(this),Dl(this),Ci(19))},ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ci(2)):(this.j.info("Failed to ping google.com"),Ci(1))},(ct=Kf.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Ra=function(){},bl.prototype.g=function(n,e){return new as(n,e)},Lr(as,Dr),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ci(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=cI(n,null,n.V),Ev(n)},as.prototype.close=function(){gm(this.g)},as.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=W_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ev(e)},as.prototype.M=function(){this.g.l=null,delete this.j,gm(this.g),delete this.g,as.X.M.call(this)},Lr(dI,nv),Lr(Dv,nm),Lr(Cl,Kf),Cl.prototype.xa=function(){ei(this.g,"a")},Cl.prototype.wa=function(n){ei(this.g,new dI(n))},Cl.prototype.va=function(n){ei(this.g,new Dv)},Cl.prototype.ua=function(){ei(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,tv.NO_ERROR=0,tv.TIMEOUT=8,tv.HTTP_ERROR=6,UE.COMPLETE="complete",jE.EventType=iu,iu.OPEN="a",iu.CLOSE="b",iu.ERROR="c",iu.MESSAGE="d",Dr.prototype.listen=Dr.prototype.N,er.prototype.listenOnce=er.prototype.O,er.prototype.getLastError=er.prototype.Oa,er.prototype.getLastErrorCode=er.prototype.Ea,er.prototype.getStatus=er.prototype.aa,er.prototype.getResponseJson=er.prototype.Sa,er.prototype.getResponseText=er.prototype.fa,er.prototype.send=er.prototype.da,er.prototype.setWithCredentials=er.prototype.Ka;var bv=Yo.createWebChannelTransport=function(){return new bl},hI=Yo.getStatEventTarget=function(){return em()},Zf=Yo.ErrorCode=tv,Cv=Yo.EventType=UE,fI=Yo.Event=Xo,vm=Yo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Tv=Yo.FetchXmlHttpFactory=Yd,wm=Yo.WebChannel=jE,AC=Yo.XhrIo=er;const pI="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let Tl="9.17.2";const ea=new Yu.Yd("@firebase/firestore");function Em(){return ea.logLevel}function Oe(n,...e){if(ea.logLevel<=Yu.in.DEBUG){const t=e.map(Im);ea.debug(`Firestore (${Tl}): ${n}`,...t)}}function tr(n,...e){if(ea.logLevel<=Yu.in.ERROR){const t=e.map(Im);ea.error(`Firestore (${Tl}): ${n}`,...t)}}function Sl(n,...e){if(ea.logLevel<=Yu.in.WARN){const t=e.map(Im);ea.warn(`Firestore (${Tl}): ${n}`,...t)}}function Im(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function dt(n,e){n||nt()}function Ke(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vr.UNAUTHENTICATED))}shutdown(){}}class WA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yI{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,he.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new mI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new Vr(e)}}class Sv{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Yf{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new Sv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _I{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Av{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.A=t.token,new _I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function vI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vI(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function Jd(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function Dm(n){return n+"\0"}class Mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pt(e)}static min(){return new pt(new Mn(0,0))}static max(){return new pt(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ju{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ju.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ju?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Ju{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const ZA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends Ju{construct(e,t,r){return new Gn(e,t,r)}static isValidIdentifier(e){return ZA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ie(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ie(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ie(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new Ie(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(t)}static emptyPath(){return new Gn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Jt.fromString(e))}static fromName(e){return new ze(Jt.fromString(e).popFirst(5))}static empty(){return new ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Jt(e.slice()))}}class Qf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function ec(n){return n.fields.find(e=>2===e.kind)}function Al(n){return n.fields.filter(e=>2!==e.kind)}Qf.UNKNOWN_ID=-1;class eh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xf(0,us.min())}}function MC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=pt.fromTimestamp(1e9===r?new Mn(t+1,0):new Mn(t,r));return new us(s,ze.empty(),e)}function II(n){return new us(n.readTime,n.key,-1)}class us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new us(pt.min(),ze.empty(),-1)}static max(){return new us(pt.max(),ze.empty(),-1)}}function xv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const Mv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tc(n){return bm.apply(this,arguments)}function bm(){return bm=(0,he.Z)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==Mv)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),bm.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(s=>s?te.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new te((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>s(A))}})}static doWhile(e,t){return new te((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Cm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new br,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Jf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=Nv(r.target.error);this.v.reject(new Jf(e,s))}}static open(e,t,r,s){try{return new Cm(t,e.transaction(s,r))}catch(u){throw new Jf(t,u)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bI(t)}}class mo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===mo.D((0,rn.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),nc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,rn.hl)())return!1;if(mo.N())return!0;const e=(0,rn.z$)(),t=mo.D(e),r=0<t&&t<10,s=mo.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,he.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new Ie(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ie(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Jf(e,m))},u.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,he.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Cm.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),te.reject(A))).toPromise();return b.catch(()=>{}),yield w.P,b}catch(w){const b=w,A="FirebaseError"!==b.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return nc(this.q.delete())}}class Jf extends Ie{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function au(n){return"IndexedDbTransactionError"===n.name}class bI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nc(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),nc(this.store.add(e))}get(e){return nc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),nc(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),nc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new te((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const s=this.cursor(r);return this.H(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new te((r,s)=>{t.onerror=u=>{const l=Nv(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new te((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new DI(m),b=t(m.primaryKey,m.value,w);if(b instanceof te){const A=b.catch(O=>(w.done(),te.reject(O)));r.push(A)}w.isDone?s():null===w.G?m.continue():m.continue(w.G)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nc(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Nv(r.target.error);t(s)}})}let Ov=!1;function Nv(n){const e=mo.D((0,rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ov||(Ov=!0,setTimeout(()=>{throw r},0)),r}}return n}class RC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,he.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){au(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield tc(r)}yield t.nt(6e4)}))}}class QA{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,he.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return te.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(s,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=II(u);xv(l,r)>0&&(r=l)}),new us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ex{constructor(e,t,r,s,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class xl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xl&&e.projectId===this.projectId&&e.database===this.database}}function OC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function th(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rc(n){return null==n}function Tm(n){return 0===n&&1/n==-1/0}function Pv(n){return"number"==typeof n&&Number.isInteger(n)&&!Tm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Sm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw s instanceof DOMException?new Sm("Invalid base64 string: "+s):s}}(e);return new hr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new hr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hr.EMPTY_BYTE_STRING=new hr("");const tx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(n){if(dt(!!n),"string"==typeof n){let e=0;const t=tx.exec(n);if(dt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ml(n){return"string"==typeof n?hr.fromBase64String(n):hr.fromUint8Array(n)}function Am(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PC(n){const e=n.mapValue.fields.__previous_value__;return Am(e)?PC(e):e}function xm(n){const e=ta(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}const ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mm={nullValue:"NULL_VALUE"};function na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Am(n)?4:AI(n)?9007199254740991:10:nt()}function ra(n,e){if(n===e)return!0;const t=na(n);if(t!==na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xm(n).isEqual(xm(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ta(r.timestampValue),l=ta(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ml(n.bytesValue).isEqual(Ml(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return zn(r.geoPointValue.latitude)===zn(s.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return zn(r.integerValue)===zn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=zn(r.doubleValue),l=zn(s.doubleValue);return u===l?Tm(u)===Tm(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Jd(n.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(OC(u)!==OC(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!ra(u[m],l[m])))return!1;return!0}(n,e);default:return nt()}var s}function Rm(n,e){return void 0!==(n.values||[]).find(t=>ra(t,e))}function Rl(n,e){if(n===e)return 0;const t=na(n),r=na(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=zn(s.integerValue||s.doubleValue),m=zn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return kC(n.timestampValue,e.timestampValue);case 4:return kC(xm(n),xm(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ml(s),m=Ml(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Lt(l[w],m[w]);if(0!==b)return b}return Lt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Lt(zn(s.latitude),zn(u.latitude));return 0!==l?l:Lt(zn(s.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=Rl(l[w],m[w]);if(b)return b}return Lt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===ic.mapValue&&u===ic.mapValue)return 0;if(s===ic.mapValue)return 1;if(u===ic.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const O=Lt(m[A],b[A]);if(0!==O)return O;const B=Rl(l[m[A]],w[b[A]]);if(0!==B)return B}return Lt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function kC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=ta(n),r=ta(e),s=Lt(t.seconds,r.seconds);return 0!==s?s:Lt(t.nanos,r.nanos)}function nh(n){return kv(n)}function kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ta(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ml(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=kv(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${kv(r.fields[m])}`;return u+"}"}(n.mapValue):nt();var e}function Ol(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function SI(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function Fv(n){return!!n&&"nullValue"in n}function Lv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vv(n){return!!n&&"mapValue"in n}function Ti(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return th(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ti(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ti(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uv(n){return"nullValue"in n?Mm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ol(xl.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function FC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ol(xl.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ic:nt()}function LC(n,e){const t=Rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function cs(n,e){const t=Rl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class sc{constructor(e,t){this.position=e,this.inclusive=t}}function Om(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):Rl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function xI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ra(n.position[t],e.position[t]))return!1;return!0}class MI{}class qt extends MI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new oc(e,t,r):"array-contains"===t?new VC(e,r):"in"===t?new UC(e,r):"not-in"===t?new BC(e,r):"array-contains-any"===t?new jC(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new OI(e,r):new Gv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rl(t,this.value)):null!==t&&na(this.value)===na(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ln extends MI{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new ln(e,t)}matches(e){return Nl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Nl(n){return"and"===n.op}function Bv(n){return"or"===n.op}function Nm(n){return jv(n)&&Nl(n)}function jv(n){for(const e of n.filters)if(e instanceof ln)return!1;return!0}function $v(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+nh(n.value);if(Nm(n))return n.filters.map(e=>$v(e)).join(",");{const e=n.filters.map(t=>$v(t)).join(",");return`${n.op}(${e})`}}function Hv(n,e){return n instanceof qt?(t=n,(r=e)instanceof qt&&t.op===r.op&&t.field.isEqual(r.field)&&ra(t.value,r.value)):n instanceof ln?function(t,r){return r instanceof ln&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&Hv(u,r.filters[l]),!0)}(n,e):void nt();var t,r}function RI(n,e){const t=n.filters.concat(e);return ln.create(t,n.op)}function Pm(n){return n instanceof qt?`${(e=n).field.canonicalString()} ${e.op} ${nh(e.value)}`:n instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(Pm).join(" ,")+"}"}(n):"Filter";var e}class oc extends qt{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class OI extends qt{constructor(e,t){super(e,"in",t),this.keys=ia(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Gv extends qt{constructor(e,t){super(e,"not-in",t),this.keys=ia(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ia(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class VC extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&Rm(t.arrayValue,this.value)}}class UC extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rm(this.value.arrayValue,t)}}class BC extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rm(this.value.arrayValue,t)}}class jC extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rm(this.value.arrayValue,r))}}class rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function $C(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qn{constructor(e,t){this.comparator=e,this.root=t||Ur.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zv(this.root,e,this.comparator,!1)}getReverseIterator(){return new zv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zv(this.root,e,this.comparator,!0)}}class zv{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ur.RED,this.left=s??Ur.EMPTY,this.right=u??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ur(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ur.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(e){return new qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tp(n){return n.hasNext()?n.getNext():void 0}class ci{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new ci([])}unionWith(e){let t=new yn(Gn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ti(t)}setAll(e){let t=Gn.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Ti(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Vv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Vv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){th(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Cr(Ti(this.value))}}function Wv(n){const e=[];return th(n.fields,(t,r)=>{const s=new Gn([t]);if(Vv(r)){const u=Wv(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new ci(e)}class Tn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Tn(e,0,pt.min(),pt.min(),pt.min(),Cr.empty(),0)}static newFoundDocument(e,t,r,s){return new Tn(e,1,t,pt.min(),r,s,0)}static newNoDocument(e,t){return new Tn(e,2,t,pt.min(),pt.min(),Cr.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,pt.min(),pt.min(),Cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class NI{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this._t=null}}function km(n,e=null,t=[],r=[],s=null,u=null,l=null){return new NI(n,e,t,r,s,u,l)}function sa(n){const e=Ke(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$v(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),rc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nh(r)).join(",")),e._t=t}return e._t}function ac(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$C(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xI(n.startAt,e.startAt)&&xI(n.endAt,e.endAt)}function np(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fm(n,e){return n.filters.filter(t=>t instanceof qt&&t.field.isEqual(e))}function PI(n,e,t){let r=Mm,s=!0;for(const u of Fm(n,e)){let l=Mm,m=!0;switch(u.op){case"<":case"<=":l=Uv(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Mm}LC({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];LC({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function HC(n,e,t){let r=ic,s=!0;for(const u of Fm(n,e)){let l=ic,m=!0;switch(u.op){case">=":case">":l=FC(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=ic}cs({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];cs({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class uc{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this.gt=null}}function GC(n,e,t,r,s,u,l,m){return new uc(n,e,t,r,s,u,l,m)}function Pl(n){return new uc(n)}function kI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Kv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Lm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function FI(n){return null!==n.collectionGroup}function ih(n){const e=Ke(n);if(null===e.wt){e.wt=[];const t=Lm(e),r=Kv(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new rh(t)),e.wt.push(new rh(Gn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new rh(Gn.keyField(),u))}}}return e.wt}function $i(n){const e=Ke(n);if(!e.gt)if("F"===e.limitType)e.gt=km(e.path,e.collectionGroup,ih(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ih(e))t.push(new rh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new sc(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new sc(e.startAt.position,e.startAt.inclusive):null;e.gt=km(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.gt}function LI(n,e){e.getFirstInequalityField(),Lm(n);const t=n.filters.concat([e]);return new uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zv(n,e,t){return new uc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rp(n,e){return ac($i(n),$i(e))&&n.limitType===e.limitType}function ip(n){return`${sa($i(n))}|lt:${n.limitType}`}function Yv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Pm(r)).join(", ")}]`),rc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nh(r)).join(",")),`Target(${t})`}($i(n))}; limitType=${n.limitType})`}function sp(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of ih(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=Om(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,ih(t),r)||t.endAt&&!function(s,u,l){const m=Om(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,ih(t),r)));var t,r}function Qv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cc(n){return(e,t)=>{let r=!1;for(const s of ih(n)){const u=VI(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function VI(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?Rl(m,w):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Vm(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tm(e)?"-0":e}}function Um(n){return{integerValue:""+n}}function UI(n,e){return Pv(e)?Um(e):Vm(n,e)}class sh{constructor(){this._=void 0}}function Xv(n,e,t){return n instanceof op?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof oh?qC(n,e):n instanceof lc?BI(n,e):function(r,s){const u=zC(r,s),l=jI(u)+jI(r.It);return SI(u)&&SI(r.It)?Um(l):Vm(r.Tt,l)}(n,e)}function Bm(n,e,t){return n instanceof oh?qC(n,e):n instanceof lc?BI(n,e):t}function zC(n,e){return n instanceof ah?SI(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class op extends sh{}class oh extends sh{constructor(e){super(),this.elements=e}}function qC(n,e){const t=$I(e);for(const r of n.elements)t.some(s=>ra(s,r))||t.push(r);return{arrayValue:{values:t}}}class lc extends sh{constructor(e){super(),this.elements=e}}function BI(n,e){let t=$I(e);for(const r of n.elements)t=t.filter(s=>!ra(s,r));return{arrayValue:{values:t}}}class ah extends sh{constructor(e,t){super(),this.Tt=e,this.It=t}}function jI(n){return zn(n.integerValue||n.doubleValue)}function $I(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uh{constructor(e,t){this.field=e,this.transform=t}}class GI{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ap{}function $m(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new dh(n.key,kn.none()):new lh(n.key,n.data,kn.none());{const t=n.data,r=Cr.empty();let s=new yn(Gn.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new dc(n.key,r,new ci(s.toArray()),kn.none())}}function nx(n,e,t){n instanceof lh?function(r,s,u){const l=r.value.clone(),m=qI(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof dc?function(r,s,u){if(!jm(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=qI(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(WC(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ch(n,e,t,r){return n instanceof lh?function(s,u,l,m){if(!jm(s.precondition,u))return l;const w=s.value.clone(),b=WI(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof dc?function(s,u,l,m){if(!jm(s.precondition,u))return l;const w=WI(s.fieldTransforms,m,u),b=u.data;return b.setAll(WC(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,jm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Jv(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=zC(r.transform,s||null);null!=u&&(null===t&&(t=Cr.empty()),t.set(r.field,u))}return t||null}function zI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Jd(t,r,(s,u)=>function HI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof oh&&r instanceof oh||t instanceof lc&&r instanceof lc?Jd(t.elements,r.elements,ra):t instanceof ah&&r instanceof ah?ra(t.It,r.It):t instanceof op&&r instanceof op);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class lh extends ap{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dc extends ap{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function WC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function qI(n,e,t){const r=new Map;dt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,Bm(l,m,t[s]))}return r}function WI(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,Xv(u,l,e))}return r}class dh extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KI extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rx{constructor(e){this.count=e}}var Tr,sn;function KC(n){switch(n){default:return nt();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function ZI(n){if(void 0===n)return tr("GRPC error has no .code"),J.UNKNOWN;switch(n){case Tr.OK:return J.OK;case Tr.CANCELLED:return J.CANCELLED;case Tr.UNKNOWN:return J.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return J.INTERNAL;case Tr.UNAVAILABLE:return J.UNAVAILABLE;case Tr.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Tr.NOT_FOUND:return J.NOT_FOUND;case Tr.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Tr.ABORTED:return J.ABORTED;case Tr.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Tr.DATA_LOSS:return J.DATA_LOSS;default:return nt()}}(sn=Tr||(Tr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";class kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){th(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return NC(this.inner)}size(){return this.innerSize}}const ix=new qn(ze.comparator);function ls(){return ix}const ZC=new qn(ze.comparator);function Hm(...n){let e=ZC;for(const t of n)e=e.insert(t.key,t);return e}function YC(n){let e=ZC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function i(){return a()}function o(){return a()}function a(){return new kl(n=>n.toString(),(n,e)=>n.isEqual(e))}const c=new qn(ze.comparator),d=new yn(ze.comparator);function p(...n){let e=d;for(const t of n)e=e.add(t);return e}const _=new yn(Lt);function E(){return _}class I{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,T.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new I(pt.min(),s,E(),ls(),p())}}class T{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new T(r,t,p(),p(),p())}}class M{constructor(e,t,r,s){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=s}}class k{constructor(e,t){this.targetId=e,this.Rt=t}}class H{constructor(e,t,r=hr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Z{constructor(){this.bt=0,this.vt=qe(),this.Pt=hr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=p(),t=p(),r=p();return this.vt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:nt()}}),new T(this.Pt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=qe()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class fe{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=ls(),this.Kt=Fe(),this.Gt=new yn(Lt)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,s)=>{this.Jt(s)&&t(s)})}Zt(e){const t=e.targetId,r=e.Rt.count,s=this.Xt(t);if(s){const u=s.target;if(np(u))if(0===r){const l=new ze(u.path);this.zt(t,l,Tn.newNoDocument(l,pt.min()))}else dt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&np(m.target)){const w=new ze(m.target.path);null!==this.Ut.get(w)||this.ne(l,w)||this.zt(l,w,Tn.newNoDocument(w,e))}u.Ct&&(t.set(l,u.Nt()),u.kt())}});let r=p();this.Kt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const s=new I(e,t,this.Gt,this.Ut,r);return this.Ut=ls(),this.Kt=Fe(),this.Gt=new yn(Lt),s}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const s=this.Ht(e);this.ne(e,t)?s.Ot(t,1):s.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new Z,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new yn(Lt),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Z),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Fe(){return new qn(ze.comparator)}function qe(){return new qn(ze.comparator)}const st={asc:"ASCENDING",desc:"DESCENDING"},Tt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ae={and:"AND",or:"OR"};class Vt{constructor(e,t){this.databaseId=e,this.yt=t}}function hn(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nr(n,e){return n.yt?e.toBase64():e.toUint8Array()}function sx(n,e){return hn(n,e.toTimestamp())}function Sr(n){return dt(!!n),pt.fromTimestamp(function(e){const t=ta(e);return new Mn(t.seconds,t.nanos)}(n))}function QC(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ox(n){const e=Jt.fromString(n);return dt(gx(e)),e}function e0(n,e){return QC(n.databaseId,e.path)}function hc(n,e){const t=ox(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(ux(t))}function XC(n,e){return QC(n.databaseId,e)}function ax(n){const e=ox(n);return 4===e.length?Jt.emptyPath():ux(e)}function t0(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ux(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cx(n,e,t){return{name:e0(n,e),fields:t.value.mapValue.fields}}function lx(n,e,t){const r=hc(n,e.name),s=Sr(e.updateTime),u=e.createTime?Sr(e.createTime):pt.min(),l=new Cr({mapValue:{fields:e.fields}}),m=Tn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function n0(n,e){let t;if(e instanceof lh)t={update:cx(n,e.key,e.value)};else if(e instanceof dh)t={delete:e0(n,e.key)};else if(e instanceof dc)t={update:cx(n,e.key,e.data),updateMask:EO(e.fieldMask)};else{if(!(e instanceof KI))return nt();t={verify:e0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof op)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof oh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ah)return{fieldPath:u.field.canonicalString(),increment:l.It};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:sx(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:nt()),t;var s}function JC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?kn.updateTime(Sr(s.updateTime)):void 0!==s.exists?kn.exists(s.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),m=new op):"appendMissingElements"in l?m=new oh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new lc(l.removeAllFromArray.values||[]):"increment"in l?m=new ah(u,l.increment):nt();const w=Gn.fromServerFormat(l.fieldPath);return new uh(w,m)}(n,s)):[];var s;if(e.update){const s=hc(n,e.update.name),u=new Cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ci((e.updateMask.fieldPaths||[]).map(b=>Gn.fromServerFormat(b)));return new dc(s,u,l,t,r)}return new lh(s,u,t,r)}if(e.delete){const s=hc(n,e.delete);return new dh(s,t)}if(e.verify){const s=hc(n,e.verify);return new KI(s,t)}return nt()}function dx(n,e){return{documents:[XC(n,e.path)]}}function eT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=XC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=XC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return px(ln.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:hh((A=b).field),direction:_O(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.yt||rc(b)?b:{value:b});var b,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function hx(n){let e=ax(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){dt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const O=fx(A);return O instanceof ln&&Nm(O)?O.getFilters():[O]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new rh(Gm((O=A).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let m=null;t.limit&&(m=function(A){let O;return O="object"==typeof A?A.value:A,rc(O)?null:O}(t.limit));let w=null;var A;t.startAt&&(w=new sc((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new sc(A.values||[],!A.before)}(t.endAt)),GC(e,s,l,u,m,"F",w,b)}function fx(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gm(e.unaryFilter.field);return qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Gm(e.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gm(e.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gm(e.unaryFilter.field);return qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?qt.create(Gm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ln.create(e.compositeFilter.filters.map(t=>fx(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt();var e}function _O(n){return st[n]}function vO(n){return Tt[n]}function wO(n){return Ae[n]}function hh(n){return{fieldPath:n.canonicalString()}}function Gm(n){return Gn.fromServerFormat(n.fieldPath)}function px(n){return n instanceof qt?function(e){if("=="===e.op){if(Lv(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NAN"}};if(Fv(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lv(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NAN"}};if(Fv(e.value))return{unaryFilter:{field:hh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hh(e.field),op:vO(e.op),value:e.value}}}(n):n instanceof ln?function(e){const t=e.getFilters().map(r=>px(r));return 1===t.length?t[0]:{compositeFilter:{op:wO(e.op),filters:t}}}(n):nt()}function EO(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ds(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mx(e)),e=IO(n.get(t),e);return mx(e)}function IO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function mx(n){return n+"\x01\x01"}function fc(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:nt()}u=l+2}return new Jt(r)}const yx=["userId","batchId"];function YI(n,e){return[n,ds(e)]}function _x(n,e,t){return[n,ds(e),t]}const DO={},bO=["prefixPath","collectionGroup","readTime","documentId"],CO=["prefixPath","collectionGroup","documentId"],TO=["collectionGroup","readTime","prefixPath","documentId"],SO=["canonicalId","targetId"],AO=["targetId","path"],xO=["path","targetId"],MO=["collectionId","parent"],RO=["indexId","uid"],OO=["uid","sequenceNumber"],NO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],PO=["indexId","uid","orderedDocumentKey"],kO=["userId","collectionPath","documentId"],FO=["userId","collectionPath","largestBatchId"],LO=["userId","collectionGroup","largestBatchId"],vx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VO=[...vx,"documentOverlays"],wx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ex=wx,UO=[...Ex,"indexConfiguration","indexState","indexEntries"];class tT extends Rv{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function li(n,e){const t=Ke(n);return mo.M(t.re,e)}class nT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&nx(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=o();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=$m(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),p())}isEqual(e){return this.batchId===e.batchId&&Jd(this.mutations,e.mutations,(t,r)=>zI(t,r))&&Jd(this.baseMutations,e.baseMutations,(t,r)=>zI(t,r))}}class rT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){dt(e.mutations.length===r.length);let s=c;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new rT(e,t,r,s)}}class iT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fh{constructor(e,t,r,s,u=pt.min(),l=pt.min(),m=hr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new fh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ix{constructor(e){this.oe=e}}function Dx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:e0(s=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:hn(s,u.version.toTimestamp()),createTime:hn(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:up(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:up(e.version)}}var s,u;return r}function QI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function up(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cp(n){const e=new Mn(n.seconds,n.nanoseconds);return pt.fromTimestamp(e)}function lp(n,e){const t=(e.baseMutations||[]).map(u=>JC(n.oe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>JC(n.oe,u)),s=Mn.fromMillis(e.localWriteTimeMs);return new nT(e.batchId,s,t,r)}function r0(n){const e=cp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cp(n.lastLimboFreeSnapshotVersion):pt.min();let r;var s;return void 0!==n.query.documents?(dt(1===(s=n.query).documents.length),r=$i(Pl(ax(s.documents[0])))):r=$i(hx(n.query)),new fh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hr.fromBase64String(n.resumeToken))}function bx(n,e){const t=up(e.snapshotVersion),r=up(e.lastLimboFreeSnapshotVersion);let s;s=np(e.target)?dx(n.oe,e.target):eT(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sa(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function sT(n){const e=hx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zv(e,e.limit,"L"):e}function oT(n,e){return new iT(e.largestBatchId,JC(n.oe,e.overlayMutation))}function Cx(n,e){const t=e.path.lastSegment();return[n,ds(e.path.popLast()),t]}function Tx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:up(r.readTime),documentKey:ds(r.documentKey.path),largestBatchId:r.largestBatchId}}class jO{getBundleMetadata(e,t){return Sx(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:cp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Sx(e).put({bundleId:(r=t).id,createTime:up(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ax(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:sT(s.bundledQuery),readTime:cp(s.readTime)};var s})}saveNamedQuery(e,t){return Ax(e).put({name:(r=t).name,readTime:up(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Sx(n){return li(n,"bundles")}function Ax(n){return li(n,"namedQueries")}class XI{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new XI(e,t.uid||"")}getOverlay(e,t){return s0(e).get(Cx(this.userId,t)).next(r=>r?oT(this.Tt,r):null)}getOverlays(e,t){const r=i();return te.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new iT(t,l);s.push(this.ce(e,m))}),te.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(ds(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(s0(e).Y("collectionPathOverlayIndex",m))}),te.waitFor(u)}getOverlaysForCollection(e,t,r){const s=i(),u=ds(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return s0(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=oT(this.Tt,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=i();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return s0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,A)=>{const O=oT(this.Tt,b);u.size()<s||O.largestBatchId===l?(u.set(O.getKey(),O),l=O.largestBatchId):A.done()}).next(()=>u)}ce(e,t){return s0(e).put(function(r,s,u){const[l,m,w]=Cx(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:n0(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function s0(n){return li(n,"documentOverlays")}class dp{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),Tm(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Ml(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?AI(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):nt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const s of Object.keys(r))this.we(s,t),this.he(r[s],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const s of r)this.he(s,t)}ye(e,t){this.fe(t,37),ze.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function $O(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function xx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=$O(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}dp.Ee=new dp;class HO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const s=t.codePointAt(0);this.Re(240|s>>>18),this.Re(128|63&s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s)}}this.be()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.Ve()}Ce(e){const t=this.xe(e),r=xx(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}ke(e){const t=this.xe(e),r=xx(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class GO{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class zO{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class o0{constructor(){this.Le=new HO,this.qe=new GO(this.Le),this.Ue=new zO(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class hp{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hp(this.indexId,this.documentKey,this.arrayValue,r)}}function ph(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Mx(n.arrayValue,e.arrayValue),0!==t?t:(t=Mx(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function Mx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class qO{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){dt(e.collectionGroup===this.collectionId);const t=ec(e);if(void 0!==t&&!this.He(t))return!1;const r=Al(e);let s=0,u=0;for(;s<r.length&&this.He(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.ze){const l=r[s];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[u++],l))return!1;++s}for(;s<r.length;++s)if(u>=this.Qe.length||!this.Ye(this.Qe[u++],r[s]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Rx(n){var e,t;if(dt(n instanceof qt||n instanceof ln),n instanceof qt){if(n instanceof UC){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>qt.create(n.field,"==",u)))||[];return ln.create(s,"or")}return n}const r=n.filters.map(s=>Rx(s));return ln.create(r,n.op)}function WO(n){if(0===n.getFilters().length)return[];const e=cT(Rx(n));return dt(Ox(e)),aT(e)||uT(e)?[e]:e.getFilters()}function aT(n){return n instanceof qt}function uT(n){return n instanceof ln&&Nm(n)}function Ox(n){return aT(n)||uT(n)||function(e){if(e instanceof ln&&Bv(e)){for(const t of e.getFilters())if(!aT(t)&&!uT(t))return!1;return!0}return!1}(n)}function cT(n){if(dt(n instanceof qt||n instanceof ln),n instanceof qt)return n;if(1===n.filters.length)return cT(n.filters[0]);const e=n.filters.map(r=>cT(r));let t=ln.create(e,n.op);return t=JI(t),Ox(t)?t:(dt(t instanceof ln),dt(Nl(t)),dt(t.filters.length>1),t.filters.reduce((r,s)=>lT(r,s)))}function lT(n,e){let t;return dt(n instanceof qt||n instanceof ln),dt(e instanceof qt||e instanceof ln),t=n instanceof qt?e instanceof qt?ln.create([n,e],"and"):Nx(n,e):e instanceof qt?Nx(e,n):function(r,s){if(dt(r.filters.length>0&&s.filters.length>0),Nl(r)&&Nl(s))return RI(r,s.getFilters());const u=Bv(r)?r:s,l=Bv(r)?s:r,m=u.filters.map(w=>lT(w,l));return ln.create(m,"or")}(n,e),JI(t)}function Nx(n,e){if(Nl(e))return RI(e,n.getFilters());{const t=e.filters.map(r=>lT(n,r));return ln.create(t,"or")}}function JI(n){if(dt(n instanceof qt||n instanceof ln),n instanceof qt)return n;const e=n.getFilters();if(1===e.length)return JI(e[0]);if(jv(n))return n;const t=e.map(s=>JI(s)),r=[];return t.forEach(s=>{s instanceof qt?r.push(s):s instanceof ln&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:ln.create(r,n.op)}class KO{constructor(){this.Ze=new dT}addToCollectionParentIndex(e,t){return this.Ze.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(us.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class dT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new yn(Jt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new yn(Jt.comparator)).toArray()}}const eD=new Uint8Array(0);class ZO{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new dT,this.tn=new kl(r=>sa(r),(r,s)=>ac(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ds(s)};return Px(e).put(u)}return te.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[Dm(t),""],!1,!0);return Px(e).W(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(fc(l.parent))}return r})}addFieldIndex(e,t){const r=tD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=u0(e);return u.next(m=>{l.put(Tx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=tD(e),s=u0(e),u=a0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=a0(e);let s=!0;const u=new Map;return te.forEach(this.en(t),l=>this.nn(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=p();const m=[];return te.forEach(u,(w,b)=>{var A;Oe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(zt=>`${zt.fieldPath}:${zt.kind}`).join(",")}`} to execute ${sa(t)}`);const O=function(zt,Gt){const Wt=ec(Gt);if(void 0===Wt)return null;for(const en of Fm(zt,Wt.fieldPath))switch(en.op){case"array-contains-any":return en.value.arrayValue.values||[];case"array-contains":return[en.value]}return null}(b,w),B=function(zt,Gt){const Wt=new Map;for(const en of Al(Gt))for(const xi of Fm(zt,en.fieldPath))switch(xi.op){case"==":case"in":Wt.set(en.fieldPath.canonicalString(),xi.value);break;case"not-in":case"!=":return Wt.set(en.fieldPath.canonicalString(),xi.value),Array.from(Wt.values())}return null}(b,w),K=function(zt,Gt){const Wt=[];let en=!0;for(const xi of Al(Gt)){const F0=0===xi.kind?PI(zt,xi.fieldPath,zt.startAt):HC(zt,xi.fieldPath,zt.startAt);Wt.push(F0.value),en&&(en=F0.inclusive)}return new sc(Wt,en)}(b,w),Q=function(zt,Gt){const Wt=[];let en=!0;for(const xi of Al(Gt)){const F0=0===xi.kind?HC(zt,xi.fieldPath,zt.endAt):PI(zt,xi.fieldPath,zt.endAt);Wt.push(F0.value),en&&(en=F0.inclusive)}return new sc(Wt,en)}(b,w),Re=this.sn(w,b,K),je=this.sn(w,b,Q),bt=this.rn(w,b,B),$t=this.on(w.indexId,O,Re,K.inclusive,je,Q.inclusive,bt);return te.forEach($t,zt=>r.J(zt,t.limit).next(Gt=>{Gt.forEach(Wt=>{const en=ze.fromSegments(Wt.documentKey);l.has(en)||(l=l.add(en),m.push(en))})}))}).next(()=>m)}return te.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:WO(ln.create(e.filters,"and")).map(r=>km(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let O=0;O<w;++O){const B=t?this.un(t[O/b]):eD,K=this.cn(e,B,r[O%b],s),Q=this.an(e,B,u[O%b],l),Re=m.map(je=>this.cn(e,B,je,!0));A.push(...this.createRange(K,Q,Re))}return A}cn(e,t,r,s){const u=new hp(e,ze.empty(),t,r);return s?u:u.Ge()}an(e,t,r,s){const u=new hp(e,ze.empty(),t,r);return s?u.Ge():u}nn(e,t){const r=new qO(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.en(t);return te.forEach(s,u=>this.nn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new yn(Gn.comparator),b=!1;for(const A of m.filters)for(const O of A.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:w=w.add(O.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}hn(e,t){const r=new o0;for(const s of Al(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.Ke(s.kind);dp.Ee.ae(u,l)}return r.Be()}un(e){const t=new o0;return dp.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new o0;return dp.Ee.ae(Ol(this.databaseId,t),r.Ke(function(s){const u=Al(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let s=[];s.push(new o0);let u=0;for(const l of Al(e)){const m=r[u++];for(const w of s)if(this.fn(t,l.fieldPath)&&ep(m))s=this.dn(s,l,m);else{const b=w.Ke(l.kind);dp.Ee.ae(m,b)}}return this._n(s)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new o0;w.seed(m.Be()),dp.Ee.ae(l,w.Ke(t.kind)),u.push(w)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tD(e),s=u0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return te.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,A){const O=A?new Xf(A.sequenceNumber,new us(cp(A.readTime),new ze(fc(A.documentKey)),A.largestBatchId)):Xf.empty(),B=b.fields.map(([K,Q])=>new eh(Gn.fromServerFormat(K),Q));return new Qf(b.indexId,b.collectionGroup,B,O)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=tD(e),u=u0(e);return this.wn(e).next(l=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>te.forEach(m,w=>u.put(Tx(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),te.forEach(m,w=>this.mn(e,s,w).next(b=>{const A=this.gn(u,w);return b.isEqual(A)?te.resolve():this.yn(e,u,w,b,A)}))))})}pn(e,t,r,s){return a0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,s){return a0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const s=a0(e);let u=new yn(ph);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,m)=>{u=u.add(new hp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}gn(e,t){let r=new yn(ph);const s=this.hn(t,e);if(null==s)return r;const u=ec(t);if(null!=u){const l=e.data.field(u.fieldPath);if(ep(l))for(const m of l.arrayValue.values||[])r=r.add(new hp(t.indexId,e.key,this.un(m),s))}else r=r.add(new hp(t.indexId,e.key,eD,s));return r}yn(e,t,r,s,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,A,O){const B=m.getIterator(),K=w.getIterator();let Q=tp(B),Re=tp(K);for(;Q||Re;){let je=!1,bt=!1;if(Q&&Re){const $t=b(Q,Re);$t<0?bt=!0:$t>0&&(je=!0)}else null!=Q?bt=!0:je=!0;je?(A(Re),Re=tp(K)):bt?(O(Q),Q=tp(B)):(Q=tp(B),Re=tp(K))}}(s,u,ph,m=>{l.push(this.pn(e,t,r,m))},m=>{l.push(this.In(e,t,r,m))}),te.waitFor(l)}wn(e){let t=1;return u0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>ph(l,m)).filter((l,m,w)=>!m||0!==ph(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=ph(l,e),w=ph(l,t);if(0===m)s[0]=e.Ge();else if(m>0&&w<0)s.push(l),s.push(l.Ge());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.Tn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,eD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,eD,[]]))}return u}Tn(e,t){return ph(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kx)}getMinOffset(e,t){return te.mapArray(this.en(t),r=>this.nn(e,r).next(s=>s||nt())).next(kx)}}function Px(n){return li(n,"collectionParents")}function a0(n){return li(n,"indexEntries")}function tD(n){return li(n,"indexConfiguration")}function u0(n){return li(n,"indexState")}function kx(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;xv(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new us(e.readTime,e.documentKey,t)}const Fx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lx(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(A,O,B)=>(m++,B.delete()));u.push(w.next(()=>{dt(1===m)}));const b=[];for(const A of t.mutations){const O=_x(e,A.key.path,t.batchId);u.push(s.delete(O)),b.push(A.key)}return te.waitFor(u).next(()=>b)}function nD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class rD{constructor(e,t,r,s){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=s,this.En={}}static ue(e,t,r,s){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=zm(e),l=gh(e);return l.add({}).next(m=>{dt("number"==typeof m);const w=new nT(m,t,r,s),b=function(B,K,Q){const Re=Q.baseMutations.map(bt=>n0(B.oe,bt)),je=Q.mutations.map(bt=>n0(B.oe,bt));return{userId:K,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:Re,mutations:je}}(this.Tt,this.userId,w),A=[];let O=new yn((B,K)=>Lt(B.canonicalString(),K.canonicalString()));for(const B of s){const K=_x(this.userId,B.key.path,m);O=O.add(B.key.path.popLast()),A.push(l.put(b)),A.push(u.put(K,DO))}return O.forEach(B=>{A.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.En[m]=w.keys()}),te.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return gh(e).get(t).next(r=>r?(dt(r.userId===this.userId),lp(this.Tt,r)):null)}An(e,t){return this.En[t]?te.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.En[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return gh(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(dt(m.batchId>=r),u=lp(this.Tt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).W("userMutationsIndex",t).next(r=>r.map(s=>lp(this.Tt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=YI(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return zm(e).X({range:s},(l,m,w)=>{const[b,A,O]=l,B=fc(A);if(b===this.userId&&t.path.isEqual(B))return gh(e).get(O).next(K=>{if(!K)throw nt();dt(K.userId===this.userId),u.push(lp(this.Tt,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Lt);const s=[];return t.forEach(u=>{const l=YI(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=zm(e).X({range:m},(b,A,O)=>{const[B,K,Q]=b,Re=fc(K);B===this.userId&&u.path.isEqual(Re)?r=r.add(Q):O.done()});s.push(w)}),te.waitFor(s).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=YI(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new yn(Lt);return zm(e).X({range:l},(w,b,A)=>{const[O,B,K]=w,Q=fc(B);O===this.userId&&r.isPrefixOf(Q)?Q.length===s&&(m=m.add(K)):A.done()}).next(()=>this.Rn(e,m))}Rn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(gh(e).get(u).next(l=>{if(null===l)throw nt();dt(l.userId===this.userId),r.push(lp(this.Tt,l))}))}),te.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Lx(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),te.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return zm(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=fc(u[1]);s.push(w)}else m.done()}).next(()=>{dt(0===s.length)})})}containsKey(e,t){return Vx(e,this.userId,t)}vn(e){return Ux(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vx(n,e,t){const r=YI(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return zm(n).X({range:u,Z:!0},(m,w,b)=>{const[A,O,B]=m;A===e&&O===s&&(l=!0),b.done()}).next(()=>l)}function gh(n){return li(n,"mutations")}function zm(n){return li(n,"documentMutations")}function Ux(n){return li(n,"mutationQueues")}class fp{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new fp(0)}static Sn(){return new fp(-1)}}class YO{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new fp(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>pt.fromTimestamp(new Mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Cn(e,s)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qm(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return qm(e).X((l,m)=>{const w=r0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>te.waitFor(u)).next(()=>s)}forEachTarget(e,t){return qm(e).X((r,s)=>{const u=r0(s);t(u)})}Dn(e){return Bx(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}Cn(e,t){return Bx(e).put("targetGlobalKey",t)}xn(e,t){return qm(e).put(bx(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sa(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return qm(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=r0(m);ac(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=mh(e);return t.forEach(l=>{const m=ds(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(s)}removeMatchingKeys(e,t,r){const s=mh(e);return te.forEach(t,u=>{const l=ds(u.path);return te.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=mh(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=mh(e);let u=p();return s.X({range:r,Z:!0},(l,m,w)=>{const b=fc(l[1]),A=new ze(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=ds(t.path),s=IDBKeyRange.bound([r],[Dm(r)],!1,!0);let u=0;return mh(e).X({index:"documentTargetsIndex",Z:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ie(e,t){return qm(e).get(t).next(r=>r?r0(r):null)}}function qm(n){return li(n,"targets")}function Bx(n){return li(n,"targetGlobal")}function mh(n){return li(n,"targetDocuments")}function jx([n,e],[t,r]){const s=Lt(n,t);return 0===s?Lt(e,r):s}class QO{constructor(e){this.kn=e,this.buffer=new yn(jx),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,he.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){au(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tc(r)}yield t.Bn(3e5)}))}}class JO{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(ji.at);const r=new QO(t);return this.Ln.forEachTarget(e,s=>r.Fn(s.sequenceNumber)).next(()=>this.Ln.Un(e,s=>r.Fn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Fx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fx):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,s,u,l,m,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),s=this.params.maximumSequenceNumbersToCollect):s=O,l=Date.now(),this.nthSequenceNumber(e,s))).next(O=>(r=O,m=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),Em()<=Yu.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${O} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:O})))}}class eN{constructor(e,t){this.db=e,this.garbageCollector=new JO(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,s)=>t(s))}addReference(e,t,r){return iD(e,r)}removeReference(e,t,r){return iD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iD(e,t)}jn(e,t){return function(r,s){let u=!1;return Ux(r).tt(l=>Vx(r,l,s).next(m=>(m&&(u=!0),te.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Qn(e,(l,m)=>{if(m<=t){const w=this.jn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,pt.min()),mh(e).delete([0,ds(l.path)])))});s.push(w)}}).next(()=>te.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iD(e,t)}Qn(e,t){const r=mh(e);let s,u=ji.at;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==ji.at&&t(new ze(fc(s)),u),u=b,s=w):u=ji.at}).next(()=>{u!==ji.at&&t(new ze(fc(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iD(n,e){return mh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ds(e.path),sequenceNumber:r}));var r}class $x{constructor(){this.changes=new kl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tN{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pp(e).put(r)}removeEntry(e,t,r){return pp(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],QI(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(s,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return pp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(s,u)=>{r={document:this.Wn(t,u),size:nD(u)}}).next(()=>r)}getEntries(e,t){let r=ls();return this.Jn(e,t,(s,u)=>{const l=this.Wn(s,u);r=r.insert(s,l)}).next(()=>r)}Yn(e,t){let r=ls(),s=new qn(ze.comparator);return this.Jn(e,t,(u,l)=>{const m=this.Wn(u,l);r=r.insert(u,m),s=s.insert(u,nD(l))}).next(()=>({documents:r,Zn:s}))}Jn(e,t,r){if(t.isEmpty())return te.resolve();let s=new yn(qx);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(c0(s.first()),c0(s.last())),l=s.getIterator();let m=l.getNext();return pp(e).X({index:"documentKeyIndex",range:u},(w,b,A)=>{const O=ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&qx(m,O)<0;)r(m,null),m=l.getNext();m&&m.isEqual(O)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.j(c0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),QI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pp(e).W(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=ls();for(const A of w){const O=this.Wn(ze.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);O.isFoundDocument()&&(sp(t,O)||s.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=ls();const l=zx(t,r),m=zx(t,us.max());return pp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,A)=>{const O=this.Wn(ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new nN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gx(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}zn(e,t){return Gx(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function BO(n,e){let t;if(e.document)t=lx(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),s=cp(e.noDocument.readTime);t=Tn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=ze.fromSegments(e.unknownDocument.path),s=cp(e.unknownDocument.version);t=Tn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Mn(r[0],r[1]);return pt.fromTimestamp(s)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(pt.min()))return r}return Tn.newInvalidDocument(e)}}function Hx(n){return new tN(n)}class nN extends $x{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new kl(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new yn((u,l)=>Lt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=Dx(this.Xn.Tt,l);s=s.add(u.path.popLast());const b=nD(w);r+=b-m.size,t.push(this.Xn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Dx(this.Xn.Tt,l.convertToNoDocument(pt.min()));t.push(this.Xn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:s})=>(s.forEach((u,l)=>{this.ts.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Gx(n){return li(n,"remoteDocumentGlobal")}function pp(n){return li(n,"remoteDocumentsV14")}function c0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zx(n,e){const t=e.documentKey.path.toArray();return[n,QI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qx(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Lt(t[u],r[u]),s)return s;return s=Lt(t.length,r.length),s||(s=Lt(t[t.length-2],r[r.length-2]),s||Lt(t[t.length-1],r[r.length-1]))}class rN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&ch(r.mutation,s,ci.empty(),Mn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,p()).next(()=>r))}getLocalViewOfDocuments(e,t,r=p()){const s=i();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Hm();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=i();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,p()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=ls();const l=a(),m=a();return t.forEach((w,b)=>{const A=r.get(b.key);s.has(b.key)&&(void 0===A||A.mutation instanceof dc)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),ch(A.mutation,b,A.mutation.getFieldMask(),Mn.now())):l.set(b.key,ci.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var O;return m.set(b,new rN(A,null!==(O=l.get(b))&&void 0!==O?O:null))}),m))}recalculateAndSaveOverlays(e,t){const r=a();let s=new qn((l,m)=>l-m),u=p();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||ci.empty();A=m.applyToLocalView(b,A),r.set(w,A);const O=(s.get(m.batchId)||p()).add(w);s=s.insert(m.batchId,O)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,A=w.value,O=o();A.forEach(B=>{if(!u.has(B)){const K=$m(t.get(B),r.get(B));null!==K&&O.set(B,K),u=u.add(B)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,O))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):FI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):te.resolve(i());let m=-1,w=u;return l.next(b=>te.forEach(b,(A,O)=>(m<O.largestBatchId&&(m=O.largestBatchId),u.get(A)?te.resolve():this.remoteDocumentCache.getEntry(e,A).next(B=>{w=w.insert(A,B)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,p())).next(A=>({batchId:m,changes:YC(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let s=Hm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Hm();return this.indexManager.getCollectionParents(e,s).next(l=>te.forEach(l,m=>{const w=(b=t,A=m.child(s),new uc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,O)=>{u=u.insert(A,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Tn.newInvalidDocument(b)))});let l=Hm();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&ch(b.mutation,w,ci.empty(),Mn.now()),sp(t,w)&&(l=l.insert(m,w))}),l})}}class iN{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return te.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:sT(r.bundledQuery),readTime:Sr(r.readTime)}),te.resolve();var r}}class sN{constructor(){this.overlays=new qn(ze.comparator),this.ss=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=i();return te.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ce(e,t,u)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ss.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const s=i(),u=t.length+1,l=new ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return te.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new qn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=i(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=i(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=s)););return te.resolve(m)}ce(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ss.get(s.largestBatchId).delete(r.key);this.ss.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iT(t,r));let u=this.ss.get(t);void 0===u&&(u=p(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class hT{constructor(){this.rs=new yn(di.os),this.us=new yn(di.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new di(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new di(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new ze(new Jt([])),r=new di(t,e),s=new di(t,e+1),u=[];return this.us.forEachInRange([r,s],l=>{this.ls(l),u.push(l.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new ze(new Jt([])),r=new di(t,e),s=new di(t,e+1);let u=p();return this.us.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new di(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return ze.comparator(e.key,t.key)||Lt(e.gs,t.gs)}static cs(e,t){return Lt(e.gs,t.gs)||ze.comparator(e.key,t.key)}}class oN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new yn(di.os)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ys;this.ys++;const l=new nT(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.ps=this.ps.add(new di(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Ts(t+1),u=s<0?0:s;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),s=new di(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,s],l=>{const m=this.Is(l.gs);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Lt);return t.forEach(s=>{const u=new di(s,0),l=new di(s,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,l],m=>{r=r.add(m.gs)})}),te.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const l=new di(new ze(u),0);let m=new yn(Lt);return this.ps.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.gs)),!0)},l),te.resolve(this.Es(m))}Es(e){const t=[];return e.forEach(r=>{const s=this.Is(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){dt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return te.forEach(t.mutations,s=>{const u=new di(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,t){const r=new di(t,0),s=this.ps.firstAfterOrEqual(r);return te.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return te.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class aN{constructor(e){this.Rs=e,this.docs=new qn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=ls();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Tn.newInvalidDocument(s))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=ls();const l=t.path,m=new ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:A}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||xv(II(A),r)<=0||(s.has(A.key)||sp(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,t,r,s){nt()}bs(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uN(this)}getSize(e){return te.resolve(this.size)}}class uN extends $x{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Xn.addEntry(e,s)):this.Xn.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class cN{constructor(e){this.persistence=e,this.vs=new kl(t=>sa(t),ac),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new hT,this.targetCount=0,this.Ss=fp.Vn()}forEachTarget(e,t){return this.vs.forEach((r,s)=>t(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ps&&(this.Ps=t),te.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new fp(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.xn(t),te.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.vs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.vs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),te.waitFor(u).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Vs.containsKey(t))}}class Kx{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new ji(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new cN(this),this.indexManager=new KO,this.remoteDocumentCache=new aN(r=>this.referenceDelegate.ks(r)),this.Tt=new Ix(t),this.Os=new iN(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new oN(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const s=new lN(this.Cs.next());return this.referenceDelegate.Ms(),r(s).next(u=>this.referenceDelegate.Fs(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}$s(e,t){return te.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class lN extends Rv{constructor(e){super(),this.currentSequenceNumber=e}}class sD{constructor(e){this.persistence=e,this.Bs=new hT,this.Ls=null}static qs(e){return new sD(e)}get Us(){if(this.Ls)return this.Ls;throw nt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),te.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(s=>this.Us.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Us,r=>{const s=ze.fromPath(r);return this.Ks(e,s).next(u=>{u||t.removeEntry(s,pt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return te.or([()=>te.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class dN{constructor(e){this.Tt=e}$(e,t,r,s){const u=new Cm("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yx,{unique:!0}),m.createObjectStore("documentMutations"),Zx(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Zx(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yx,{unique:!0});const A=w.store("mutations"),O=b.map(B=>A.put(B));return te.waitFor(O)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Gs(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&s>=7&&(l=l.next(()=>this.js(u))),r<8&&s>=8&&(l=l.next(()=>this.zs(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.Ws(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:kO});w.createIndex("collectionPathOverlayIndex",FO,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",LO,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:bO});w.createIndex("documentKeyIndex",CO),w.createIndex("collectionGroupIndex",TO)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.Js(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:RO}).createIndex("sequenceNumberIndex",OO,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:NO}).createIndex("documentKeyIndex",PO,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=nD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>te.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>te.forEach(m,w=>{dt(w.userId===u.userId);const b=lp(this.Tt,w);return Lx(e,u.userId,b).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new Jt(l),b=[0,ds(w)];u.push(t.get(b).next(A=>A?te.resolve():t.put({targetId:0,path:ds(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>te.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:MO});const r=t.store("collectionParents"),s=new dT,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:ds(w)})}};return t.store("remoteDocuments").X({Z:!0},(l,m)=>{const w=new Jt(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,m,w],b)=>{const A=fc(m);return u(A.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,s)=>{const u=r0(s),l=bx(this.Tt,u);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new ze(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?ze.fromSegments(b.noDocument.path):b.unknownDocument?ze.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(A))}).next(()=>te.waitFor(s))}Js(e,t){const r=t.store("mutations"),s=Hx(this.Tt),u=new Kx(sD.qs,this.Tt.oe);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var b;let A=null!==(b=m.get(w.userId))&&void 0!==b?b:p();lp(this.Tt,w).keys().forEach(O=>A=A.add(O)),m.set(w.userId,A)}),te.forEach(m,(w,b)=>{const A=new Vr(b),O=XI.ue(this.Tt,A),B=u.getIndexManager(A),K=rD.ue(A,this.Tt,B,u.referenceDelegate);return new Wx(s,K,O,B).recalculateAndSaveOverlaysForDocumentKeys(new tT(t,ji.at),w).next()})})}}function Zx(n){n.createObjectStore("targetDocuments",{keyPath:AO}).createIndex("documentTargetsIndex",xO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SO,{unique:!0}),n.createObjectStore("targetGlobal")}const fT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pT{constructor(e,t,r,s,u,l,m,w,b,A,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=l,this.document=m,this.Zs=b,this.Xs=A,this.ti=O,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=B=>Promise.resolve(),!pT.C())throw new Ie(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eN(this,s),this.oi=t+"main",this.Tt=new Ix(w),this.ui=new mo(this.oi,this.ti,new dN(this.Tt)),this.Ns=new YO(this.referenceDelegate,this.Tt),this.remoteDocumentCache=Hx(this.Tt),this.Os=new jO,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===A&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(J.FAILED_PRECONDITION,fT);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new ji(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,he.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(au(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return l0(e).get("owner").next(t=>te.resolve(this.yi(t)))}pi(e){return oD(e).delete(this.clientId)}Ii(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=li(r,"clientMetadata");return s.W().next(u=>{const l=e.Ei(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return te.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?te.resolve(!0):l0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ie(J.FAILED_PRECONDITION,fT);return!1}}return!(!this.networkEnabled||!this.inForeground)||oD(e).W().next(r=>void 0===this.Ei(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new tT(t,ji.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>oD(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return rD.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZO(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return XI.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ti)?UO:14===l?Ex:13===l?wx:12===l?VO:11===l?vx:void nt();var l;let m;return this.ui.runTransaction(e,s,u,w=>(m=new tT(w,this.Cs?this.Cs.next():ji.at),"readwrite-primary"===t?this._i(m).next(b=>!!b||this.wi(m)).next(b=>{if(!b)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ie(J.FAILED_PRECONDITION,Mv);return r(m)}).next(b=>this.gi(m).next(()=>b)):this.Di(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Di(e){return l0(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(J.FAILED_PRECONDITION,fT)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return l0(e).put("owner",t)}static C(){return mo.C()}mi(e){const t=l0(e);return t.get("owner").next(r=>this.yi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,rn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function l0(n){return li(n,"owner")}function oD(n){return li(n,"clientMetadata")}function gT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=s}static Ni(e,t){let r=p(),s=p();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new mT(e,t.fromCache,r,s)}}class Yx{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Mi(e,t).next(u=>u||this.Fi(e,t,s,r)).next(u=>u||this.$i(e,t))}Mi(e,t){if(kI(t))return te.resolve(null);let r=$i(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Zv(t,null,"F"),r=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=p(...u);return this.Oi.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Bi(t,m);return this.Li(t,b,l,w.readTime)?this.Mi(e,Zv(t,null,"F")):this.qi(e,b,t,w)}))})))}Fi(e,t,r,s){return kI(t)||s.isEqual(pt.min())?this.$i(e,t):this.Oi.getDocuments(e,r).next(u=>{const l=this.Bi(t,u);return this.Li(t,l,r,s)?this.$i(e,t):(Em()<=Yu.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yv(t)),this.qi(e,l,t,MC(s,-1)))})}Bi(e,t){let r=new yn(cc(e));return t.forEach((s,u)=>{sp(e,u)&&(r=r.add(u))}),r}Li(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}$i(e,t){return Em()<=Yu.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Yv(t)),this.Oi.getDocumentsMatchingQuery(e,t,us.min())}qi(e,t,r,s){return this.Oi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class hN{constructor(e,t,r,s){this.persistence=e,this.Ui=t,this.Tt=s,this.Ki=new qn(Lt),this.Gi=new kl(u=>sa(u),ac),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wx(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function Qx(n,e,t,r){return new hN(n,e,t,r)}function Xx(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,he.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=p();for(const b of s){l.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({Wi:b,removedBatchIds:l,addedBatchIds:m}))})})}),yT.apply(this,arguments)}function Jx(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function eM(n,e,t){let r=p(),s=p();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=ls();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(pt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Hi:l,Ji:s}})}function gN(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wm(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ns.getTargetData(r,e).next(u=>u?(s=u,te.resolve(s)):t.Ns.allocateTargetId(r).next(l=>(s=new fh(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ki.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function Km(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,he.Z)(function*(n,e,t){const r=Ke(n),s=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!au(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(s.target)}),_T.apply(this,arguments)}function aD(n,e,t){const r=Ke(n);let s=pt.min(),u=p();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const A=Ke(m),O=A.Gi.get(b);return void 0!==O?te.resolve(A.Ki.get(O)):A.Ns.getTargetData(w,b)}(r,l,$i(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?s:pt.min(),t?u:p())).next(m=>(rM(r,Qv(e),m),{documents:m,Yi:u})))}function tM(n,e){const t=Ke(n),r=Ke(t.Ns),s=t.Ki.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(l=>l?l.target:null))}function nM(n,e){const t=Ke(n),r=t.Qi.get(e)||pt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ji.getAllFromCollectionGroup(s,e,MC(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(rM(t,e,s),s))}function rM(n,e,t){let r=n.Qi.get(e)||pt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function vT(){return vT=(0,he.Z)(function*(n,e,t,r){const s=Ke(n);let u=p(),l=ls();for(const b of t){const A=e.Zi(b.metadata.name);b.document&&(u=u.add(A));const O=e.Xi(b);O.setReadTime(e.tr(b.metadata.readTime)),l=l.insert(A,O)}const m=s.ji.newChangeBuffer({trackRemovals:!0}),w=yield Wm(s,(b=r,$i(Pl(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>eM(b,m,l).next(A=>(m.apply(b),A)).next(A=>s.Ns.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Ns.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,A.Hi,A.Ji)).next(()=>A.Hi)))}),vT.apply(this,arguments)}function yN(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,he.Z)(function*(n,e,t=p()){const r=yield Wm(n,$i(sT(e.bundledQuery))),s=Ke(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Sr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Os.saveNamedQuery(u,e);const m=r.withResumeToken(hr.EMPTY_BYTE_STRING,l);return s.Ki=s.Ki.insert(m.targetId,m),s.Ns.updateTargetData(u,m).next(()=>s.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>s.Os.saveNamedQuery(u,e))})}),wT.apply(this,arguments)}function iM(n,e){return`firestore_clients_${n}_${e}`}function sM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ET(n,e){return`firestore_targets_${n}_${e}`}class uD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static er(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ie(s.error.code,s.error.message))),l?new uD(e,t,s.state,u):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class d0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ie(r.error.code,r.error.message))),u?new d0(e,r.state,s):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=E();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=Pv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new cD(e,u):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IT{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IT(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DT{constructor(){this.activeTargetIds=E()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bT{constructor(e,t,r,s,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new qn(Lt),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=iM(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new DT),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Si();for(const s of t){if(s===e.rr)continue;const u=e.getItem(iM(e.persistenceKey,s));if(u){const l=cD.er(s,u);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const s=e.Ir(r);s&&e.Tr(s)}for(const s of e.hr)e.cr(s);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ET(this.persistenceKey,e));if(r){const s=d0.er(e,r);s&&(t=s.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ET(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Rr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const s=t.Sr(r.key);return t.Dr(s,null)}{const s=t.Cr(r.key,r.newValue);if(s)return t.Dr(s.clientId,s)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const s=t.Or(r.key,r.newValue);if(s)return t.Mr(s)}}else if(r.key===t.gr){if(null!==r.newValue){const s=t.Ir(r.newValue);if(s)return t.Tr(s)}}else if(r.key===t.dr){const s=function(u){let l=ji.at;if(null!=u)try{const m=JSON.parse(u);dt("number"==typeof m),l=m}catch(m){tr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==ji.at&&t.sequenceNumberHandler(s)}else if(r.key===t.yr){const s=t.Fr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.$r(u)))}}else t.hr.push(r)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,r){const s=new uD(this.currentUser,e,t,r),u=sM(this.persistenceKey,this.currentUser,e);this.setItem(u,s.nr())}Rr(e){const t=sM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const s=ET(this.persistenceKey,e),u=new d0(e,t,r);this.setItem(s,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return cD.er(r,t)}Nr(e,t){const r=this.wr.exec(e),s=Number(r[1]);return uD.er(new Vr(void 0!==r[2]?r[2]:null),s,t)}Or(e,t){const r=this.mr.exec(e),s=Number(r[1]);return d0.er(s,t)}Ir(e){return IT.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),s=this.Er(this.ar),u=this.Er(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.qr(l,m).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=E();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class oM{constructor(){this.Ur=new DT,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new DT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _N{Gr(e){}shutdown(){}}class aM{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const vN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wN{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class EN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,s,u){const l=this.fo(e,t);Oe("RestConnection","Sending: ",l,r);const m={};return this._o(m,s,u),this.wo(e,l,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Sl("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}mo(e,t,r,s,u,l){return this.lo(e,t,r,s,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}fo(e,t){return`${this.co}/v1/${t}:${vN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,s){return new Promise((u,l)=>{const m=new AC;m.setWithCredentials(!0),m.listenOnce(Cv.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Zf.NO_ERROR:const b=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Zf.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Ie(J.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const A=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let O=m.getResponseJson();Array.isArray(O)&&(O=O[0]);const B=O?.error;if(B&&B.status&&B.message){const K=function(Q){const Re=Q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Re)>=0?Re:J.UNKNOWN}(B.status);l(new Ie(K,B.message))}else l(new Ie(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Ie(J.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}yo(e,t,r){const s=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=bv(),l=hI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Tv({})),this._o(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=s.join("");Oe("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let A=!1,O=!1;const B=new wN({Yr:Q=>{O?Oe("Connection","Not sending because WebChannel is closed:",Q):(A||(Oe("Connection","Opening WebChannel transport."),b.open(),A=!0),Oe("Connection","WebChannel sending:",Q),b.send(Q))},Zr:()=>b.close()}),K=(Q,Re,je)=>{Q.listen(Re,bt=>{try{je(bt)}catch($t){setTimeout(()=>{throw $t},0)}})};return K(b,wm.EventType.OPEN,()=>{O||Oe("Connection","WebChannel transport opened.")}),K(b,wm.EventType.CLOSE,()=>{O||(O=!0,Oe("Connection","WebChannel transport closed"),B.oo())}),K(b,wm.EventType.ERROR,Q=>{O||(O=!0,Sl("Connection","WebChannel transport errored:",Q),B.oo(new Ie(J.UNAVAILABLE,"The operation could not be completed")))}),K(b,wm.EventType.MESSAGE,Q=>{var Re;if(!O){const je=Q.data[0];dt(!!je);const $t=je.error||(null===(Re=je[0])||void 0===Re?void 0:Re.error);if($t){Oe("Connection","WebChannel received error:",$t);const zt=$t.status;let Gt=function(en){const xi=Tr[en];if(void 0!==xi)return ZI(xi)}(zt),Wt=$t.message;void 0===Gt&&(Gt=J.INTERNAL,Wt="Unknown error status: "+zt+" with message "+$t.message),O=!0,B.oo(new Ie(Gt,Wt)),b.close()}else Oe("Connection","WebChannel received:",je),B.uo(je)}}),K(l,fI.STAT_EVENT,Q=>{Q.stat===vm.PROXY?Oe("Connection","Detected buffering proxy"):Q.stat===vm.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.ro()},0),B}}function uM(){return typeof window<"u"?window:null}function lD(){return typeof document<"u"?document:null}function h0(n){return new Vt(n,!0)}class CT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=s,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),s=Math.max(0,t-r);s>0&&Oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,s,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class cM{constructor(e,t,r,s,u,l,m,w){this.Ys=e,this.So=r,this.Do=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new CT(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,he.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,he.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.ko.bo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Co===t&&this.jo(r,s)},r=>{e(()=>{const s=new Ie(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(s)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(s=>{r(()=>this.zo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Fo(){var e=this;this.state=5,this.ko.vo((0,he.Z)(function*(){e.state=0,e.start()}))}zo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IN extends cM{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function gO(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:nt(),s=e.targetChange.targetIds||[],u=function(w,b){return w.yt?(dt(void 0===b||"string"==typeof b),hr.fromBase64String(b||"")):(dt(void 0===b||b instanceof Uint8Array),hr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?J.UNKNOWN:ZI(w.code);return new Ie(b,w.message||"")}(l);t=new H(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=hc(n,r.document.name),u=Sr(r.document.updateTime),l=r.document.createTime?Sr(r.document.createTime):pt.min(),m=new Cr({mapValue:{fields:r.document.fields}}),w=Tn.newFoundDocument(s,u,l,m);t=new M(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=hc(n,r.document),u=r.readTime?Sr(r.readTime):pt.min(),l=Tn.newNoDocument(s,u);t=new M([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=hc(n,r.document);t=new M([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new rx(r.count||0);t=new k(r.targetId,u)}}var w;return t}(this.Tt,e),r=function(s){if(!("targetChange"in s))return pt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?pt.min():u.readTime?Sr(u.readTime):pt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=t0(this.Tt),t.addTarget=function(s,u){let l;const m=u.target;return l=np(m)?{documents:dx(s,m)}:{query:eT(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=nr(s,u.resumeToken):u.snapshotVersion.compareTo(pt.min())>0&&(l.readTime=hn(s,u.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function yO(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=t0(this.Tt),t.removeTarget=e,this.qo(t)}}class DN extends cM{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function mO(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,s){let u=Sr(r.updateTime?r.updateTime:s);return u.isEqual(pt.min())&&(u=Sr(s)),new GI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.eu(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=t0(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>n0(this.Tt,r))};this.qo(t)}}class bN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=s,this.iu=!1}ru(){if(this.iu)throw new Ie(J.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.lo(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ie(J.UNKNOWN,s.toString())})}mo(e,t,r,s){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.mo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(J.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class TN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(tr(t),this.cu=!1):Oe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class SN{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(m=>{r.enqueueAndForget((0,he.Z)(function*(){var w;Fl(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,he.Z)(function*(b){const A=Ke(b);A.mu.add(4),yield Zm(A),A.pu.set("Unknown"),A.mu.delete(4),yield f0(A)}),function(b){return w.apply(this,arguments)})(l))}))}),this.pu=new TN(r,s)}}function f0(n){return ST.apply(this,arguments)}function ST(){return ST=(0,he.Z)(function*(n){if(Fl(n))for(const e of n.gu)yield e(!0)}),ST.apply(this,arguments)}function Zm(n){return AT.apply(this,arguments)}function AT(){return AT=(0,he.Z)(function*(n){for(const e of n.gu)yield e(!1)}),AT.apply(this,arguments)}function dD(n,e){const t=Ke(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),RT(t)?MT(t):Qm(t).Mo()&&xT(t,e))}function p0(n,e){const t=Ke(n),r=Qm(t);t.wu.delete(e),r.Mo()&&lM(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Fl(t)&&t.pu.set("Unknown"))}function xT(n,e){n.Iu.Ft(e.targetId),Qm(n).Jo(e)}function lM(n,e){n.Iu.Ft(e),Qm(n).Yo(e)}function MT(n){n.Iu=new fe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),Qm(n).start(),n.pu.au()}function RT(n){return Fl(n)&&!Qm(n).Oo()&&n.wu.size>0}function Fl(n){return 0===Ke(n).mu.size}function dM(n){n.Iu=void 0}function AN(n){return OT.apply(this,arguments)}function OT(){return OT=(0,he.Z)(function*(n){n.wu.forEach((e,t)=>{xT(n,e)})}),OT.apply(this,arguments)}function xN(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,he.Z)(function*(n,e){dM(n),RT(n)?(n.pu.fu(e),MT(n)):n.pu.set("Unknown")}),NT.apply(this,arguments)}function MN(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,he.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof H&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.wu.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.wu.delete(m),s.Iu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hD(n,r)}else if(e instanceof M?n.Iu.Qt(e):e instanceof k?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(pt.min()))try{const r=yield Jx(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Iu.ee(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.wu.get(w);b&&s.wu.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=s.wu.get(m);if(!w)return;s.wu.set(m,w.withResumeToken(hr.EMPTY_BYTE_STRING,w.snapshotVersion)),lM(s,m);const b=new fh(w.target,m,1,w.sequenceNumber);xT(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield hD(n,r)}var r}),PT.apply(this,arguments)}function hD(n,e,t){return kT.apply(this,arguments)}function kT(){return kT=(0,he.Z)(function*(n,e,t){if(!au(e))throw e;n.mu.add(1),yield Zm(n),n.pu.set("Offline"),t||(t=()=>Jx(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield f0(n)}))}),kT.apply(this,arguments)}function hM(n,e){return e().catch(t=>hD(n,t,e))}function Ym(n){return FT.apply(this,arguments)}function FT(){return FT=(0,he.Z)(function*(n){const e=Ke(n),t=yh(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;RN(e);)try{const s=yield gN(e.localStore,r);if(null===s){0===e._u.length&&t.Bo();break}r=s.batchId,ON(e,s)}catch(s){yield hD(e,s)}fM(e)&&pM(e)}),FT.apply(this,arguments)}function RN(n){return Fl(n)&&n._u.length<10}function ON(n,e){n._u.push(e);const t=yh(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function fM(n){return Fl(n)&&!yh(n).Oo()&&n._u.length>0}function pM(n){yh(n).start()}function NN(n){return LT.apply(this,arguments)}function LT(){return LT=(0,he.Z)(function*(n){yh(n).su()}),LT.apply(this,arguments)}function PN(n){return VT.apply(this,arguments)}function VT(){return VT=(0,he.Z)(function*(n){const e=yh(n);for(const t of n._u)e.tu(t.mutations)}),VT.apply(this,arguments)}function kN(n,e,t){return UT.apply(this,arguments)}function UT(){return UT=(0,he.Z)(function*(n,e,t){const r=n._u.shift(),s=rT.from(r,e,t);yield hM(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ym(n)}),UT.apply(this,arguments)}function FN(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,he.Z)(function*(n,e){var t;e&&yh(n).Xo&&(yield(t=(0,he.Z)(function*(r,s){if(KC(u=s.code)&&u!==J.ABORTED){const l=r._u.shift();yh(r).$o(),yield hM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Ym(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),fM(n)&&pM(n)}),BT.apply(this,arguments)}function gM(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,he.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Fl(t);t.mu.add(3),yield Zm(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield f0(t)}),jT.apply(this,arguments)}function $T(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,he.Z)(function*(n,e){const t=Ke(n);e?(t.mu.delete(2),yield f0(t)):e||(t.mu.add(2),yield Zm(t),t.pu.set("Unknown"))}),HT.apply(this,arguments)}function Qm(n){return n.Tu||(n.Tu=function(e,t,r){const s=Ke(e);return s.ru(),new IN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.Tt,r)}(n.datastore,n.asyncQueue,{Xr:AN.bind(null,n),no:xN.bind(null,n),Ho:MN.bind(null,n)}),n.gu.push(function(){var e=(0,he.Z)(function*(t){t?(n.Tu.$o(),RT(n)?MT(n):n.pu.set("Unknown")):(yield n.Tu.stop(),dM(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function yh(n){return n.Eu||(n.Eu=function(e,t,r){const s=Ke(e);return s.ru(),new DN(t,s.connection,s.authCredentials,s.appCheckCredentials,s.Tt,r)}(n.datastore,n.asyncQueue,{Xr:NN.bind(null,n),no:FN.bind(null,n),nu:PN.bind(null,n),eu:kN.bind(null,n)}),n.gu.push(function(){var e=(0,he.Z)(function*(t){t?(n.Eu.$o(),yield Ym(n)):(yield n.Eu.stop(),n._u.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class GT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new GT(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(n,e){if(tr("AsyncQueue",`${e}: ${n}`),au(n))return new Ie(J.UNAVAILABLE,`${e}: ${n}`);throw n}class Jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Hm(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new Jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mM{constructor(){this.Au=new qn(ze.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):nt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class ey{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new ey(e,t,Jm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class LN{constructor(){this.bu=void 0,this.listeners=[]}}class VN{constructor(){this.queries=new kl(e=>ip(e),rp),this.onlineState="Unknown",this.vu=new Set}}function zT(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,he.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new LN),s)try{u.bu=yield t.onListen(r)}catch(l){const m=Xm(l,`Initialization of query '${Yv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.bu&&e.Vu(u.bu)&&ZT(t)}),qT.apply(this,arguments)}function WT(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,he.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),KT.apply(this,arguments)}function UN(n,e){const t=Ke(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.Vu(s)&&(r=!0);l.bu=s}}r&&ZT(t)}function BN(n,e,t){const r=Ke(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function ZT(n){n.vu.forEach(e=>{e.next()})}class YT{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new ey(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class jN{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class yM{constructor(e){this.Tt=e}Zi(e){return hc(this.Tt,e)}Xi(e){return e.metadata.exists?lx(this.Tt,e.document,!1):Tn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Sr(e)}}class $N{constructor(e,t,r){this.$u=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_M(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=Jt.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new yM(this.Tt);for(const s of e)if(s.metadata.queries){const u=r.Zi(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||p()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function mN(n,e,t,r){return vT.apply(this,arguments)}(e.localStore,new yM(e.Tt),e.documents,e.$u.id),r=e.Lu(e.documents);for(const s of e.queries)yield yN(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function _M(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vM{constructor(e){this.key=e}}class wM{constructor(e){this.key=e}}class EM{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=p(),this.mutatedKeys=p(),this.ju=cc(e),this.zu=new Jm(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new mM,s=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,O)=>{const B=s.get(A),K=sp(this.query,O)?O:null,Q=!!B&&this.mutatedKeys.has(B.key),Re=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let je=!1;B&&K?B.data.isEqual(K.data)?Q!==Re&&(r.track({type:3,doc:K}),je=!0):this.Yu(B,K)||(r.track({type:2,doc:K}),je=!0,(w&&this.ju(K,w)>0||b&&this.ju(K,b)<0)&&(m=!0)):!B&&K?(r.track({type:0,doc:K}),je=!0):B&&!K&&(r.track({type:1,doc:B}),je=!0,(w||b)&&(m=!0)),je&&(K?(l=l.add(K),u=Re?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{zu:l,Ju:r,Li:m,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((b,A)=>function(O,B){const K=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return K(O)-K(B)}(b.type,A.type)||this.ju(b.doc,A.doc)),this.Zu(r);const l=t?this.Xu():[],m=0===this.Qu.size&&this.current?1:0,w=m!==this.Gu;return this.Gu=m,0!==u.length||w?{snapshot:new ey(this.query,e.zu,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new mM,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=p(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new wM(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new vM(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=p();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return ey.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class HN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GN{constructor(e){this.key=e,this.ic=!1}}class zN{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new kl(m=>ip(m),rp),this.uc=new Map,this.cc=new Set,this.ac=new qn(ze.comparator),this.hc=new Map,this.lc=new hT,this.fc={},this.dc=new Map,this._c=fp.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function qN(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,he.Z)(function*(n,e){const t=wS(n);let r,s;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.sc();else{const l=yield Wm(t.localStore,$i(e));t.isPrimaryClient&&dD(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield XT(t,e,r,"current"===m,l.resumeToken)}return s}),QT.apply(this,arguments)}function XT(n,e,t,r,s){return JT.apply(this,arguments)}function JT(){return JT=(0,he.Z)(function*(n,e,t,r,s){n.mc=(O,B,K)=>{return(Q=(0,he.Z)(function*(Re,je,bt,$t){let zt=je.view.Hu(bt);zt.Li&&(zt=yield aD(Re.localStore,je.query,!1).then(({documents:en})=>je.view.Hu(en,zt)));const Gt=$t&&$t.targetChanges.get(je.targetId),Wt=je.view.applyChanges(zt,Re.isPrimaryClient,Gt);return cS(Re,je.targetId,Wt.tc),Wt.snapshot}),function(Re,je,bt,$t){return Q.apply(this,arguments)})(n,O,B,K);var Q};const u=yield aD(n.localStore,e,!0),l=new EM(e,u.Yi),m=l.Hu(u.documents),w=T.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);cS(n,t,b.tc);const A=new HN(e,t,l);return n.oc.set(e,A),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),b.snapshot}),JT.apply(this,arguments)}function WN(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,he.Z)(function*(n,e){const t=Ke(n),r=t.oc.get(e),s=t.uc.get(r.targetId);if(s.length>1)return t.uc.set(r.targetId,s.filter(u=>!rp(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Km(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),p0(t.remoteStore,r.targetId),ty(t,r.targetId)}).catch(tc))):(ty(t,r.targetId),yield Km(t.localStore,r.targetId,!0))}),eS.apply(this,arguments)}function tS(){return tS=(0,he.Z)(function*(n,e,t){const r=ES(n);try{const s=yield function(u,l){const m=Ke(u),w=Mn.now(),b=l.reduce((B,K)=>B.add(K.key),p());let A,O;return m.persistence.runTransaction("Locally write mutations","readwrite",B=>{let K=ls(),Q=p();return m.ji.getEntries(B,b).next(Re=>{K=Re,K.forEach((je,bt)=>{bt.isValidDocument()||(Q=Q.add(je))})}).next(()=>m.localDocuments.getOverlayedDocuments(B,K)).next(Re=>{A=Re;const je=[];for(const bt of l){const $t=Jv(bt,A.get(bt.key).overlayedDocument);null!=$t&&je.push(new dc(bt.key,$t,Wv($t.value.mapValue),kn.exists(!0)))}return m.mutationQueue.addMutationBatch(B,w,je,l)}).next(Re=>{O=Re;const je=Re.applyToLocalDocumentSet(A,Q);return m.documentOverlayCache.saveOverlays(B,Re.batchId,je)})}).then(()=>({batchId:O.batchId,changes:YC(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.fc[u.currentUser.toKey()];w||(w=new qn(Lt)),w=w.insert(l,m),u.fc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Ll(r,s.changes),yield Ym(r.remoteStore)}catch(s){const u=Xm(s,"Failed to persist write");t.reject(u)}}),tS.apply(this,arguments)}function IM(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,he.Z)(function*(n,e){const t=Ke(n);try{const r=yield function pN(n,e){const t=Ke(n),r=e.snapshotVersion;let s=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});s=t.Ki;const m=[];e.targetChanges.forEach((A,O)=>{const B=s.get(O);if(!B)return;m.push(t.Ns.removeMatchingKeys(u,A.removedDocuments,O).next(()=>t.Ns.addMatchingKeys(u,A.addedDocuments,O)));let K=B.withSequenceNumber(u.currentSequenceNumber);var Q,Re,je;e.targetMismatches.has(O)?K=K.withResumeToken(hr.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):A.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(A.resumeToken,r)),s=s.insert(O,K),Re=K,je=A,(0===(Q=B).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&m.push(t.Ns.updateTargetData(u,K))});let w=ls(),b=p();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(eM(u,l,e.documentUpdates).next(A=>{w=A.Hi,b=A.Ji})),!r.isEqual(pt.min())){const A=t.Ns.getLastRemoteSnapshotVersion(u).next(O=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return te.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ki=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.hc.get(u);l&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.ic=!0:s.modifiedDocuments.size>0?dt(l.ic):s.removedDocuments.size>0&&(dt(l.ic),l.ic=!1))}),yield Ll(t,r,e)}catch(r){yield tc(r)}}),nS.apply(this,arguments)}function DM(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.oc.forEach((u,l)=>{const m=l.view.Pu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Ke(u);m.onlineState=l;let w=!1;m.queries.forEach((b,A)=>{for(const O of A.listeners)O.Pu(l)&&(w=!0)}),w&&ZT(m)}(r.eventManager,e),s.length&&r.rc.Ho(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ZN(n,e,t){return rS.apply(this,arguments)}function rS(){return rS=(0,he.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.hc.get(e),u=s&&s.key;if(u){let l=new qn(ze.comparator);l=l.insert(u,Tn.newNoDocument(u,pt.min()));const m=p().add(u),w=new I(pt.min(),new Map,new yn(Lt),l,m);yield IM(r,w),r.ac=r.ac.remove(u),r.hc.delete(e),lS(r)}else yield Km(r.localStore,e,!1).then(()=>ty(r,e,t)).catch(tc)}),rS.apply(this,arguments)}function YN(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,he.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const s=yield function fN(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const A=w.batch,O=A.keys();let B=te.resolve();return O.forEach(K=>{B=B.next(()=>b.getEntry(m,K)).next(Q=>{const Re=w.docVersions.get(K);dt(null!==Re),Q.version.compareTo(Re)<0&&(A.applyToRemoteDocument(Q,w),Q.isValidDocument()&&(Q.setReadTime(w.commitVersion),b.addEntry(Q)))})}),B.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=p();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);uS(t,r,null),aS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ll(t,s)}catch(s){yield tc(s)}}),iS.apply(this,arguments)}function QN(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,he.Z)(function*(n,e,t){const r=Ke(n);try{const s=yield function(u,l){const m=Ke(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(dt(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);uS(r,e,t),aS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ll(r,s)}catch(s){yield tc(s)}}),sS.apply(this,arguments)}function oS(){return oS=(0,he.Z)(function*(n,e){const t=Ke(n);Fl(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ke(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.dc.get(r)||[];s.push(e),t.dc.set(r,s)}catch(r){const s=Xm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),oS.apply(this,arguments)}function aS(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function uS(n,e,t){const r=Ke(n);let s=r.fc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.fc[r.currentUser.toKey()]=s}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||bM(n,r)})}function bM(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(p0(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),lS(n))}function cS(n,e,t){for(const r of t)r instanceof vM?(n.lc.addReference(r.key,e),JN(n,r)):r instanceof wM?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||bM(n,r.key)):nt()}function JN(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.cc.add(r),lS(n))}function lS(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new ze(Jt.fromString(e)),r=n._c.next();n.hc.set(r,new GN(t)),n.ac=n.ac.insert(t,r),dD(n.remoteStore,new fh($i(Pl(t.path)),r,2,ji.at))}}function Ll(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,he.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[],l=[];var m;r.oc.isEmpty()||(r.oc.forEach((m,w)=>{l.push(r.mc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const A=mT.Ni(w.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.rc.Ho(s),yield(m=(0,he.Z)(function*(w,b){const A=Ke(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>te.forEach(b,B=>te.forEach(B.Ci,K=>A.persistence.referenceDelegate.addReference(O,B.targetId,K)).next(()=>te.forEach(B.xi,K=>A.persistence.referenceDelegate.removeReference(O,B.targetId,K)))))}catch(O){if(!au(O))throw O;Oe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const B=O.targetId;if(!O.fromCache){const K=A.Ki.get(B),Re=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);A.Ki=A.Ki.insert(B,Re)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),dS.apply(this,arguments)}function e1(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,he.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield Xx(t.localStore,e);t.currentUser=e,(s=t).dc.forEach(l=>{l.forEach(m=>{m.reject(new Ie(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ll(t,r.Wi)}var s}),hS.apply(this,arguments)}function t1(n,e){const t=Ke(n),r=t.hc.get(e);if(r&&r.ic)return p().add(r.key);{let s=p();const u=t.uc.get(e);if(!u)return s;for(const l of u){const m=t.oc.get(l);s=s.unionWith(m.view.Wu)}return s}}function n1(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,he.Z)(function*(n,e){const t=Ke(n),r=yield aD(t.localStore,e.query,!0),s=e.view.nc(r);return t.isPrimaryClient&&cS(t,e.targetId,s.tc),s}),fS.apply(this,arguments)}function r1(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,he.Z)(function*(n,e){const t=Ke(n);return nM(t.localStore,e).then(r=>Ll(t,r))}),pS.apply(this,arguments)}function i1(n,e,t,r){return gS.apply(this,arguments)}function gS(){return gS=(0,he.Z)(function*(n,e,t,r){const s=Ke(n),u=yield function(l,m){const w=Ke(l),b=Ke(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.An(A,m).next(O=>O?w.localDocuments.getDocuments(A,O):te.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Ym(s.remoteStore):"acknowledged"===t||"rejected"===t?(uS(s,e,r||null),aS(s,e),m=e,Ke(Ke(s.localStore).mutationQueue).bn(m)):nt(),yield Ll(s,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),gS.apply(this,arguments)}function mS(){return mS=(0,he.Z)(function*(n,e){const t=Ke(n);if(wS(t),ES(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield CM(t,r.toArray());t.wc=!0,yield $T(t.remoteStore,!0);for(const u of s)dD(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let s=Promise.resolve();t.uc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(ty(t,l),Km(t.localStore,l,!0))),p0(t.remoteStore,l)}),yield s,yield CM(t,r),function(u){const l=Ke(u);l.hc.forEach((m,w)=>{p0(l.remoteStore,w)}),l.lc._s(),l.hc=new Map,l.ac=new qn(ze.comparator)}(t),t.wc=!1,yield $T(t.remoteStore,!1)}}),mS.apply(this,arguments)}function CM(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,he.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[];for(const l of e){let m;const w=r.uc.get(l);if(w&&0!==w.length){m=yield Wm(r.localStore,$i(w[0]));for(const b of w){const A=r.oc.get(b),O=yield n1(r,A);O.snapshot&&u.push(O.snapshot)}}else{const b=yield tM(r.localStore,l);m=yield Wm(r.localStore,b),yield XT(r,TM(b),l,!1,m.resumeToken)}s.push(m)}return r.rc.Ho(u),s}),yS.apply(this,arguments)}function TM(n){return GC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function o1(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Si()}function a1(n,e,t,r){return _S.apply(this,arguments)}function _S(){return _S=(0,he.Z)(function*(n,e,t,r){const s=Ke(n);if(s.wc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=s.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield nM(s.localStore,Qv(u[0])),m=I.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,hr.EMPTY_BYTE_STRING);yield Ll(s,l,m);break}case"rejected":yield Km(s.localStore,e,!0),ty(s,e,r);break;default:nt()}}),_S.apply(this,arguments)}function u1(n,e,t){return vS.apply(this,arguments)}function vS(){return vS=(0,he.Z)(function*(n,e,t){const r=wS(n);if(r.wc){for(const s of e){if(r.uc.has(s)){Oe("SyncEngine","Adding an already active target "+s);continue}const u=yield tM(r.localStore,s),l=yield Wm(r.localStore,u);yield XT(r,TM(u),l.targetId,!1,l.resumeToken),dD(r.remoteStore,l)}for(const s of t)r.uc.has(s)&&(yield Km(r.localStore,s,!1).then(()=>{p0(r.remoteStore,s),ty(r,s)}).catch(tc))}}),vS.apply(this,arguments)}function wS(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZN.bind(null,e),e.rc.Ho=UN.bind(null,e.eventManager),e.rc.gc=BN.bind(null,e.eventManager),e}function ES(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QN.bind(null,e),e}class SM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.Tt=h0(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return Qx(this.persistence,new Yx,e.initialUser,this.Tt)}Tc(e){return new Kx(sD.qs,this.Tt)}Ic(e){return new oM}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AM extends SM{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield ES(r.bc.syncEngine),yield Ym(r.bc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return Qx(this.persistence,new Yx,e.initialUser,this.Tt)}Ac(e,t){return new XO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new QA(t,this.persistence);return new RC(e.asyncQueue,r)}Tc(e){const t=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new pT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uM(),lD(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new oM}}class l1 extends AM{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const s=r.bc.syncEngine;r.sharedClientState instanceof bT&&(r.sharedClientState.syncEngine={Br:i1.bind(null,s),Lr:a1.bind(null,s),qr:u1.bind(null,s),Si:o1.bind(null,s),$r:r1.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,he.Z)(function*(l){yield function s1(n,e){return mS.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}Ic(e){const t=uM();if(!bT.C(t))throw new Ie(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class IS{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>DM(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=e1.bind(null,r.syncEngine),yield $T(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VN}createDatastore(e){const t=h0(e.databaseInfo.databaseId),r=new EN(e.databaseInfo);return new bN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>DM(this.syncEngine,m,0),l=aM.C()?new aM:new _N,new SN(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const A=new zN(r,s,u,l,m,w);return b&&(A.wc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=Ke(t);Oe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield Zm(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xM(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class fD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class d1{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new br,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),s=Number(r);isNaN(s)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(s);return new jN(JSON.parse(u),t.length+s)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,he.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,he.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class h1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,he.Z)(function*(u,l){const m=Ke(u),w=t0(m.Tt)+"/documents",b={documents:l.map(K=>e0(m.Tt,K))},A=yield m.mo("BatchGetDocuments",w,b,l.length),O=new Map;A.forEach(K=>{const Q=function pO(n,e){return"found"in e?function(t,r){dt(!!r.found);const s=hc(t,r.found.name),u=Sr(r.found.updateTime),l=r.found.createTime?Sr(r.found.createTime):pt.min(),m=new Cr({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const s=hc(t,r.missing),u=Sr(r.readTime);return Tn.newNoDocument(s,u)}(n,e):nt()}(m.Tt,K);O.set(Q.key.toString(),Q)});const B=[];return l.forEach(K=>{const Q=O.get(K.toString());dt(!!Q),B.push(Q)}),B}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ze.fromPath(s);e.mutations.push(new KI(u,e.precondition(u)))}),yield(r=(0,he.Z)(function*(s,u){const l=Ke(s),m=t0(l.Tt)+"/documents",w={writes:u.map(b=>n0(l.Tt,b))};yield l.lo("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pt.min())?kn.exists(!1):kn.updateTime(t):kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pt.min()))throw new Ie(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(t)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class f1{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new CT(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,he.Z)(function*(){const t=new h1(e.datastore),r=e.$c(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Bc(u)}))}).catch(s=>{e.Bc(s)})}))}$c(e){try{const t=this.updateFunction(e);return!rc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!KC(t)}return!1}}class p1{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Vr.UNAUTHENTICATED,this.clientId=wI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,he.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(J.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Xm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function MM(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,he.Z)(function*(u){r.isEqual(u)||(yield Xx(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),DS.apply(this,arguments)}function RM(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CS(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>gM(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>gM(e.remoteStore,u)),n.onlineComponents=e}),bS.apply(this,arguments)}function CS(n){return TS.apply(this,arguments)}function TS(){return TS=(0,he.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield MM(n,new SM)),n.offlineComponents}),TS.apply(this,arguments)}function pD(n){return SS.apply(this,arguments)}function SS(){return SS=(0,he.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield RM(n,new IS)),n.onlineComponents}),SS.apply(this,arguments)}function OM(n){return CS(n).then(e=>e.persistence)}function gD(n){return CS(n).then(e=>e.localStore)}function AS(n){return pD(n).then(e=>e.remoteStore)}function xS(n){return pD(n).then(e=>e.syncEngine)}function ny(n){return MS.apply(this,arguments)}function MS(){return MS=(0,he.Z)(function*(n){const e=yield pD(n),t=e.eventManager;return t.onListen=qN.bind(null,e.syncEngine),t.onUnlisten=WN.bind(null,e.syncEngine),t}),MS.apply(this,arguments)}function PM(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(s,u,l,m,w){const b=new fD({next:O=>{u.enqueueAndForget(()=>WT(s,A));const B=O.docs.has(l);!B&&O.fromCache?w.reject(new Ie(J.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&O.fromCache&&m&&"server"===m.source?w.reject(new Ie(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new YT(Pl(l.path),b,{includeMetadataChanges:!0,Ou:!0});return zT(s,A)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}function kM(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(s,u,l,m,w){const b=new fD({next:O=>{u.enqueueAndForget(()=>WT(s,A)),O.fromCache&&"server"===m.source?w.reject(new Ie(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),A=new YT(l,b,{includeMetadataChanges:!0,Ou:!0});return zT(s,A)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}const FM=new Map;function RS(n,e,t){if(!t)throw new Ie(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LM(n,e,t,r){if(!0===e&&!0===r)throw new Ie(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VM(n){if(!ze.isDocumentKey(n))throw new Ie(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UM(n){if(ze.isDocumentKey(n))throw new Ie(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mD(n);throw new Ie(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BM(n,e){if(e<=0)throw new Ie(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class jM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qA;switch(t.type){case"gapi":return new Yf(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=FM.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),FM.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class pc extends Si{constructor(e,t,r){super(e,t,Pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ze(e))}withConverter(e){return new pc(this.firestore,e,this._path)}}function HM(n,e,...t){if(n=(0,rn.m9)(n),RS("collection","path",e),n instanceof g0){const r=Jt.fromString(e,...t);return UM(r),new pc(n,null,r)}{if(!(n instanceof Wn||n instanceof pc))throw new Ie(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return UM(r),new pc(n.firestore,null,r)}}function yD(n,e,...t){if(n=(0,rn.m9)(n),1===arguments.length&&(e=wI.R()),RS("doc","path",e),n instanceof g0){const r=Jt.fromString(e,...t);return VM(r),new Wn(n,null,new ze(r))}{if(!(n instanceof Wn||n instanceof pc))throw new Ie(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return VM(r),new Wn(n.firestore,n instanceof pc?n.converter:null,new ze(r))}}function GM(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),(n instanceof Wn||n instanceof pc)&&(e instanceof Wn||e instanceof pc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OS(n,e){return n=(0,rn.m9)(n),e=(0,rn.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&rp(n._query,e._query)&&n.converter===e.converter}class D1{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new CT(this,"async_queue_retry"),this.Hc=()=>{const t=lD();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=lD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=lD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new br;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,he.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!au(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const s=GT.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(s),s}Jc(){this.Qc&&nt()}verifyOperationInProgress(){}ta(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function NS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class b1{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends g0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new D1,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zM(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||zM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ex(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new p1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function qM(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield MM(n,t),yield RM(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(l=u).name?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;Sl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function WM(n){if(n._initialized||n._terminated)throw new Ie(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gc(hr.fromBase64String(e))}catch(t){throw new Ie(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gc(hr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._methodName=e}}class _D{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const k1=/^__.*__$/;class F1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new lh(e,this.data,t,this.fieldTransforms)}}class KM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class vD{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new vD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.oa({path:r,ca:!1});return s.aa(e),s}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.oa({path:r,ca:!1});return s.ia(),s}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return ID(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(ZM(this.ra)&&k1.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class L1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||h0(e)}wa(e,t,r,s=!1){return new vD({ra:e,methodName:t,_a:r,path:Gn.emptyPath(),ca:!1,da:s},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function mp(n){const e=n._freezeSettings(),t=h0(n._databaseId);return new L1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wD(n,e,t,r,s,u={}){const l=n.wa(u.merge||u.mergeFields?2:0,e,t,s);LS("Data must be an object, but it was:",l,r);const m=XM(r,l);let w,b;if(u.merge)w=new ci(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const O of u.mergeFields){const B=_0(e,O,t);if(!l.contains(B))throw new Ie(J.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);eR(A,B)||A.push(B)}w=new ci(A),b=l.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,b=l.fieldTransforms;return new F1(new Cr(m),w,b)}class y0 extends gp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y0}}function YM(n,e,t){return new vD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class PS extends gp{_toFieldTransform(e){return new uh(e.path,new op)}isEqual(e){return e instanceof PS}}class V1 extends gp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=YM(this,e,!0),r=this.ma.map(u=>yp(u,t)),s=new oh(r);return new uh(e.path,s)}isEqual(e){return this===e}}class U1 extends gp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=YM(this,e,!0),r=this.ma.map(u=>yp(u,t)),s=new lc(r);return new uh(e.path,s)}isEqual(e){return this===e}}class B1 extends gp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new ah(e.Tt,UI(e.Tt,this.ga));return new uh(e.path,t)}isEqual(e){return this===e}}function kS(n,e,t,r){const s=n.wa(1,e,t);LS("Data must be an object, but it was:",s,r);const u=[],l=Cr.empty();th(r,(w,b)=>{const A=ED(e,w,t);b=(0,rn.m9)(b);const O=s.ha(A);if(b instanceof y0)u.push(A);else{const B=yp(b,O);null!=B&&(u.push(A),l.set(A,B))}});const m=new ci(u);return new KM(l,m,s.fieldTransforms)}function FS(n,e,t,r,s,u){const l=n.wa(1,e,t),m=[_0(e,r,t)],w=[s];if(u.length%2!=0)throw new Ie(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<u.length;B+=2)m.push(_0(e,u[B])),w.push(u[B+1]);const b=[],A=Cr.empty();for(let B=m.length-1;B>=0;--B)if(!eR(b,m[B])){const K=m[B];let Q=w[B];Q=(0,rn.m9)(Q);const Re=l.ha(K);if(Q instanceof y0)b.push(K);else{const je=yp(Q,Re);null!=je&&(b.push(K),A.set(K,je))}}const O=new ci(b);return new KM(A,O,l.fieldTransforms)}function QM(n,e,t,r=!1){return yp(t,n.wa(r?4:3,e))}function yp(n,e){if(JM(n=(0,rn.m9)(n)))return LS("Unsupported field value:",e,n),XM(n,e);if(n instanceof gp)return function(t,r){if(!ZM(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=yp(l,r.la(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UI(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Mn.fromDate(t);return{timestampValue:hn(r.Tt,s)}}if(t instanceof Mn){const s=new Mn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hn(r.Tt,s)}}if(t instanceof _D)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gc)return{bytesValue:nr(r.Tt,t._byteString)};if(t instanceof Wn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${mD(t)}`)}(n,e)}function XM(n,e){const t={};return NC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):th(n,(r,s)=>{const u=yp(s,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function JM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof _D||n instanceof gc||n instanceof Wn||n instanceof gp)}function LS(n,e,t){if(!JM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function _0(n,e,t){if((e=(0,rn.m9)(e))instanceof Vl)return e._internalPath;if("string"==typeof e)return ED(n,e);throw ID("Field path arguments must be of type string or ",n,!1,void 0,t)}const j1=new RegExp("[~\\*/\\[\\]]");function ED(n,e,t){if(e.search(j1)>=0)throw ID(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch{throw ID(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ID(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Ie(J.INVALID_ARGUMENT,m+n+w)}function eR(n,e){return n.some(t=>t.isEqual(e))}class v0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $1 extends v0{data(){return super.data()}}function DD(n,e){return"string"==typeof e?ED(n,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}function tR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VS{}class w0 extends VS{}function _h(n,e,...t){let r=[];e instanceof VS&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof ry).length,l=s.filter(m=>m instanceof E0).length;if(u>1||u>0&&l>0)throw new Ie(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class E0 extends w0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new E0(e,t,r)}_apply(e){const t=this._parse(e);return sR(e._query,t),new Si(e.firestore,e.converter,LI(e._query,t))}_parse(e){const t=mp(e.firestore);return function(s,u,l,m,w,b,A){let O;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ie(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){iR(A,b);const B=[];for(const K of A)B.push(rR(m,s,K));O={arrayValue:{values:B}}}else O=rR(m,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||iR(A,b),O=QM(l,"where",A,"in"===b||"not-in"===b);return qt.create(w,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ry extends VS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ry(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)sR(u,m),u=LI(u,m)}(e._query,t),new Si(e.firestore,e.converter,LI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class US extends w0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new US(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ie(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new rh(s,u);return function(m,w){if(null===Kv(m)){const b=Lm(m);null!==b&&oR(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new uc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bD extends w0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new bD(e,t,r)}_apply(e){return new Si(e.firestore,e.converter,Zv(e._query,this._limit,this._limitType))}}class CD extends w0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new CD(e,t,r)}_apply(e){const t=nR(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(s=t,new uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class TD extends w0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new TD(e,t,r)}_apply(e){const t=nR(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(s=t,new uc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function nR(n,e,t,r){if(t[0]=(0,rn.m9)(t[0]),t[0]instanceof v0)return function(s,u,l,m,w){if(!m)throw new Ie(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of ih(s))if(A.field.isKeyField())b.push(Ol(u,m.key));else{const O=m.data.field(A.field);if(Am(O))throw new Ie(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const B=A.field.canonicalString();throw new Ie(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}b.push(O)}return new sc(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=mp(n.firestore);return function(u,l,m,w,b,A){const O=u.explicitOrderBy;if(b.length>O.length)throw new Ie(J.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let K=0;K<b.length;K++){const Q=b[K];if(O[K].field.isKeyField()){if("string"!=typeof Q)throw new Ie(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Q}`);if(!FI(u)&&-1!==Q.indexOf("/"))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Q}' contains a slash.`);const Re=u.path.child(Jt.fromString(Q));if(!ze.isDocumentKey(Re))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const je=new ze(Re);B.push(Ol(l,je))}else{const Re=QM(m,w,Q);B.push(Re)}}return new sc(B,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function rR(n,e,t){if("string"==typeof(t=(0,rn.m9)(t))){if(""===t)throw new Ie(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FI(e)&&-1!==t.indexOf("/"))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!ze.isDocumentKey(r))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ol(n,new ze(r))}if(t instanceof Wn)return Ol(n,t._key);throw new Ie(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mD(t)}.`)}function iR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sR(n,e){if(e.isInequality()){const r=Lm(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=Kv(n);null!==u&&oR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ie(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function oR(n,e,t){if(!t.isEqual(e))throw new Ie(J.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class BS{convertValue(e,t="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return th(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new _D(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xm(e));default:return null}}convertTimestamp(e){const t=ta(e);return new Mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);dt(gx(r));const s=new xl(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return s.isEqual(t)||tr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function SD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Q1 extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class _p{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ul extends v0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Ul{data(e={}){return super.data(e)}}class vh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new _p(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new _p(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _p(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new _p(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:J1(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function J1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function uR(n,e){return n instanceof Ul&&e instanceof Ul?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vh&&e instanceof vh&&n._firestore===e._firestore&&OS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class wh extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new gc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function cR(n,e,t){n=nn(n,Wn);const r=nn(n.firestore,Kn),s=SD(n.converter,e,t);return iy(r,[wD(mp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,kn.none())])}function lR(n,e,t,...r){n=nn(n,Wn);const s=nn(n.firestore,Kn),u=mp(s);let l;return l="string"==typeof(e=(0,rn.m9)(e))||e instanceof Vl?FS(u,"updateDoc",n._key,e,t,r):kS(u,"updateDoc",n._key,e),iy(s,[l.toMutation(n._key,kn.exists(!0))])}function dR(n,...e){var t,r,s;n=(0,rn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||NS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(NS(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let w,b,A;if(n instanceof Wn)b=nn(n.firestore,Kn),A=Pl(n._key.path),w={next:O=>{e[l]&&e[l](jS(b,n,O))},error:e[l+1],complete:e[l+2]};else{const O=nn(n,Si);b=nn(O.firestore,Kn),A=O._query;const B=new wh(b);w={next:K=>{e[l]&&e[l](new vh(b,B,O,K))},error:e[l+1],complete:e[l+2]},tR(n._query)}return function(O,B,K,Q){const Re=new fD(Q),je=new YT(B,Re,K);return O.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return zT(yield ny(O),je)})),()=>{Re.Pc(),O.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return WT(yield ny(O),je)}))}}(Ar(b),A,m,w)}function iy(n,e){return function(t,r){const s=new br;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function KN(n,e,t){return tS.apply(this,arguments)}(yield xS(t),r,s)})),s.promise}(Ar(n),e)}function jS(n,e,t){const r=t.docs.get(e._key),s=new wh(n);return new Ul(n,s,e._key,r,new _p(t.hasPendingWrites,t.fromCache),e.converter)}const lP={maxAttempts:5};class hR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=mp(e)}set(e,t,r){this._verifyNotCommitted();const s=Eh(e,this._firestore),u=SD(s.converter,t,r),l=wD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,kn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Eh(e,this._firestore);let l;return l="string"==typeof(t=(0,rn.m9)(t))||t instanceof Vl?FS(this._dataReader,"WriteBatch.update",u._key,t,r,s):kS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eh(e,this._firestore);return this._mutations=this._mutations.concat(new dh(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(n,e){if((n=(0,rn.m9)(n)).firestore!==e)throw new Ie(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mp(e)}get(e){const t=Eh(e,this._firestore),r=new Q1(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return nt();const u=s[0];if(u.isFoundDocument())return new v0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new v0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const s=Eh(e,this._firestore),u=SD(s.converter,t,r),l=wD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Eh(e,this._firestore);let l;return l="string"==typeof(t=(0,rn.m9)(t))||t instanceof Vl?FS(this._dataReader,"Transaction.update",u._key,t,r,s):kS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Eh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Eh(e,this._firestore),r=new wh(this._firestore);return super.get(e).then(s=>new Ul(this._firestore,r,t._key,s._document,new _p(!1,!1),t.converter))}}!function(n,e=!0){Tl=tu.SDK_VERSION,(0,tu._registerComponent)(new Zu.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Kn(new yI(t.getProvider("auth-internal")),new Av(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ie(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xl(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,tu.registerVersion)(pI,"3.8.4",n),(0,tu.registerVersion)(pI,"3.8.4","esm2017")}();function $S(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function pR(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function gR(){if(!function TI(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}class D0{constructor(e){this._delegate=e}static fromBase64String(e){return gR(),new D0(gc.fromBase64String(e))}static fromUint8Array(e){return pR(),new D0(gc.fromUint8Array(e))}toBase64(){return gR(),this._delegate.toBase64()}toUint8Array(){return pR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HS(n){return function wP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class EP{enableIndexedDbPersistence(e,t){return function T1(n,e){WM(n=nn(n,Kn));const t=Ar(n),r=n._freezeSettings(),s=new IS;return qM(t,s,new AM(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function S1(n){WM(n=nn(n,Kn));const e=Ar(n),t=n._freezeSettings(),r=new IS;return qM(e,r,new l1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function A1(n){if(n._initialized&&!n._terminated)throw new Ie(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!mo.C())return Promise.resolve();const s=r+"main";yield mo.delete(s)}),function(r){return t.apply(this,arguments)})(gT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function $M(n,e,t,r={}){var s;const u=(n=nn(n,g0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Sl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Vr.MOCK_USER;else{l=(0,rn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ie(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vr(w)}n._authCredentials=new WA(new mI(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function M1(n){return function g1(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield OM(n),t=yield AS(n);return e.setNetworkEnabled(!0),function(r){const s=Ke(r);return s.mu.delete(0),f0(s)}(t)}))}(Ar(n=nn(n,Kn)))}(this._delegate)}disableNetwork(){return function R1(n){return function m1(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield OM(n),t=yield AS(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(s){const u=Ke(s);u.mu.add(0),yield Zm(u),u.pu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Ar(n=nn(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function x1(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function XN(n,e){return oS.apply(this,arguments)}(yield xS(e),t)})),t.promise}(Ar(n=nn(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function uP(n,e){return function v1(n,e){const t=new fD(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield ny(n),s=t,Ke(r).vu.add(s),void s.next();var r,s})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield ny(n),s=t,void Ke(r).vu.delete(s);var r,s}))}}(Ar(n=nn(n,Kn)),NS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sy(this,HM(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new oa(this,yD(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function I1(n,e){if(n=nn(n,g0),RS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new uc(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function hP(n,e,t){n=nn(n,Kn);const r=Object.assign(Object.assign({},lP),t);return function(s){if(s.maxAttempts<1)throw new Ie(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new br;return s.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const w=yield function NM(n){return pD(n).then(e=>e.datastore)}(s);new f1(s.asyncQueue,w,l,u,m).run()})),m.promise}(Ar(n),s=>e(new dP(n,s)),r)}(this._delegate,t=>e(new yR(this,t)))}batch(){return Ar(this._delegate),new _R(new hR(this._delegate,e=>iy(this._delegate,e)))}loadBundle(e){return function O1(n,e){const t=Ar(n=nn(n,Kn)),r=new b1;return function w1(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return xM(w,b);if(w instanceof ArrayBuffer)return xM(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new d1(w,l);var w}(t,h0(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function c1(n,e,t){const r=Ke(n);var s;(s=(0,he.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(B,K){const Q=Ke(B),Re=Sr(K.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",je=>Q.Os.getBundleMetadata(je,K.id)).then(je=>!!je&&je.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(B=w).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);m._updateProgress(_M(w));const b=new $N(w,u.localStore,l.Tt);let A=yield l.yc();for(;A;){const B=yield b.Bu(A);B&&m._updateProgress(B),A=yield l.yc()}const O=yield b.complete();return yield Ll(u,O.Uu,void 0),yield function(B,K){const Q=Ke(B);return Q.persistence.runTransaction("Save bundle","readwrite",Re=>Q.Os.saveBundleMetadata(Re,K))}(u.localStore,w),m._completeWith(O.progress),Promise.resolve(O.qu)}catch(w){return Sl("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var B}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield xS(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function N1(n,e){return function E1(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const s=Ke(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Os.getNamedQuery(u,r))}(yield gD(n),e)}))}(Ar(n=nn(n,Kn)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class AD extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new D0(new gc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return oa.forKey(t,this.firestore,null)}}class yR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}get(e){const t=wp(e);return this._delegate.get(t).then(r=>new b0(this._firestore,new Ul(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=wp(e);return r?($S("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}}class _R{constructor(e){this._delegate=e}set(e,t,r){const s=wp(e);return r?($S("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=wp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=wp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new C0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new vp(e,new AD(e),t),s.set(t,u)),u}}vp.INSTANCES=new WeakMap;class oa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new oa(t,new Wn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new oa(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sy(this.firestore,HM(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rn.m9)(e))instanceof Wn&&GM(this._delegate,e)}set(e,t){t=$S("DocumentReference.set",t);try{return t?cR(this._delegate,e,t):cR(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?lR(this._delegate,e):lR(this._delegate,e,t,...r)}catch(s){throw hs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function oP(n){return iy(nn(n.firestore,Kn),[new dh(n._key,kn.none())])}(this._delegate)}onSnapshot(...e){const t=vR(e),r=wR(e,s=>new b0(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return dR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function tP(n){n=nn(n,Wn);const e=nn(n.firestore,Kn),t=Ar(e),r=new wh(e);return function y1(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(s,u,l){try{const m=yield function(w,b){const A=Ke(w);return A.persistence.runTransaction("read document","readonly",O=>A.localDocuments.getDocument(O,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ie(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Xm(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield gD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Ul(e,r,n._key,s,new _p(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function nP(n){n=nn(n,Wn);const e=nn(n.firestore,Kn);return PM(Ar(e),n._key,{source:"server"}).then(t=>jS(e,n,t))}(this._delegate):function eP(n){n=nn(n,Wn);const e=nn(n.firestore,Kn);return PM(Ar(e),n._key).then(t=>jS(e,n,t))}(this._delegate),t.then(r=>new b0(this.firestore,new Ul(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new oa(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function vR(n){for(const e of n)if("object"==typeof e&&!HS(e))return e;return{}}function wR(n,e){var t,r;let s;return s=HS(n[0])?n[0]:HS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class b0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new oa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uR(this._delegate,e._delegate)}}class C0 extends b0{data(e){const t=this._delegate.data(e);return function gI(n,e){n||nt()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AD(e)}where(e,t,r){try{return new fs(this.firestore,_h(this._delegate,function H1(n,e,t){const r=e,s=DD("where",n);return E0._create(s,r,t)}(e,t,r)))}catch(s){throw hs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,_h(this._delegate,function G1(n,e="asc"){const t=e,r=DD("orderBy",n);return US._create(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,_h(this._delegate,function z1(n){return BM("limit",n),bD._create("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,_h(this._delegate,function q1(n){return BM("limitToLast",n),bD._create("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,_h(this._delegate,function W1(...n){return CD._create("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,_h(this._delegate,function K1(...n){return CD._create("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,_h(this._delegate,function Z1(...n){return TD._create("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,_h(this._delegate,function Y1(...n){return TD._create("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return OS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function iP(n){n=nn(n,Si);const e=nn(n.firestore,Kn),t=Ar(e),r=new wh(e);return function _1(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(s,u,l){try{const m=yield aD(s,u,!0),w=new EM(u,m.Yi),b=w.Hu(m.documents),A=w.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const w=Xm(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield gD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new vh(e,r,n,s))}(this._delegate):"server"===e?.source?function sP(n){n=nn(n,Si);const e=nn(n.firestore,Kn),t=Ar(e),r=new wh(e);return kM(t,n._query,{source:"server"}).then(s=>new vh(e,r,n,s))}(this._delegate):function rP(n){n=nn(n,Si);const e=nn(n.firestore,Kn),t=Ar(e),r=new wh(e);return tR(n._query),kM(t,n._query).then(s=>new vh(e,r,n,s))}(this._delegate),t.then(r=>new GS(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=vR(e),r=wR(e,s=>new GS(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return dR(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}class DP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new C0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new C0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new C0(this._firestore,r))})}isEqual(e){return uR(this._delegate,e._delegate)}}class sy extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new oa(this.firestore,e):null}doc(e){try{return new oa(this.firestore,void 0===e?yD(this._delegate):yD(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function aP(n,e){const t=nn(n.firestore,Kn),r=yD(n),s=SD(n.converter,e);return iy(t,[wD(mp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new oa(this.firestore,t))}isEqual(e){return GM(this._delegate,e._delegate)}withConverter(e){return new sy(this.firestore,this._delegate.withConverter(e?vp.getInstance(this.firestore,e):null))}}function wp(n){return nn(n,Wn)}class zS{constructor(...e){this._delegate=new Vl(...e)}static documentId(){return new zS(Gn.keyField().canonicalString())}isEqual(e){return(e=(0,rn.m9)(e))instanceof Vl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function pP(){return new PS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ep(e)}static delete(){const e=function fP(){return new y0("deleteField")}();return e._methodName="FieldValue.delete",new Ep(e)}static arrayUnion(...e){const t=function gP(...n){return new V1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ep(t)}static arrayRemove(...e){const t=function mP(...n){return new U1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ep(t)}static increment(e){const t=function yP(n){return new B1("increment",n)}(e);return t._methodName="FieldValue.increment",new Ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bP={Firestore:mR,GeoPoint:_D,Timestamp:Mn,Blob:D0,Transaction:yR,WriteBatch:_R,DocumentReference:oa,DocumentSnapshot:b0,Query:fs,QueryDocumentSnapshot:C0,QuerySnapshot:GS,CollectionReference:sy,FieldPath:zS,FieldValue:Ep,setLogLevel:function IP(n){!function xC(n){ea.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function TP(n){(function CP(n,e){n.INTERNAL.registerComponent(new Zu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},bP)))})(n,(e,t)=>new mR(e,t,new EP)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(tC.Z);var SP=F(6451),xD=F(5363),AP=F(6063);class xP extends Ei.x{constructor(e=1/0,t=1/0,r=AP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var MP=F(3099);function ER(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,MP.B)({connector:()=>new xP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function IR(n,e){return(0,Vo.m)(e)?An(()=>n,e):An(()=>n)}var qS=F(9468),T0=F(3069),Ip=F(2011);F(259);const KS=new Map,bR={activated:!1,tokenObservers:[]},kP={initialized:!1,enabled:!1};function Ai(n){return KS.get(n)||Object.assign({},bR)}function RD(){return kP}const ZS="https://content-firebaseappcheck.googleapis.com/v1",UP="exchangeDebugToken",CR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class jP{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new rn.BH,yield function $P(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XS(){return XS=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const O=yield s.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(O){throw ps.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==l.status)throw ps.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(O){throw ps.create("fetch-parse-error",{originalErrorMessage:O?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),XS.apply(this,arguments)}const WP="firebase-app-check-database",KP=1,S0="firebase-app-check-store";let PD=null;function JS(){return JS=(0,he.Z)(function*(n,e){const r=(yield function AR(){return PD||(PD=new Promise((n,e)=>{try{const t=indexedDB.open(WP,KP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(ps.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(t){e(ps.create("storage-open",{originalErrorMessage:t?.message}))}}),PD)}()).transaction(S0,"readwrite"),u=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(ps.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),JS.apply(this,arguments)}const A0=new Yu.Yd("@firebase/app-check");function nA(n,e){return(0,rn.hl)()?function YP(n,e){return function xR(n,e){return JS.apply(this,arguments)}(function RR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{A0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iA(){return iA=(0,he.Z)(function*(){const n=RD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),iA.apply(this,arguments)}const nk={error:"UNKNOWN_ERROR"};function rk(n){return rn.US.encodeString(JSON.stringify(n),!1)}function kD(n){return sA.apply(this,arguments)}function sA(){return sA=(0,he.Z)(function*(n,e=!1){const t=n.app;!function TR(n){if(!Ai(n).activated)throw ps.create("use-before-activation",{appName:n.name})}(t);const r=Ai(t);let u,s=r.token;if(s&&!oy(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(oy(w)?s=w:yield nA(t,void 0))}if(!e&&s&&oy(s))return{token:s.token};let m,l=!1;if(function OR(){return RD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function QS(n,e){return XS.apply(this,arguments)}(function qP(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${ZS}/projects/${t}/apps/${r}:${UP}?key=${s}`,body:{debug_token:e}}}(t,yield function NR(){return iA.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield nA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Ai(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?A0.warn(w.message):A0.error(w),u=w}return s?u?m=oy(s)?{token:s.token,internalError:u}:FR(u):(m={token:s.token},r.token=s,yield nA(t,s)):m=FR(u),l&&function kR(n,e){const t=Ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),sA.apply(this,arguments)}function aA(n,e){const t=Ai(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function PR(n){const{app:e}=n,t=Ai(e);let r=t.tokenRefresher;r||(r=function ik(n){const{app:e}=n;return new jP((0,he.Z)(function*(){let r;if(r=Ai(e).token?yield kD(n,!0):yield kD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},CR.RETRIAL_MIN_WAIT,CR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oy(n){return n.expireTimeMillis-Date.now()>0}function FR(n){return{token:rk(nk),error:n}}class sk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ai(this.app);for(const t of e)aA(this.app,t.next);return Promise.resolve()}}const GR="app-check-internal";!function vk(){(0,tu._registerComponent)(new Zu.wA("app-check",n=>function ok(n,e){return new sk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(GR).initialize()})),(0,tu._registerComponent)(new Zu.wA(GR,n=>function ak(n){return{getToken:e=>kD(n,e),addTokenListener:e=>function oA(n,e,t,r){const{app:s}=n,u=Ai(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&oy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),PR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>PR(n))}(n,"INTERNAL",e),removeTokenListener:e=>aA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tu.registerVersion)("@firebase/app-check","0.6.4")}();class qR{constructor(){return(0,T0.vb)("app-check")}}typeof window<"u"&&window;const Ck=new f.OlP("angularfire2.auth.use-emulator"),Tk=new f.OlP("angularfire2.auth.settings"),Sk=new f.OlP("angularfire2.auth.tenant-id"),Ak=new f.OlP("angularfire2.auth.langugage-code"),xk=new f.OlP("angularfire2.auth.use-device-language"),Mk=new f.OlP("angularfire.auth.persistence");let hA=(()=>{class n{constructor(t,r,s,u,l,m,w,b,A,O,B,K){const Q=new Ei.x,Re=at(void 0).pipe((0,xD.Q)(l.outsideAngular),An(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4217)))),(0,Mt.U)(()=>(0,Ip.on)(t,u,r)),(0,Mt.U)(je=>((n,e,t,r,s,u,l,m)=>(0,Ip.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))w.settings[b]=A;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]))(je,u,m,b,A,O,w,B)),ER({bufferSize:1,refCount:!1}));if(function Tc(n){return"server"===n}(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{Re.pipe(Uo()).subscribe();const bt=Re.pipe(An(Gt=>Gt.getRedirectResult().then(Wt=>Wt,()=>null)),T0.iC,ER({bufferSize:1,refCount:!1})),$t=Re.pipe(An(Gt=>new Kr.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Gt.onAuthStateChanged(en=>Wt.next(en),en=>Wt.error(en),()=>Wt.complete()))})))),zt=Re.pipe(An(Gt=>new Kr.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Gt.onIdTokenChanged(en=>Wt.next(en),en=>Wt.error(en),()=>Wt.complete()))}))));this.authState=bt.pipe(IR($t),(0,qS.R)(l.outsideAngular),(0,xD.Q)(l.insideAngular)),this.user=bt.pipe(IR(zt),(0,qS.R)(l.outsideAngular),(0,xD.Q)(l.insideAngular)),this.idToken=this.user.pipe(An(Gt=>Gt?(0,Nn.D)(Gt.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(An(Gt=>Gt?(0,Nn.D)(Gt.getIdTokenResult()):at(null))),this.credential=(0,SP.T)(bt,Q,this.authState.pipe(Li(Gt=>!Gt))).pipe((0,Mt.U)(Gt=>Gt?.user?Gt:null),(0,qS.R)(l.outsideAngular),(0,xD.Q)(l.insideAngular))}return(0,Ip.pX)(this,Re,u,{spy:{apply:(je,bt,$t)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&$t.then(zt=>Q.next(zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ip.Dh),f.LFG(Ip.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(T0.HU),f.LFG(Ck,8),f.LFG(Tk,8),f.LFG(Sk,8),f.LFG(Ak,8),f.LFG(xk,8),f.LFG(Mk,8),f.LFG(qR,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ok=(()=>{class n{constructor(){gE.Z.registerVersion("angularfire",T0.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[hA]}),n})();class LD{}class fA{}class Bl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(m=>-1===u.indexOf(m)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Nk{encodeKey(e){return WR(e)}encodeValue(e){return WR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const kk=/%(\d[a-f0-9])/gi,Fk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function WR(n){return encodeURIComponent(n).replace(kk,(e,t)=>Fk[t]??e)}function VD(n){return`${n}`}class Ih{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Nk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Pk(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,m]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],w=t.get(l)||[];w.push(m),t.set(l,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(VD):[VD(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ih({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(VD(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Lk{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function KR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ZR(n){return typeof Blob<"u"&&n instanceof Blob}function YR(n){return typeof FormData<"u"&&n instanceof FormData}class x0{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Vk(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Bl),this.context||(this.context=new Lk),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+l}}else this.params=new Ih,this.urlWithParams=t}serializeBody(){return null===this.body?null:KR(this.body)||ZR(this.body)||YR(this.body)||function Uk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ih?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YR(this.body)?null:ZR(this.body)?this.body.type||null:KR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ih?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,b=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((O,B)=>O.set(B,e.setHeaders[B]),w)),e.setParams&&(b=Object.keys(e.setParams).reduce((O,B)=>O.set(B,e.setParams[B]),b)),new x0(t,r,u,{params:b,headers:w,context:A,reportProgress:m,responseType:s,withCredentials:l})}}var Br=(()=>((Br=Br||{})[Br.Sent=0]="Sent",Br[Br.UploadProgress=1]="UploadProgress",Br[Br.ResponseHeader=2]="ResponseHeader",Br[Br.DownloadProgress=3]="DownloadProgress",Br[Br.Response=4]="Response",Br[Br.User=5]="User",Br))();class pA{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class gA extends pA{constructor(e={}){super(e),this.type=Br.ResponseHeader}clone(e={}){return new gA({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class UD extends pA{constructor(e={}){super(e),this.type=Br.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new UD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class QR extends pA{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function mA(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let XR=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof x0)u=t;else{let w,b;w=s.headers instanceof Bl?s.headers:new Bl(s.headers),s.params&&(b=s.params instanceof Ih?s.params:new Ih({fromObject:s.params})),u=new x0(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=at(u).pipe(Ss(w=>this.handler.handle(w)));if(t instanceof x0||"events"===s.observe)return l;const m=l.pipe(Li(w=>w instanceof UD));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,Mt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,Mt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,Mt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,Mt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ih).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,mA(s,r))}post(t,r,s={}){return this.request("POST",t,mA(s,r))}put(t,r,s={}){return this.request("PUT",t,mA(s,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(LD))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function JR(n,e){return e(n)}function Bk(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const $k=new f.OlP("HTTP_INTERCEPTORS"),M0=new f.OlP("HTTP_INTERCEPTOR_FNS");function Hk(){let n=null;return(e,t)=>(null===n&&(n=((0,f.f3M)($k,{optional:!0})??[]).reduceRight(Bk,JR)),n(e,t))}let eO=(()=>{class n extends LD{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(M0)));this.chain=r.reduceRight((s,u)=>function jk(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),JR)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fA),f.LFG(f.lqb))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wk=/^\)\]\}',?\n/;let nO=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Kr.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((K,Q)=>s.setRequestHeader(K,Q.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const K=t.detectContentTypeHeader();null!==K&&s.setRequestHeader("Content-Type",K)}if(t.responseType){const K=t.responseType.toLowerCase();s.responseType="json"!==K?K:"text"}const u=t.serializeBody();let l=null;const m=()=>{if(null!==l)return l;const K=s.statusText||"OK",Q=new Bl(s.getAllResponseHeaders()),Re=function Kk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new gA({headers:Q,status:s.status,statusText:K,url:Re}),l},w=()=>{let{headers:K,status:Q,statusText:Re,url:je}=m(),bt=null;204!==Q&&(bt=typeof s.response>"u"?s.responseText:s.response),0===Q&&(Q=bt?200:0);let $t=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof bt){const zt=bt;bt=bt.replace(Wk,"");try{bt=""!==bt?JSON.parse(bt):null}catch(Gt){bt=zt,$t&&($t=!1,bt={error:Gt,text:bt})}}$t?(r.next(new UD({body:bt,headers:K,status:Q,statusText:Re,url:je||void 0})),r.complete()):r.error(new QR({error:bt,headers:K,status:Q,statusText:Re,url:je||void 0}))},b=K=>{const{url:Q}=m(),Re=new QR({error:K,status:s.status||0,statusText:s.statusText||"Unknown Error",url:Q||void 0});r.error(Re)};let A=!1;const O=K=>{A||(r.next(m()),A=!0);let Q={type:Br.DownloadProgress,loaded:K.loaded};K.lengthComputable&&(Q.total=K.total),"text"===t.responseType&&s.responseText&&(Q.partialText=s.responseText),r.next(Q)},B=K=>{let Q={type:Br.UploadProgress,loaded:K.loaded};K.lengthComputable&&(Q.total=K.total),r.next(Q)};return s.addEventListener("load",w),s.addEventListener("error",b),s.addEventListener("timeout",b),s.addEventListener("abort",b),t.reportProgress&&(s.addEventListener("progress",O),null!==u&&s.upload&&s.upload.addEventListener("progress",B)),s.send(u),r.next({type:Br.Sent}),()=>{s.removeEventListener("error",b),s.removeEventListener("abort",b),s.removeEventListener("load",w),s.removeEventListener("timeout",b),t.reportProgress&&(s.removeEventListener("progress",O),null!==u&&s.upload&&s.upload.removeEventListener("progress",B)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Sc))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const yA=new f.OlP("XSRF_ENABLED"),rO=new f.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),iO=new f.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class sO{}let Qk=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ar(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(f.Lbi),f.LFG(rO))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Xk(n,e){const t=n.url.toLowerCase();if(!(0,f.f3M)(yA)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,f.f3M)(sO).getToken(),s=(0,f.f3M)(iO);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var xr=(()=>((xr=xr||{})[xr.Interceptors=0]="Interceptors",xr[xr.LegacyInterceptors=1]="LegacyInterceptors",xr[xr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",xr[xr.NoXsrfProtection=3]="NoXsrfProtection",xr[xr.JsonpSupport=4]="JsonpSupport",xr[xr.RequestsMadeViaParent=5]="RequestsMadeViaParent",xr))();function ay(n,e){return{\u0275kind:n,\u0275providers:e}}function Jk(...n){const e=[XR,nO,eO,{provide:LD,useExisting:eO},{provide:fA,useExisting:nO},{provide:M0,useValue:Xk,multi:!0},{provide:yA,useValue:!0},{provide:sO,useClass:Qk}];for(const t of n)e.push(...t.\u0275providers);return(0,f.MR2)(e)}const oO=new f.OlP("LEGACY_INTERCEPTOR_FN");let tF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Jk(ay(xr.LegacyInterceptors,[{provide:oO,useFactory:Hk},{provide:M0,useExisting:oO,multi:!0}]))]}),n})();class Dp{constructor(e,t){this.afAuth=e,this.http=t,this.result=new Ei.x,this.$result=this.result.asObservable()}searchGoogle(e){this.http.get(`https://www.googleapis.com/customsearch/v1?key=AIzaSyCDHzV3Hn92XqAcQlaVljD8jY_laPQe0W0&cx=dd0eaa07daad14445&q=${e}`).subscribe(t=>this.updateResult(t))}updateResult(e){this.result.next(e)}googleAuthentication(){return this.afAuth.signInWithRedirect(new gE.Z.auth.GoogleAuthProvider)}authState(){return this.afAuth.authState}signOut(){return this.afAuth.signOut()}}function nF(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",7),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.googleAuth())}),f._uU(1,"Sign In"),f.qZA()}}function rF(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"img",8),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.signOut())}),f.qZA()}if(2&n){const t=f.oxw();f.Q6J("src",t.image,f.LSH)}}Dp.\u0275fac=function(e){return new(e||Dp)(f.LFG(hA),f.LFG(XR))},Dp.\u0275prov=f.Yz7({token:Dp,factory:Dp.\u0275fac,providedIn:"root"});class R0{constructor(e){this.google=e,this.loggedIn=!1}ngOnInit(){this.checkIfLoggedIn()}googleAuth(){this.google.googleAuthentication()}checkIfLoggedIn(){this.google.authState().subscribe(e=>{this.loggedIn=!!e})}signOut(){this.google.signOut()}}R0.\u0275fac=function(e){return new(e||R0)(f.Y36(Dp))},R0.\u0275cmp=f.Xpm({type:R0,selectors:[["app-header"]],decls:10,vars:2,consts:[[1,"home__header"],[1,"home__headerLeft"],[1,"home__headerRight"],["href","#"],[1,"gridIcon"],[3,"click",4,"ngIf"],["alt","Photo","class","photo",3,"src","click",4,"ngIf"],[3,"click"],["alt","Photo",1,"photo",3,"src","click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f._UZ(1,"div",1),f.TgZ(2,"div",2)(3,"a",3),f._uU(4,"Gmail"),f.qZA(),f.TgZ(5,"a",3),f._uU(6,"Images"),f.qZA(),f._UZ(7,"div",4),f.YNc(8,nF,2,0,"button",5),f.YNc(9,rF,1,1,"img",6),f.qZA()()),2&e&&(f.xp6(8),f.Q6J("ngIf",!t.loggedIn),f.xp6(1),f.Q6J("ngIf",t.loggedIn))},dependencies:[ys],styles:["body[_ngcontent-%COMP%], .home[_ngcontent-%COMP%]{margin:0;padding:0}.home__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 30px}.home__header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:20px;text-decoration:inherit;font-size:15px;color:#000000de}.home__header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.home__headerRight[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:13vw;align-items:center}.home__headerRight[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:20px}.photo[_ngcontent-%COMP%]{margin-left:20px;height:32px;width:32px;background-size:32px 32px;border-radius:32px;object-fit:cover}.home__headerRight[_ngcontent-%COMP%]   .gridIcon[_ngcontent-%COMP%]{background-position:-132px -38px;opacity:.55;background-size:528px 68px;display:inline-block;outline:none;vertical-align:middle;border-radius:2px;box-sizing:border-box;height:30px;width:30px;color:#000;cursor:pointer;text-decoration:none;background-image:url(https://ssl.gstatic.com/gb/images/i1_1967ca6a.png)}.home__header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;margin-left:10px;color:#fff;cursor:default;text-decoration:none;border:1px solid #4285f4;font-weight:700;outline:none;background:#4285f4;background:linear-gradient(top,#4387fd,#4683ea);display:inline-block;line-height:28px;padding:0 12px;border-radius:3px;font-family:arial,sans-serif}"]});class O0{}O0.\u0275fac=function(e){return new(e||O0)},O0.\u0275cmp=f.Xpm({type:O0,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"footer"],[1,"country"],[1,"text"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1),f._uU(2,"Ebi in India"),f.qZA(),f.TgZ(3,"a",2),f._uU(4,"Advertising"),f.qZA(),f.TgZ(5,"a",2),f._uU(6,"Business"),f.qZA(),f.TgZ(7,"a",2),f._uU(8,"About"),f.qZA(),f.TgZ(9,"a",2),f._uU(10,"How Search works"),f.qZA()())},styles:[".footer[_ngcontent-%COMP%]{padding-left:27px;background:#f2f2f2;line-height:40px;min-width:980px;border-top:1px solid #e4e4e4;min-width:400px;bottom:0;left:0;position:absolute;right:0}.footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px;text-decoration:none;white-space:nowrap;color:#0000008a;margin-right:20px}.footer[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:hover{text-decoration:underline}.country[_ngcontent-%COMP%]{font-size:15px;text-align:left;color:#0000008a;bottom:100%;position:absolute;margin-top:30px}"]});class N0{}function iF(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",42),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.googleAuth())}),f._uU(1," Sign In "),f.qZA()}}function sF(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"img",43),f.NdJ("click",function(){f.CHM(t);const s=f.oxw();return f.KtG(s.signOut())}),f.qZA()}if(2&n){const t=f.oxw();f.Q6J("src",t.image,f.LSH)}}function oF(n,e){if(1&n&&(f.TgZ(0,"div",44)(1,"cite",45),f._uU(2),f.qZA(),f._UZ(3,"p",46),f.TgZ(4,"a",47),f._uU(5),f.qZA(),f.TgZ(6,"div",48),f._uU(7),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.displayLink),f.xp6(2),f.s9C("href",t.formattedUrl,f.LSH),f.xp6(1),f.Oqu(t.title),f.xp6(2),f.hij(" ",t.snippet," ")}}N0.\u0275fac=function(e){return new(e||N0)},N0.\u0275cmp=f.Xpm({type:N0,selectors:[["app-home"]],decls:3,vars:0,template:function(e,t){1&e&&f._UZ(0,"app-header")(1,"app-search")(2,"app-footer")},dependencies:[Hd,R0,O0]});class P0{constructor(e,t){this.route=e,this.google=t,this.loggedIn=!1,this.route.queryParams.subscribe(r=>this.searchTerm=r.term),this.googleSearch(this.searchTerm)}ngOnInit(){this.checkIfLoggedIn(),this.google.$result.subscribe(e=>this.results=e)}googleAuth(){this.google.googleAuthentication()}checkIfLoggedIn(){this.google.authState().subscribe(e=>{this.loggedIn=!!e})}signOut(){this.google.signOut()}googleSearch(e){this.google.searchGoogle(e)}search(e){13===e.keyCode&&this.google.searchGoogle(this.searchTerm)}}P0.\u0275fac=function(e){return new(e||P0)(f.Y36(Er),f.Y36(Dp))},P0.\u0275cmp=f.Xpm({type:P0,selectors:[["app-result"]],decls:65,vars:7,consts:[[1,"searchPage"],[1,"searchPage__header"],["src","./assets/a2.png","alt","Google","height","30","width","92",1,"searchPage__logo"],[1,"home__inputContainer"],[1,"search"],[1,"search__input"],["type","text",3,"ngModel","value","ngModelChange","keydown"],["focusable","false","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"search__inputIcon",3,"click"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"],[1,"divider"],["focusable","false","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"search__inputIcon"],["d","m12 15c1.66 0 3-1.31 3-2.97v-7.02c0-1.66-1.34-3.01-3-3.01s-3 1.34-3 3.01v7.02c0 1.66 1.34 2.97 3 2.97z","fill","#4285f4"],["d","m11 18.08h2v3.92h-2z","fill","#34a853"],["d","m7.05 16.87c-1.27-1.33-2.05-2.83-2.05-4.87h2c0 1.45 0.56 2.42 1.47 3.38v0.32l-1.15 1.18z","fill","#f4b400"],["d","m12 16.93a4.97 5.25 0 0 1 -3.54 -1.55l-1.41 1.49c1.26 1.34 3.02 2.13 4.95 2.13 3.87 0 6.99-2.92 6.99-7h-1.99c0 2.92-2.24 4.93-5 4.93z","fill","#ea4335"],["focusable","false","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"search__inputIcon","search-icon"],["d","M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"],[1,"meta"],[1,"grid-icon"],["type","button","class","sign-button",3,"click",4,"ngIf"],["alt","Photo","class","photo",3,"src","click",4,"ngIf"],[1,"searchpage__options"],[1,"searchpage__optionsLeft"],[1,"searchpage__optionSelected"],["href","#"],["focusable","false","viewBox","0 0 24 24"],["fill","#34a853","d","M10 2v2a6 6 0 0 1 6 6h2a8 8 0 0 0-8-8"],["fill","#ea4335","d","M10 4V2a8 8 0 0 0-8 8h2c0-3.3 2.7-6 6-6"],["fill","#fbbc04","d","M4 10H2a8 8 0 0 0 8 8v-2c-3.3 0-6-2.69-6-6"],["fill","#4285f4","d","M22 20.59l-5.69-5.69A7.96 7.96 0 0 0 18 10h-2a6 6 0 0 1-6 6v2c1.85 0 3.52-.64 4.88-1.68l5.69 5.69L22 20.59"],[1,"text"],[1,"searchpage__option"],["d","M10 16.5l6-4.5-6-4.5v9zM5 20h14a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1zm14.5 2H5a3 3 0 0 1-3-3V4.4A2.4 2.4 0 0 1 4.4 2h15.2A2.4 2.4 0 0 1 22 4.4v15.1a2.5 2.5 0 0 1-2.5 2.5"],["d","M14 13l4 5H6l4-4 1.79 1.78L14 13zm-6.01-2.99A2 2 0 0 0 8 6a2 2 0 0 0-.01 4.01zM22 5v14a3 3 0 0 1-3 2.99H5c-1.64 0-3-1.36-3-3V5c0-1.64 1.36-3 3-3h14c1.65 0 3 1.36 3 3zm-2.01 0a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h7v-.01h7a1 1 0 0 0 1-1V5"],["d","M12 11h6v2h-6v-2zm-6 6h12v-2H6v2zm0-4h4V7H6v6zm16-7.22v12.44c0 1.54-1.34 2.78-3 2.78H5c-1.64 0-3-1.25-3-2.78V5.78C2 4.26 3.36 3 5 3h14c1.64 0 3 1.25 3 2.78zM19.99 12V5.78c0-.42-.46-.78-1-.78H5c-.54 0-1 .36-1 .78v12.44c0 .42.46.78 1 .78h14c.54 0 1-.36 1-.78V12zM12 9h6V7h-6v2"],["focusable","false","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],[1,"searchpage__optionsRight"],[1,"searchPage__results"],[1,"result_count"],[1,"searchPage__result"],["class","result",4,"ngFor","ngForOf"],["type","button",1,"sign-button",3,"click"],["alt","Photo",1,"photo",3,"src","click"],[1,"result"],[1,"result__title"],[1,"spacing"],[1,"searchPage__resultTitle",3,"href"],[1,"result__text"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"img",2),f.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6),f.NdJ("ngModelChange",function(s){return t.searchTerm=s})("keydown",function(s){return t.search(s)}),f.qZA(),f.O4$(),f.TgZ(7,"svg",7),f.NdJ("click",function(){return t.searchTerm=""}),f._UZ(8,"path",8),f.qZA(),f.kcU(),f._UZ(9,"span",9),f.O4$(),f.TgZ(10,"svg",10),f._UZ(11,"path",11)(12,"path",12)(13,"path",13)(14,"path",14),f.qZA(),f.TgZ(15,"svg",15),f._UZ(16,"path",16),f.qZA()(),f.kcU(),f.TgZ(17,"div",17),f._UZ(18,"div",18),f.YNc(19,iF,2,0,"button",19),f.YNc(20,sF,1,1,"img",20),f.qZA()()(),f.TgZ(21,"div",21)(22,"div",22)(23,"div",23)(24,"a",24),f.O4$(),f.TgZ(25,"svg",25),f._UZ(26,"path",26)(27,"path",27)(28,"path",28)(29,"path",29),f.qZA(),f.kcU(),f.TgZ(30,"span",30),f._uU(31," All "),f.qZA()()(),f.TgZ(32,"div",31)(33,"a",24),f.O4$(),f.TgZ(34,"svg",25),f._UZ(35,"path",32),f.qZA(),f._uU(36," Videos"),f.qZA()(),f.kcU(),f.TgZ(37,"div",31)(38,"a",24),f.O4$(),f.TgZ(39,"svg",25),f._UZ(40,"path",33),f.qZA(),f._uU(41," Images"),f.qZA()(),f.kcU(),f.TgZ(42,"div",31)(43,"a",24),f.O4$(),f.TgZ(44,"svg",25),f._UZ(45,"path",34),f.qZA(),f._uU(46," News"),f.qZA()(),f.kcU(),f.TgZ(47,"div",31)(48,"a",24),f.O4$(),f.TgZ(49,"svg",35),f._UZ(50,"path",36),f.qZA(),f._uU(51,"More"),f.qZA()()(),f.kcU(),f.TgZ(52,"div",37)(53,"div",31)(54,"div"),f._uU(55,"Settings"),f.qZA()(),f.TgZ(56,"div",31)(57,"div"),f._uU(58,"Tools"),f.qZA()()()()(),f.TgZ(59,"div",38)(60,"p",39),f._uU(61),f.qZA(),f._UZ(62,"br"),f.TgZ(63,"div",40),f.YNc(64,oF,8,4,"div",41),f.qZA()()()),2&e&&(f.xp6(6),f.s9C("value",t.searchTerm),f.Q6J("ngModel",t.searchTerm),f.xp6(13),f.Q6J("ngIf",!t.loggedIn),f.xp6(1),f.Q6J("ngIf",t.loggedIn),f.xp6(41),f.AsE(" About ",t.results.searchInformation.formattedTotalResults," results (",t.results.searchInformation.formattedSearchTime," seconds) "),f.xp6(3),f.Q6J("ngForOf",t.results.items))},dependencies:[pi,ys,Nd,vg,$d],styles:[".searchPage__logo[_ngcontent-%COMP%]{padding:4px 28px 0 2px;top:4px}.space[_ngcontent-%COMP%]{margin-top:-20px;background:#fff;height:69px;left:0;position:absolute;width:100%}.photo[_ngcontent-%COMP%]{margin-left:-120px;height:32px;width:32px;background-size:32px 32px;border-radius:32px;object-fit:cover;margin-top:-55px;vertical-align:middle}.searchPage__header[_ngcontent-%COMP%]{position:sticky;margin:20px auto 0 10px;width:100%;padding-left:20px;border-bottom:1px solid lightgrey;padding-bottom:3px}.search__input[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid lightgray;height:30px;padding:10px 20px;border-radius:999px;width:75vw;margin:-40px auto 0 130px;max-width:600px}.search__input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{flex:1;padding:10px 20px;border:none;font-size:medium}.search__input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus{outline-width:0}.search__inputIcon[_ngcontent-%COMP%]{height:24px}.divider[_ngcontent-%COMP%]{border-left:1px solid #dfe1e5;height:65%;margin-left:15px;margin-right:15px}.search-icon[_ngcontent-%COMP%]{margin-left:17px}.meta[_ngcontent-%COMP%]{float:right;margin-top:-40px}.sign-button[_ngcontent-%COMP%]{margin-left:-130px;margin-top:-30px;position:absolute;color:#fff;cursor:default;text-decoration:none;border:1px solid #4285f4;font-weight:700;outline:none;background:#4285f4;background:linear-gradient(top,#4387fd,#4683ea);display:inline-block;line-height:28px;padding:0 12px;border-radius:3px;font-family:arial,sans-serif}.grid-icon[_ngcontent-%COMP%]{margin-left:-170px;color:#000;cursor:pointer;background-position:-132px -38px;opacity:.55;background-size:528px 68px;outline:none;vertical-align:middle;border-radius:2px;box-sizing:border-box;height:30px;width:30px;text-decoration:none;background-image:url(https://ssl.gstatic.com/gb/images/i1_1967ca6a.png)}.searchpage__options[_ngcontent-%COMP%]{display:flex;align-items:center;color:gray;margin:unset;width:unset;margin-top:35px}.searchpage__options[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#70757a}.searchpage__optionSelected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-bottom:3px solid #1a73e8;color:#1a73e8;border-width:100%;margin-right:30px;display:inline}.searchpage__optionsLeft[_ngcontent-%COMP%], .searchpage__optionsRight[_ngcontent-%COMP%]{display:flex}.searchpage__optionsLeft[_ngcontent-%COMP%]{margin-left:150px}.searchpage__optionsRight[_ngcontent-%COMP%]{margin-left:50px;margin-top:-10px}.searchpage__option[_ngcontent-%COMP%]{margin-top:-1px;margin-right:20px}.searchpage__option[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;display:inline-block;fill:currentColor;vertical-align:text-bottom;margin-bottom:2px}.searchpage__optionSelected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;margin-bottom:4px;display:inline-block;fill:currentColor;vertical-align:text-bottom}.searchPage__result[_ngcontent-%COMP%]{margin:30px 0}.result_count[_ngcontent-%COMP%]{position:absolute;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:all .22s ease-in-out;-webkit-transition:all .22s ease-in-out;color:#70757a;line-height:33px;padding-top:0;padding-bottom:0;padding-right:8px;font-size:14px;align-self:flex-start}.searchPage__results[_ngcontent-%COMP%]{max-width:650px;margin-top:10px;margin-left:180px;margin-bottom:100px}.searchPage__resultTitle[_ngcontent-%COMP%]{text-decoration:none;font-size:20px;line-height:1.3;padding-top:4px;margin-bottom:3px}.searchPage__resultTitle[_ngcontent-%COMP%]:hover{text-decoration:underline}.searchPage__resultTitle[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-weight:500}.result__title[_ngcontent-%COMP%]{font-size:14px;padding-top:1px;line-height:1.3;color:#3c4043;font-style:normal;margin-bottom:7px}.result__text[_ngcontent-%COMP%]{margin-top:3px;line-height:1.58;color:#3c4043;font-size:14px;font-family:arial,sans-serif;text-align:left}.spacing[_ngcontent-%COMP%]{padding:5px}.result[_ngcontent-%COMP%]{margin-bottom:10px}"]});const aF=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:N0},{path:"result",component:P0}];class uy{}uy.\u0275fac=function(e){return new(e||uy)},uy.\u0275mod=f.oAB({type:uy}),uy.\u0275inj=f.cJS({imports:[Iw.forRoot(aF),Iw]});class k0{constructor(){this.title="EbiGoogleClone"}}k0.\u0275fac=function(e){return new(e||k0)},k0.\u0275cmp=f.Xpm({type:k0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&f._UZ(0,"router-outlet")},dependencies:[Xp]});class cy{}cy.\u0275fac=function(e){return new(e||cy)},cy.\u0275mod=f.oAB({type:cy,bootstrap:[k0]}),cy.\u0275inj=f.cJS({imports:[Oa,uy,tF,Ok,Ip.hO.initializeApp({apiKey:"AIzaSyCDHzV3Hn92XqAcQlaVljD8jY_laPQe0W0",authDomain:"ebigogleclone.firebaseapp.com",projectId:"ebigogleclone",storageBucket:"ebigogleclone.appspot.com",messagingSenderId:"766857922202",appId:"1:766857922202:web:d46340a437e4aba2fa4123",measurementId:"G-VDNY9YZ3XL"}),fo]}),sd().bootstrapModule(cy).catch(n=>console.error(n))},9751:(gt,Se,F)=>{F.d(Se,{y:()=>De});var f=F(2961),X=F(727),P=F(8822),ne=F(9635),se=F(2416),oe=F(576),xe=F(2806);let De=(()=>{class q{constructor(ve){ve&&(this._subscribe=ve)}lift(ve){const He=new q;return He.source=this,He.operator=ve,He}subscribe(ve,He,rt){const ce=function $(q){return q&&q instanceof f.Lv||function j(q){return q&&(0,oe.m)(q.next)&&(0,oe.m)(q.error)&&(0,oe.m)(q.complete)}(q)&&(0,X.Nn)(q)}(ve)?ve:new f.Hp(ve,He,rt);return(0,xe.x)(()=>{const{operator:we,source:Ee}=this;ce.add(we?we.call(ce,Ee):Ee?this._subscribe(ce):this._trySubscribe(ce))}),ce}_trySubscribe(ve){try{return this._subscribe(ve)}catch(He){ve.error(He)}}forEach(ve,He){return new(He=me(He))((rt,ce)=>{const we=new f.Hp({next:Ee=>{try{ve(Ee)}catch(ke){ce(ke),we.unsubscribe()}},error:ce,complete:rt});this.subscribe(we)})}_subscribe(ve){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(ve)}[P.L](){return this}pipe(...ve){return(0,ne.U)(ve)(this)}toPromise(ve){return new(ve=me(ve))((He,rt)=>{let ce;this.subscribe(we=>ce=we,we=>rt(we),()=>He(ce))})}}return q.create=Ue=>new q(Ue),q})();function me(q){var Ue;return null!==(Ue=q??se.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(gt,Se,F)=>{F.d(Se,{x:()=>xe});var f=F(9751),X=F(727);const ne=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=F(8737),oe=F(2806);let xe=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new De(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new ne}next($){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:Ue,observers:ve}=this;return q||Ue?X.Lc:(this.currentObservers=null,ve.push($),new X.w0(()=>{this.currentObservers=null,(0,se.P)(ve,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:Ue,isStopped:ve}=this;q?$.error(Ue):ve&&$.complete()}asObservable(){const $=new f.y;return $.source=this,$}}return me.create=(j,$)=>new De(j,$),me})();class De extends xe{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,j)}error(j){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==q?q:X.Lc}}},2961:(gt,Se,F)=>{F.d(Se,{Hp:()=>rt,Lv:()=>q});var f=F(576),X=F(727),P=F(2416),ne=F(7849);function se(){}const oe=me("C",void 0,void 0);function me(_e,ge,be){return{kind:_e,value:ge,error:be}}var j=F(3410),$=F(2806);class q extends X.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,X.Nn)(ge)&&ge.add(this)):this.destination=ke}static create(ge,be,Le){return new rt(ge,be,Le)}next(ge){this.isStopped?Ee(function De(_e){return me("N",_e,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?Ee(function xe(_e){return me("E",void 0,_e)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?Ee(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function ve(_e,ge){return Ue.call(_e,ge)}class He{constructor(ge){this.partialObserver=ge}next(ge){const{partialObserver:be}=this;if(be.next)try{be.next(ge)}catch(Le){ce(Le)}}error(ge){const{partialObserver:be}=this;if(be.error)try{be.error(ge)}catch(Le){ce(Le)}else ce(ge)}complete(){const{partialObserver:ge}=this;if(ge.complete)try{ge.complete()}catch(be){ce(be)}}}class rt extends q{constructor(ge,be,Le){let Me;if(super(),(0,f.m)(ge)||!ge)Me={next:ge??void 0,error:be??void 0,complete:Le??void 0};else{let V;this&&P.v.useDeprecatedNextContext?(V=Object.create(ge),V.unsubscribe=()=>this.unsubscribe(),Me={next:ge.next&&ve(ge.next,V),error:ge.error&&ve(ge.error,V),complete:ge.complete&&ve(ge.complete,V)}):Me=ge}this.destination=new He(Me)}}function ce(_e){P.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(_e):(0,ne.h)(_e)}function Ee(_e,ge){const{onStoppedNotification:be}=P.v;be&&j.z.setTimeout(()=>be(_e,ge))}const ke={closed:!0,next:se,error:function we(_e){throw _e},complete:se}},727:(gt,Se,F)=>{F.d(Se,{Lc:()=>oe,w0:()=>se,Nn:()=>xe});var f=F(576);const P=(0,F(3888).d)(me=>function($){me(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,Ue)=>`${Ue+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ne=F(8737);class se{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const ve of $)ve.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,f.m)(q))try{q()}catch(ve){j=ve instanceof P?ve.errors:[ve]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const ve of Ue)try{De(ve)}catch(He){j=j??[],He instanceof P?j=[...j,...He.errors]:j.push(He)}}if(j)throw new P(j)}}add(j){var $;if(j&&j!==this)if(this.closed)De(j);else{if(j instanceof se){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,ne.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,ne.P)($,j),j instanceof se&&j._removeParent(this)}}se.EMPTY=(()=>{const me=new se;return me.closed=!0,me})();const oe=se.EMPTY;function xe(me){return me instanceof se||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function De(me){(0,f.m)(me)?me():me.unsubscribe()}},2416:(gt,Se,F)=>{F.d(Se,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Se,F)=>{F.d(Se,{E:()=>X});const X=new(F(9751).y)(se=>se.complete())},8996:(gt,Se,F)=>{F.d(Se,{D:()=>ge});var f=F(8421),X=F(5363),P=F(9468),oe=F(9751),De=F(2202),me=F(576),j=F(9672);function q(be,Le){if(!be)throw new Error("Iterable cannot be null");return new oe.y(Me=>{(0,j.f)(Me,Le,()=>{const V=be[Symbol.asyncIterator]();(0,j.f)(Me,Le,()=>{V.next().then(de=>{de.done?Me.complete():Me.next(de.value)})},0,!0)})})}var Ue=F(3670),ve=F(8239),He=F(1144),rt=F(6495),ce=F(2206),we=F(4532),Ee=F(3260);function ge(be,Le){return Le?function _e(be,Le){if(null!=be){if((0,Ue.c)(be))return function ne(be,Le){return(0,f.Xf)(be).pipe((0,P.R)(Le),(0,X.Q)(Le))}(be,Le);if((0,He.z)(be))return function xe(be,Le){return new oe.y(Me=>{let V=0;return Le.schedule(function(){V===be.length?Me.complete():(Me.next(be[V++]),Me.closed||this.schedule())})})}(be,Le);if((0,ve.t)(be))return function se(be,Le){return(0,f.Xf)(be).pipe((0,P.R)(Le),(0,X.Q)(Le))}(be,Le);if((0,ce.D)(be))return q(be,Le);if((0,rt.T)(be))return function $(be,Le){return new oe.y(Me=>{let V;return(0,j.f)(Me,Le,()=>{V=be[De.h](),(0,j.f)(Me,Le,()=>{let de,Ve;try{({value:de,done:Ve}=V.next())}catch(Ge){return void Me.error(Ge)}Ve?Me.complete():Me.next(de)},0,!0)}),()=>(0,me.m)(V?.return)&&V.return()})}(be,Le);if((0,Ee.L)(be))return function ke(be,Le){return q((0,Ee.Q)(be),Le)}(be,Le)}throw(0,we.z)(be)}(be,Le):(0,f.Xf)(be)}},8421:(gt,Se,F)=>{F.d(Se,{Xf:()=>Ue});var f=F(655),X=F(1144),P=F(8239),ne=F(9751),se=F(3670),oe=F(2206),xe=F(4532),De=F(6495),me=F(3260),j=F(576),$=F(7849),q=F(8822);function Ue(_e){if(_e instanceof ne.y)return _e;if(null!=_e){if((0,se.c)(_e))return function ve(_e){return new ne.y(ge=>{const be=_e[q.L]();if((0,j.m)(be.subscribe))return be.subscribe(ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(_e);if((0,X.z)(_e))return function He(_e){return new ne.y(ge=>{for(let be=0;be<_e.length&&!ge.closed;be++)ge.next(_e[be]);ge.complete()})}(_e);if((0,P.t)(_e))return function rt(_e){return new ne.y(ge=>{_e.then(be=>{ge.closed||(ge.next(be),ge.complete())},be=>ge.error(be)).then(null,$.h)})}(_e);if((0,oe.D)(_e))return we(_e);if((0,De.T)(_e))return function ce(_e){return new ne.y(ge=>{for(const be of _e)if(ge.next(be),ge.closed)return;ge.complete()})}(_e);if((0,me.L)(_e))return function Ee(_e){return we((0,me.Q)(_e))}(_e)}throw(0,xe.z)(_e)}function we(_e){return new ne.y(ge=>{(function ke(_e,ge){var be,Le,Me,V;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(_e);!(Le=yield be.next()).done;)if(ge.next(Le.value),ge.closed)return}catch(de){Me={error:de}}finally{try{Le&&!Le.done&&(V=be.return)&&(yield V.call(be))}finally{if(Me)throw Me.error}}ge.complete()})})(_e,ge).catch(be=>ge.error(be))})}},6451:(gt,Se,F)=>{F.d(Se,{T:()=>oe});var f=F(8189),X=F(8421),P=F(515),ne=F(7669),se=F(8996);function oe(...xe){const De=(0,ne.yG)(xe),me=(0,ne._6)(xe,1/0),j=xe;return j.length?1===j.length?(0,X.Xf)(j[0]):(0,f.J)(me)((0,se.D)(j,De)):P.E}},5403:(gt,Se,F)=>{F.d(Se,{x:()=>X});var f=F(2961);function X(ne,se,oe,xe,De){return new P(ne,se,oe,xe,De)}class P extends f.Lv{constructor(se,oe,xe,De,me,j){super(se),this.onFinalize=me,this.shouldUnsubscribe=j,this._next=oe?function($){try{oe($)}catch(q){se.error(q)}}:super._next,this._error=De?function($){try{De($)}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch($){se.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(gt,Se,F)=>{F.d(Se,{U:()=>P});var f=F(4482),X=F(5403);function P(ne,se){return(0,f.e)((oe,xe)=>{let De=0;oe.subscribe((0,X.x)(xe,me=>{xe.next(ne.call(se,me,De++))}))})}},8189:(gt,Se,F)=>{F.d(Se,{J:()=>P});var f=F(5577),X=F(4671);function P(ne=1/0){return(0,f.z)(X.y,ne)}},5577:(gt,Se,F)=>{F.d(Se,{z:()=>De});var f=F(4004),X=F(8421),P=F(4482),ne=F(9672),se=F(5403),xe=F(576);function De(me,j,$=1/0){return(0,xe.m)(j)?De((q,Ue)=>(0,f.U)((ve,He)=>j(q,ve,Ue,He))((0,X.Xf)(me(q,Ue))),$):("number"==typeof j&&($=j),(0,P.e)((q,Ue)=>function oe(me,j,$,q,Ue,ve,He,rt){const ce=[];let we=0,Ee=0,ke=!1;const _e=()=>{ke&&!ce.length&&!we&&j.complete()},ge=Le=>we<q?be(Le):ce.push(Le),be=Le=>{ve&&j.next(Le),we++;let Me=!1;(0,X.Xf)($(Le,Ee++)).subscribe((0,se.x)(j,V=>{Ue?.(V),ve?ge(V):j.next(V)},()=>{Me=!0},void 0,()=>{if(Me)try{for(we--;ce.length&&we<q;){const V=ce.shift();He?(0,ne.f)(j,He,()=>be(V)):be(V)}_e()}catch(V){j.error(V)}}))};return me.subscribe((0,se.x)(j,ge,()=>{ke=!0,_e()})),()=>{rt?.()}}(q,Ue,me,$)))}},5363:(gt,Se,F)=>{F.d(Se,{Q:()=>ne});var f=F(9672),X=F(4482),P=F(5403);function ne(se,oe=0){return(0,X.e)((xe,De)=>{xe.subscribe((0,P.x)(De,me=>(0,f.f)(De,se,()=>De.next(me),oe),()=>(0,f.f)(De,se,()=>De.complete(),oe),me=>(0,f.f)(De,se,()=>De.error(me),oe)))})}},3099:(gt,Se,F)=>{F.d(Se,{B:()=>se});var f=F(8421),X=F(7579),P=F(2961),ne=F(4482);function se(xe={}){const{connector:De=(()=>new X.x),resetOnError:me=!0,resetOnComplete:j=!0,resetOnRefCountZero:$=!0}=xe;return q=>{let Ue,ve,He,rt=0,ce=!1,we=!1;const Ee=()=>{ve?.unsubscribe(),ve=void 0},ke=()=>{Ee(),Ue=He=void 0,ce=we=!1},_e=()=>{const ge=Ue;ke(),ge?.unsubscribe()};return(0,ne.e)((ge,be)=>{rt++,!we&&!ce&&Ee();const Le=He=He??De();be.add(()=>{rt--,0===rt&&!we&&!ce&&(ve=oe(_e,$))}),Le.subscribe(be),!Ue&&rt>0&&(Ue=new P.Hp({next:Me=>Le.next(Me),error:Me=>{we=!0,Ee(),ve=oe(ke,me,Me),Le.error(Me)},complete:()=>{ce=!0,Ee(),ve=oe(ke,j),Le.complete()}}),(0,f.Xf)(ge).subscribe(Ue))})(q)}}function oe(xe,De,...me){if(!0===De)return void xe();if(!1===De)return;const j=new P.Hp({next:()=>{j.unsubscribe(),xe()}});return De(...me).subscribe(j)}},9468:(gt,Se,F)=>{F.d(Se,{R:()=>X});var f=F(4482);function X(P,ne=0){return(0,f.e)((se,oe)=>{oe.add(P.schedule(()=>se.subscribe(oe),ne))})}},8505:(gt,Se,F)=>{F.d(Se,{b:()=>se});var f=F(576),X=F(4482),P=F(5403),ne=F(4671);function se(oe,xe,De){const me=(0,f.m)(oe)||xe||De?{next:oe,error:xe,complete:De}:oe;return me?(0,X.e)((j,$)=>{var q;null===(q=me.subscribe)||void 0===q||q.call(me);let Ue=!0;j.subscribe((0,P.x)($,ve=>{var He;null===(He=me.next)||void 0===He||He.call(me,ve),$.next(ve)},()=>{var ve;Ue=!1,null===(ve=me.complete)||void 0===ve||ve.call(me),$.complete()},ve=>{var He;Ue=!1,null===(He=me.error)||void 0===He||He.call(me,ve),$.error(ve)},()=>{var ve,He;Ue&&(null===(ve=me.unsubscribe)||void 0===ve||ve.call(me)),null===(He=me.finalize)||void 0===He||He.call(me)}))}):ne.y}},6063:(gt,Se,F)=>{F.d(Se,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(gt,Se,F)=>{F.d(Se,{z:()=>f});const f={setTimeout(X,P,...ne){const{delegate:se}=f;return se?.setTimeout?se.setTimeout(X,P,...ne):setTimeout(X,P,...ne)},clearTimeout(X){const{delegate:P}=f;return(P?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(gt,Se,F)=>{F.d(Se,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Se,F)=>{F.d(Se,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(gt,Se,F)=>{F.d(Se,{_6:()=>oe,jO:()=>ne,yG:()=>se});var f=F(576);function P(xe){return xe[xe.length-1]}function ne(xe){return(0,f.m)(P(xe))?xe.pop():void 0}function se(xe){return function X(xe){return xe&&(0,f.m)(xe.schedule)}(P(xe))?xe.pop():void 0}function oe(xe,De){return"number"==typeof P(xe)?xe.pop():De}},8737:(gt,Se,F)=>{function f(X,P){if(X){const ne=X.indexOf(P);0<=ne&&X.splice(ne,1)}}F.d(Se,{P:()=>f})},3888:(gt,Se,F)=>{function f(X){const ne=X(se=>{Error.call(se),se.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Se,{d:()=>f})},2806:(gt,Se,F)=>{F.d(Se,{O:()=>ne,x:()=>P});var f=F(2416);let X=null;function P(se){if(f.v.useDeprecatedSynchronousErrorHandling){const oe=!X;if(oe&&(X={errorThrown:!1,error:null}),se(),oe){const{errorThrown:xe,error:De}=X;if(X=null,xe)throw De}}else se()}function ne(se){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=se)}},9672:(gt,Se,F)=>{function f(X,P,ne,se=0,oe=!1){const xe=P.schedule(function(){ne(),oe?X.add(this.schedule(null,se)):this.unsubscribe()},se);if(X.add(xe),!oe)return xe}F.d(Se,{f:()=>f})},4671:(gt,Se,F)=>{function f(X){return X}F.d(Se,{y:()=>f})},1144:(gt,Se,F)=>{F.d(Se,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(gt,Se,F)=>{F.d(Se,{D:()=>X});var f=F(576);function X(P){return Symbol.asyncIterator&&(0,f.m)(P?.[Symbol.asyncIterator])}},576:(gt,Se,F)=>{function f(X){return"function"==typeof X}F.d(Se,{m:()=>f})},3670:(gt,Se,F)=>{F.d(Se,{c:()=>P});var f=F(8822),X=F(576);function P(ne){return(0,X.m)(ne[f.L])}},6495:(gt,Se,F)=>{F.d(Se,{T:()=>P});var f=F(2202),X=F(576);function P(ne){return(0,X.m)(ne?.[f.h])}},8239:(gt,Se,F)=>{F.d(Se,{t:()=>X});var f=F(576);function X(P){return(0,f.m)(P?.then)}},3260:(gt,Se,F)=>{F.d(Se,{L:()=>ne,Q:()=>P});var f=F(655),X=F(576);function P(se){return(0,f.FC)(this,arguments,function*(){const xe=se.getReader();try{for(;;){const{value:De,done:me}=yield(0,f.qq)(xe.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(De)}}finally{xe.releaseLock()}})}function ne(se){return(0,X.m)(se?.getReader)}},4482:(gt,Se,F)=>{F.d(Se,{A:()=>X,e:()=>P});var f=F(576);function X(ne){return(0,f.m)(ne?.lift)}function P(ne){return se=>{if(X(se))return se.lift(function(oe){try{return ne(oe,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(gt,Se,F)=>{F.d(Se,{U:()=>P,z:()=>X});var f=F(4671);function X(...ne){return P(ne)}function P(ne){return 0===ne.length?f.y:1===ne.length?ne[0]:function(oe){return ne.reduce((xe,De)=>De(xe),oe)}}},7849:(gt,Se,F)=>{F.d(Se,{h:()=>P});var f=F(2416),X=F(3410);function P(ne){X.z.setTimeout(()=>{const{onUnhandledError:se}=f.v;if(!se)throw ne;se(ne)})}},4532:(gt,Se,F)=>{function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>f})},655:(gt,Se,F)=>{function ne(re,ae){var pe={};for(var Ce in re)Object.prototype.hasOwnProperty.call(re,Ce)&&ae.indexOf(Ce)<0&&(pe[Ce]=re[Ce]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(Ce=Object.getOwnPropertySymbols(re);Pe<Ce.length;Pe++)ae.indexOf(Ce[Pe])<0&&Object.prototype.propertyIsEnumerable.call(re,Ce[Pe])&&(pe[Ce[Pe]]=re[Ce[Pe]])}return pe}function q(re,ae,pe,Ce){return new(pe||(pe=Promise))(function(Be,Ze){function We(Qt){try{yt(Ce.next(Qt))}catch(Je){Ze(Je)}}function tn(Qt){try{yt(Ce.throw(Qt))}catch(Je){Ze(Je)}}function yt(Qt){Qt.done?Be(Qt.value):function Pe(Be){return Be instanceof pe?Be:new pe(function(Ze){Ze(Be)})}(Qt.value).then(We,tn)}yt((Ce=Ce.apply(re,ae||[])).next())})}function _e(re){return this instanceof _e?(this.v=re,this):new _e(re)}function ge(re,ae,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ce=pe.apply(re,ae||[]),Be=[];return Pe={},Ze("next"),Ze("throw"),Ze("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function Ze(At){Ce[At]&&(Pe[At]=function(Fn){return new Promise(function(un,_n){Be.push([At,Fn,un,_n])>1||We(At,Fn)})})}function We(At,Fn){try{!function tn(At){At.value instanceof _e?Promise.resolve(At.value.v).then(yt,Qt):Je(Be[0][2],At)}(Ce[At](Fn))}catch(un){Je(Be[0][3],un)}}function yt(At){We("next",At)}function Qt(At){We("throw",At)}function Je(At,Fn){At(Fn),Be.shift(),Be.length&&We(Be[0][0],Be[0][1])}}function Le(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ae=re[Symbol.asyncIterator];return ae?ae.call(re):(re=function rt(re){var ae="function"==typeof Symbol&&Symbol.iterator,pe=ae&&re[ae],Ce=0;if(pe)return pe.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Ce>=re.length&&(re=void 0),{value:re&&re[Ce++],done:!re}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),pe={},Ce("next"),Ce("throw"),Ce("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function Ce(Be){pe[Be]=re[Be]&&function(Ze){return new Promise(function(We,tn){!function Pe(Be,Ze,We,tn){Promise.resolve(tn).then(function(yt){Be({value:yt,done:We})},Ze)}(We,tn,(Ze=re[Be](Ze)).done,Ze.value)})}}}F.d(Se,{FC:()=>ge,KL:()=>Le,_T:()=>ne,mG:()=>q,qq:()=>_e})},4650:(gt,Se,F)=>{F.d(Se,{$8M:()=>xu,$WT:()=>Un,$Z:()=>i_,AFp:()=>TI,AaK:()=>De,AsE:()=>Af,CHM:()=>Oc,CRH:()=>tr,CZH:()=>Sm,CqO:()=>I_,D6c:()=>dh,EJc:()=>ra,EpF:()=>zb,F4k:()=>Xw,FYo:()=>af,FiY:()=>La,GfV:()=>jy,Gpc:()=>$,JOm:()=>Vi,KtG:()=>Wl,LFG:()=>$e,LSH:()=>$0,Lbi:()=>Ml,Lck:()=>WE,MMx:()=>pv,MR2:()=>KD,NdJ:()=>D_,O4$:()=>Ws,OlP:()=>an,Oqu:()=>_l,P3R:()=>ns,PXZ:()=>jC,Q6J:()=>Zw,QGY:()=>Og,Qsj:()=>ig,R0b:()=>cs,RDi:()=>ao,Rgc:()=>go,SBq:()=>xd,Sil:()=>kv,Suo:()=>Oe,TTD:()=>cu,TgZ:()=>Mg,X6Q:()=>PI,XFs:()=>lt,Xpm:()=>ua,Xts:()=>Ry,Y36:()=>lf,YKP:()=>hv,YNc:()=>Hb,Yjl:()=>la,Yz7:()=>Je,Z0I:()=>_n,ZZ4:()=>$m,_Bn:()=>su,_UZ:()=>$d,_Vd:()=>sf,_c5:()=>qI,_uU:()=>Sf,aQg:()=>Jv,c2e:()=>ic,cJS:()=>Fn,cg1:()=>Wd,dDg:()=>$v,dqk:()=>Rt,eFA:()=>Ur,eJc:()=>Sv,ekj:()=>fE,eoX:()=>Hv,f3M:()=>et,g9A:()=>zn,h0i:()=>Il,hGG:()=>WI,hij:()=>Lg,iGM:()=>Em,ifc:()=>_t,ip1:()=>Pv,jDz:()=>gv,kL8:()=>j_,kcU:()=>ir,lG2:()=>ca,lqb:()=>dl,lri:()=>Nm,n5z:()=>id,oAB:()=>Dn,oxw:()=>Ng,q4F:()=>J0,qLn:()=>Md,qOj:()=>gf,qZA:()=>Df,rWj:()=>jv,s9C:()=>bf,sBO:()=>kI,s_b:()=>bl,soG:()=>na,tb:()=>Am,tp0:()=>Fu,uIk:()=>m_,vHH:()=>ce,vpe:()=>os,wAp:()=>vt,xp6:()=>cw,z2F:()=>sa,zSh:()=>W0,zs3:()=>fl});var f=F(7579),X=F(727),P=F(9751),ne=F(6451),se=F(3099);function oe(i){for(let o in i)if(i[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function xe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function De(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(De).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function me(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=oe({__forward_ref__:oe});function $(i){return i.__forward_ref__=$,i.toString=function(){return De(this())},i}function q(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}function ve(i){return i&&!!i.\u0275providers}const rt="https://g.co/ng/security#xss";class ce extends Error{constructor(o,a){super(we(o,a)),this.code=o}}function we(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Ee(i){return"string"==typeof i?i:null==i?"":String(i)}function Le(i,o){throw new ce(-201,!1)}function Ze(i,o){null==i&&function We(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Je(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Fn(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return wn(i,jr)||wn(i,vn)}function _n(i){return null!==un(i)}function wn(i,o){return i.hasOwnProperty(o)?i[o]:null}function ni(i){return i&&(i.hasOwnProperty(gs)||i.hasOwnProperty($r))?i[gs]:null}const jr=oe({\u0275prov:oe}),gs=oe({\u0275inj:oe}),vn=oe({ngInjectableDef:oe}),$r=oe({ngInjectorDef:oe});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let ms;function En(i){const o=ms;return ms=i,o}function fr(i,o,a){const c=un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&lt.Optional?null:void 0!==o?o:void Le(De(i))}const Rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),fn={},Ln="__NG_DI_FLAG__",Mr="ngTempTokenPath",pr="ngTokenPath",aa=/\n/gm,on="\u0275",Hi="__source";let Kt;function Rr(i){const o=Kt;return Kt=i,o}function Mi(i,o=lt.Default){if(void 0===Kt)throw new ce(-203,!1);return null===Kt?fr(i,void 0,o):Kt.get(i,o&lt.Optional?null:void 0,o)}function $e(i,o=lt.Default){return(function hi(){return ms}()||Mi)(q(i),o)}function et(i,o=lt.Default){return $e(i,Et(o))}function Et(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function xt(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ce(900,!1);let d,p=lt.Default;for(let _=0;_<c.length;_++){const E=c[_],I=gr(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push($e(d,p))}else o.push($e(c))}return o}function Pt(i,o){return i[Ln]=o,i.prototype[Ln]=o,i}function gr(i){return i[Ln]}function G(i){return{toString:i}.toString()}var le=(()=>((le=le||{})[le.OnPush=0]="OnPush",le[le.Default=1]="Default",le))(),_t=(()=>{return(i=_t||(_t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",_t;var i})();const Xt={},wt=[],In=oe({\u0275cmp:oe}),Vn=oe({\u0275dir:oe}),Ht=oe({\u0275pipe:oe}),fi=oe({\u0275mod:oe}),Zn=oe({\u0275fac:oe}),Ls=oe({__NG_ELEMENT_ID__:oe});let Dh=0;function ua(i){return G(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===le.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||wt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||_t.Emulated,id:"c"+Dh++,styles:i.styles||wt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=i.dependencies,_=i.features;return d.inputs=yc(i.inputs,c),d.outputs=yc(i.outputs),_&&_.forEach(E=>E(d)),d.directiveDefs=p?()=>("function"==typeof p?p():p).map(mc).filter(jl):null,d.pipeDefs=p?()=>("function"==typeof p?p():p).map(Rn).filter(jl):null,d})}function mc(i){return Zt(i)||Yn(i)}function jl(i){return null!==i}function Dn(i){return G(()=>({type:i.type,bootstrap:i.bootstrap||wt,declarations:i.declarations||wt,imports:i.imports||wt,exports:i.exports||wt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function yc(i,o){if(null==i)return Xt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const ca=ua;function la(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zt(i){return i[In]||null}function Yn(i){return i[Vn]||null}function Rn(i){return i[Ht]||null}function Un(i){const o=Zt(i)||Yn(i)||Rn(i);return null!==o&&o.standalone}function ar(i,o){const a=i[fi]||null;if(!a&&!0===o)throw new Error(`Type ${De(i)} does not have '\u0275mod' property.`);return a}const ri=0,Ye=1,Ot=2,pn=3,Or=4,Gi=5,Bn=6,pi=7,bn=8,yo=9,ys=10,kt=11,_c=12,_s=13,vc=14,gi=15,mr=16,_o=17,Vs=18,mi=19,vs=20,zi=21,cn=22,ii=1,Hl=2,vo=7,Us=8,Nr=9,yr=10;function Hr(i){return Array.isArray(i)&&"object"==typeof i[ii]}function yi(i){return Array.isArray(i)&&!0===i[ii]}function da(i){return 0!=(4&i.flags)}function _i(i){return i.componentOffset>-1}function wc(i){return 1==(1&i.flags)}function Gr(i){return null!==i.template}function ha(i){return 0!=(256&i[Ot])}function js(i,o){return i.hasOwnProperty(Zn)?i[Zn]:null}class $s{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function cu(){return Io}function Io(i){return i.type.prototype.ngOnChanges&&(i.setInput=Do),lu}function lu(){const i=pa(this),o=i?.current;if(o){const a=i.previous;if(a===Xt)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Do(i,o,a,c){const d=this.declaredInputs[a],p=pa(i)||function Sc(i,o){return i[Hs]=o}(i,{previous:Xt,current:null}),_=p.current||(p.current={}),E=p.previous,I=E[d];_[d]=new $s(I&&I.currentValue,o,E===Xt),i[c]=o}cu.ngInherit=!0;const Hs="__ngSimpleChanges__";function pa(i){return i[Hs]||null}const zr=function(i,o,a){},Sn="svg";function On(i){for(;Array.isArray(i);)i=i[ri];return i}function Gs(i,o){return On(o[i])}function jn(i,o){return On(o[i.index])}function So(i,o){return i.data[o]}function rr(i,o){const a=o[i];return Hr(a)?a:a[ri]}function Ao(i){return 64==(64&i[Ot])}function Wi(i,o){return null==o?null:i[o]}function ma(i){i[Vs]=0}function ya(i,o){i[Gi]+=o;let a=i,c=i[pn];for(;null!==c&&(1===o&&1===a[Gi]||-1===o&&0===a[Gi]);)c[Gi]+=o,a=c,c=c[pn]}const St={lFrame:ly(null),bindingsEnabled:!0};function gu(){return St.bindingsEnabled}function ue(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Oc(i){return St.lFrame.contextLView=i,i[bn]}function Wl(i){return St.lFrame.contextLView=null,i}function ur(){let i=_a();for(;null!==i&&64===i.type;)i=i.parent;return i}function _a(){return St.lFrame.currentTNode}function qr(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function yu(){return St.lFrame.isParent}function qs(){return St.lFrame.bindingIndex++}function Ni(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Yl(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,kc(o)}function kc(i){St.lFrame.currentDirectiveIndex=i}function Ql(){return St.lFrame.currentQueryIndex}function Fc(i){St.lFrame.currentQueryIndex=i}function Xl(i){const o=i[Ye];return 2===o.type?o.declTNode:1===o.type?i[Bn]:null}function xh(i,o,a){if(a&lt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=Xl(p),null===d||(p=p[gi],10&d.type))););if(null===d)return!1;o=d,i=p}const c=St.lFrame=Mh();return c.currentTNode=o,c.lView=i,!0}function wu(i){const o=Mh(),a=i[Ye];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Mh(){const i=St.lFrame,o=null===i?null:i.child;return null===o?ly(i):o}function ly(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Tp(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Lc=Tp;function Sp(){const i=Tp();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function kr(){return St.lFrame.selectedIndex}function xo(i){St.lFrame.selectedIndex=i}function gn(){const i=St.lFrame;return So(i.tView,i.selectedIndex)}function Ws(){St.lFrame.currentNamespace=Sn}function ir(){!function Rh(){St.lFrame.currentNamespace=null}()}function wa(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ks(i,o,a){Ea(i,o,3,a)}function Uc(i,o,a,c){(3&i[Ot])===a&&Ea(i,o,a,c)}function Es(i,o){let a=i[Ot];(3&a)===o&&(a&=2047,a+=1,i[Ot]=a)}function Ea(i,o,a,c){const p=c??-1,_=o.length-1;let E=0;for(let I=void 0!==c?65535&i[Vs]:0;I<_;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(i[Vs]+=65536),(E<p||-1==p)&&(Ia(i,a,o,I),i[Vs]=(4294901760&i[Vs])+I+2),I++}function Ia(i,o,a,c){const d=a[c]<0,p=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[Ot]>>11<i[Vs]>>16&&(3&i[Ot])===o){i[Ot]+=2048,zr(4,E,p);try{p.call(E)}finally{zr(5,E,p)}}}else{zr(4,E,p);try{p.call(E)}finally{zr(5,E,p)}}}const Mo=-1;class Is{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Cn(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],_=a[c++],E=a[c++];i.setAttribute(o,_,E,p)}else{const p=d,_=a[++c];Zi(p)?i.setProperty(o,p,_):i.setAttribute(o,p,_),c++}}return c}function ba(i){return 3===i||4===i||6===i}function Zi(i){return 64===i.charCodeAt(0)}function Yi(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ro(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Ro(i,o,a,c,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function Bc(i){return i!==Mo}function Ca(i){return 32767&i}function Du(i,o){let a=function Iu(i){return i>>16}(i),c=o;for(;a>0;)c=c[gi],a--;return c}let Ds=!0;function Oo(i){const o=Ds;return Ds=i,o}const Ta=255,Sa=5;let bu=0;const _r={};function Po(i,o){const a=xa(i,o);if(-1!==a)return a;const c=o[Ye];c.firstCreatePass&&(i.injectorIndex=o.length,bs(c.data,i),bs(o,null),bs(c.blueprint,null));const d=Cu(i,o),p=i.injectorIndex;if(Bc(d)){const _=Ca(d),E=Du(d,o),I=E[Ye].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|I[_+T]}return o[p+8]=d,p}function bs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function xa(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Cu(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=$c(d),null===c)return Mo;if(a++,d=d[gi],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Mo}function Ma(i,o,a){!function Aa(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ls)&&(c=a[Ls]),null==c&&(c=a[Ls]=bu++);const d=c&Ta;o.data[i+(d>>Sa)]|=1<<d}(i,o,a)}function Qs(i,o,a){if(a&lt.Optional||void 0!==i)return i;Le()}function Ra(i,o,a,c){if(a&lt.Optional&&void 0===c&&(c=null),!(a&(lt.Self|lt.Host))){const d=i[yo],p=En(void 0);try{return d?d.get(o,c,a&lt.Optional):fr(o,c,a&lt.Optional)}finally{En(p)}}return Qs(c,0,a)}function nd(i,o,a,c=lt.Default,d){if(null!==i){if(1024&o[Ot]){const _=function sd(i,o,a,c,d){let p=i,_=o;for(;null!==p&&null!==_&&1024&_[Ot]&&!(256&_[Ot]);){const E=Pi(p,_,a,c|lt.Self,_r);if(E!==_r)return E;let I=p.parent;if(!I){const T=_[zi];if(T){const M=T.get(a,_r,c);if(M!==_r)return M}I=$c(_),_=_[gi]}p=I}return d}(i,o,a,c,_r);if(_!==_r)return _}const p=Pi(i,o,a,c,_r);if(p!==_r)return p}return Ra(o,a,c,d)}function Pi(i,o,a,c,d){const p=function rd(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ls)?i[Ls]:void 0;return"number"==typeof o?o>=0?o&Ta:Mp:o}(a);if("function"==typeof p){if(!xh(o,i,c))return c&lt.Host?Qs(d,0,c):Ra(o,a,c,d);try{const _=p(c);if(null!=_||c&lt.Optional)return _;Le()}finally{Lc()}}else if("number"==typeof p){let _=null,E=xa(i,o),I=Mo,T=c&lt.Host?o[mr][Bn]:null;for((-1===E||c&lt.SkipSelf)&&(I=-1===E?Cu(i,o):o[E+8],I!==Mo&&Qi(c,!1)?(_=o[Ye],E=Ca(I),o=Du(I,o)):E=-1);-1!==E;){const M=o[Ye];if(Su(p,E,M.data)){const k=Tu(E,o,a,_,c,T);if(k!==_r)return k}I=o[E+8],I!==Mo&&Qi(c,o[Ye].data[E+8]===T)&&Su(p,E,o)?(_=M,E=Ca(I),o=Du(I,o)):E=-1}}return d}function Tu(i,o,a,c,d,p){const _=o[Ye],E=_.data[i+8],M=Xs(E,_,a,null==c?_i(E)&&Ds:c!=_&&0!=(3&E.type),d&lt.Host&&p===E);return null!==M?ki(o,_,M,E):_r}function Xs(i,o,a,c,d){const p=i.providerIndexes,_=o.data,E=1048575&p,I=i.directiveStart,M=p>>20,H=d?E+M:i.directiveEnd;for(let Z=c?E:E+M;Z<H;Z++){const fe=_[Z];if(Z<I&&a===fe||Z>=I&&fe.type===a)return Z}if(d){const Z=_[I];if(Z&&Gr(Z)&&Z.type===a)return I}return null}function ki(i,o,a,c){let d=i[a];const p=o.data;if(function si(i){return i instanceof Is}(d)){const _=d;_.resolving&&function _e(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ce(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ke(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ee(i)}(p[a]));const E=Oo(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?En(_.injectImpl):null;xh(i,c,lt.Default);try{d=i[a]=_.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function xp(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const _=Io(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&En(I),Oo(E),_.resolving=!1,Lc()}}return d}function Su(i,o,a){return!!(a[o+(i>>Sa)]&1<<i)}function Qi(i,o){return!(i&lt.Self||i&lt.Host&&o)}class vi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return nd(this._tNode,this._lView,o,Et(c),a)}}function Mp(){return new vi(ur(),ue())}function id(i){return G(()=>{const o=i.prototype.constructor,a=o[Zn]||Au(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[Zn]||Au(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Au(i){return Ue(i)?()=>{const o=Au(q(i));return o&&o()}:js(i)}function $c(i){const o=i[Ye],a=o.type;return 2===a?o.declTNode:1===a?i[Bn]:null}function xu(i){return function jc(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(ba(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(ur(),i)}const Oa="__parameters__";function Na(i,o,a){return G(()=>{const c=function Nh(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(I,T,M){const k=I.hasOwnProperty(Oa)?I[Oa]:Object.defineProperty(I,Oa,{value:[]})[Oa];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class an{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Je({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function to(i,o){i.forEach(a=>Array.isArray(a)?to(a,o):o(a))}function cd(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Ou(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function cr(i,o,a){let c=no(i,o);return c>=0?i[1|c]=a:(c=~c,function Pu(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Fo(i,o){const a=no(i,o);if(a>=0)return i[1|a]}function no(i,o){return function Rp(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const p=c+(d-c>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:c=p+1}return~(d<<a)}(i,o,1)}const La=Pt(Na("Optional"),8),Fu=Pt(Na("SkipSelf"),4);var Vi=(()=>((Vi=Vi||{})[Vi.Important=1]="Important",Vi[Vi.DashCase=2]="DashCase",Vi))();const so=new Map;let yy=0;const sr="__ngContext__";function xn(i,o){Hr(o)?(i[sr]=o[vs],function _y(i){so.set(i[vs],i)}(o)):i[sr]=o}let Ut;function Ba(i,o){return Ut(i,o)}function Ii(i){const o=i[pn];return yi(o)?o[pn]:o}function ja(i){return Kc(i[_s])}function qh(i){return Kc(i[Or])}function Kc(i){for(;null!==i&&!yi(i);)i=i[Or];return i}function Ms(i,o,a,c,d){if(null!=c){let p,_=!1;yi(c)?p=c:Hr(c)&&(_=!0,c=c[ri]);const E=On(c);0===i&&null!==a?null==d?Ui(o,a,E):Ha(o,a,E,d||null,!0):1===i&&null!==a?Ha(o,a,E,d||null,!0):2===i?function zo(i,o,a){const c=Qc(i,o);c&&function Cy(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function Yh(i,o,a,c,d){const p=a[vo];p!==On(a)&&Ms(o,i,c,p,d);for(let E=yr;E<a.length;E++){const I=a[E];za(I[Ye],I,i,o,c,p)}}(o,i,p,a,d)}}function $a(i,o,a){return i.createElement(o,a)}function Go(i,o){const a=i[Nr],c=a.indexOf(o),d=o[pn];512&o[Ot]&&(o[Ot]&=-513,ya(d,-1)),a.splice(c,1)}function Kh(i,o){if(i.length<=yr)return;const a=yr+o,c=i[a];if(c){const d=c[_o];null!==d&&d!==i&&Go(d,c),o>0&&(i[a-1][Or]=c[Or]);const p=Ou(i,yr+o);!function gd(i,o){za(i,o,o[kt],2,null,null),o[ri]=null,o[Bn]=null}(c[Ye],c);const _=p[mi];null!==_&&_.detachView(p[Ye]),c[pn]=null,c[Or]=null,c[Ot]&=-65}return c}function Bp(i,o){if(!(128&o[Ot])){const a=o[kt];a.destroyNode&&za(i,o,a,3,null,null),function Wh(i){let o=i[_s];if(!o)return Zh(i[Ye],i);for(;o;){let a=null;if(Hr(o))a=o[_s];else{const c=o[yr];c&&(a=c)}if(!a){for(;o&&!o[Or]&&o!==i;)Hr(o)&&Zh(o[Ye],o),o=o[pn];null===o&&(o=i),Hr(o)&&Zh(o[Ye],o),a=o&&o[Or]}o=a}}(o)}}function Zh(i,o){if(!(128&o[Ot])){o[Ot]&=-65,o[Ot]|=128,function by(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Is)){const p=a[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],I=p[_+1];zr(4,E,I);try{I.call(E)}finally{zr(5,E,I)}}else{zr(4,d,p);try{p.call(d)}finally{zr(5,d,p)}}}}}(i,o),function jp(i,o){const a=i.cleanup,c=o[pi];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+3];_>=0?c[d=_]():c[d=-_].unsubscribe(),p+=2}else{const _=c[d=a[p+1]];a[p].call(_)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[pi]=null}}(i,o),1===o[Ye].type&&o[kt].destroy();const a=o[_o];if(null!==a&&yi(o[pn])){a!==o[pn]&&Go(a,o);const c=o[mi];null!==c&&c.detachView(i)}!function xs(i){so.delete(i[vs])}(o)}}function yd(i,o,a){return function Yc(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[ri];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===_t.None||p===_t.Emulated)return null}return jn(c,a)}}(i,o.parent,a)}function Ha(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Ui(i,o,a){i.appendChild(o,a)}function _d(i,o,a,c,d){null!==c?Ha(i,o,a,c,d):Ui(i,o,a)}function Qc(i,o){return i.parentNode(o)}let Uu,Xh,tl,oo=function Ga(i,o,a){return 40&i.type?jn(i,a):null};function Xc(i,o,a,c){const d=yd(i,c,o),p=o[kt],E=function Vu(i,o,a){return oo(i,o,a)}(c.parent||o[Bn],c,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)_d(p,d,a[I],E,!1);else _d(p,d,a,E,!1);void 0!==Uu&&Uu(p,c,o,a,d)}function es(i,o){if(null!==o){const a=o.type;if(3&a)return jn(o,i);if(4&a)return Xr(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return es(i,c);{const d=i[o.index];return yi(d)?Xr(-1,d):On(d)}}if(32&a)return Ba(o,i)()||On(i[o.index]);{const c=$p(i,o);return null!==c?Array.isArray(c)?c[0]:es(Ii(i[mr]),c):es(i,o.next)}}return null}function $p(i,o){return null!==o?i[mr][Bn].projection[o.projection]:null}function Xr(i,o){const a=yr+i+1;if(a<o.length){const c=o[a],d=c[Ye].firstChild;if(null!==d)return es(c,d)}return o[vo]}function wd(i,o,a,c,d,p,_){for(;null!=a;){const E=c[a.index],I=a.type;if(_&&0===o&&(E&&xn(On(E),c),a.flags|=2),32!=(32&a.flags))if(8&I)wd(i,o,a.child,c,d,p,!1),Ms(o,i,d,E,p);else if(32&I){const T=Ba(a,c);let M;for(;M=T();)Ms(o,i,d,M,p);Ms(o,i,d,E,p)}else 16&I?Ed(i,o,c,a,d,p):Ms(o,i,d,E,p);a=_?a.projectionNext:a.next}}function za(i,o,a,c,d,p){wd(a,c,i.firstChild,o,d,p,!1)}function Ed(i,o,a,c,d,p){const _=a[mr],I=_[Bn].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Ms(o,i,d,I[T],p);else wd(i,o,I,_[pn],d,p,!0)}function Rs(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function qa(i,o,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Cn(i,o,c),null!==d&&Rs(i,o,d),null!==p&&function Gp(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function ao(i){Xh=i}function qp(i){return function Dd(){if(void 0===tl&&(tl=null,Rt.trustedTypes))try{tl=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return tl}()?.createScriptURL(i)||i}class Wp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}function v(i){return i instanceof Wp?i.changingThisBreaksApplicationSecurity:i}function S(i,o){const a=function R(i){return i instanceof Wp&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${rt})`)}return a===o}const Zp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function $0(i){const o=tf();return o?o.sanitize(Ir.URL,i)||"":S(i,"URL")?v(i):function Wo(i){return(i=String(i)).match(Zp)?i:"unsafe:"+i}(Ee(i))}function eg(i){const o=tf();if(o)return qp(o.sanitize(Ir.RESOURCE_URL,i)||"");if(S(i,"ResourceURL"))return qp(v(i));throw new ce(904,!1)}function ns(i,o,a){return function My(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?eg:$0}(o,a)(i)}function tf(){const i=ue();return i&&i[_c]}const Ry=new an("ENVIRONMENT_INITIALIZER"),Oy=new an("INJECTOR",-1),nf=new an("INJECTOR_DEF_TYPES");class H0{get(o,a=fn){if(a===fn){const c=new Error(`NullInjectorError: No provider for ${De(o)}!`);throw c.name="NullInjectorError",c}return a}}function KD(i){return{\u0275providers:i}}function Cd(...i){return{\u0275providers:Td(0,i),\u0275fromNgModule:!0}}function Td(i,...o){const a=[],c=new Set;let d;return to(o,p=>{const _=p;Ny(_,a,[],c)&&(d||(d=[]),d.push(_))}),void 0!==d&&G0(d,a),a}function G0(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];cl(d,p=>{o.push(p)})}}function Ny(i,o,a,c){if(!(i=q(i)))return!1;let d=null,p=ni(i);const _=!p&&Zt(i);if(p||_){if(_&&!_.standalone)return!1;d=i}else{const I=i.ngModule;if(p=ni(I),!p)return!1;d=I}const E=c.has(d);if(_){if(E)return!1;if(c.add(d),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const T of I)Ny(T,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(d);try{to(p.imports,M=>{Ny(M,o,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&G0(T,o)}if(!E){const T=js(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:wt},{provide:nf,useValue:d,multi:!0},{provide:Ry,useValue:()=>$e(d),multi:!0})}const I=p.providers;null==I||E||cl(I,M=>{o.push(M)})}}return d!==i&&void 0!==i.providers}function cl(i,o){for(let a of i)ve(a)&&(a=a.\u0275providers),Array.isArray(a)?cl(a,o):o(a)}const ZD=oe({provide:String,useValue:oe});function Py(i){return null!==i&&"object"==typeof i&&ZD in i}function ll(i){return"function"==typeof i}const W0=new an("Set Injector scope."),rg={},ky={};let Sd;function Wa(){return void 0===Sd&&(Sd=new H0),Sd}class dl{}class K0 extends dl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ly(o,_=>this.processProvider(_)),this.records.set(Oy,Ad(void 0,this)),d.has("environment")&&this.records.set(dl,Ad(void 0,this));const p=this.records.get(W0);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(nf.multi,wt,lt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Rr(this),c=En(void 0);try{return o()}finally{Rr(a),En(c)}}get(o,a=fn,c=lt.Default){this.assertNotDestroyed(),c=Et(c);const d=Rr(this),p=En(void 0);try{if(!(c&lt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function Y0(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(o)&&un(o);E=I&&this.injectableDefInScope(I)?Ad(Fy(o),rg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&lt.Self?Wa():this.parent).get(o,a=c&lt.Optional&&a===fn?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Mr]=_[Mr]||[]).unshift(De(o)),d)throw _;return function U(i,o,a,c){const d=i[Mr];throw o[Hi]&&d.unshift(o[Hi]),i.message=function L(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==on?i.slice(2):i;let d=De(o);if(Array.isArray(o))d=o.map(De).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):De(E)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(aa,"\n  ")}`}("\n"+i.message,d,a,c),i[pr]=d,i[Mr]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{En(p),Rr(d)}}resolveInjectorInitializers(){const o=Rr(this),a=En(void 0);try{const c=this.get(Ry.multi,wt,lt.Self);for(const d of c)d()}finally{Rr(o),En(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(De(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(o){let a=ll(o=q(o))?o:q(o&&o.provide);const c=function XD(i){return Py(i)?Ad(void 0,i.useValue):Ad(Z0(i),rg)}(o);if(ll(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Ad(void 0,rg,!0),d.factory=()=>xt(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===rg&&(a.value=ky,a.value=a.factory()),"object"==typeof a.value&&a.value&&function eb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Fy(i){const o=un(i),a=null!==o?o.factory:js(i);if(null!==a)return a;if(i instanceof an)throw new ce(204,!1);if(i instanceof Function)return function QD(i){const o=i.length;if(o>0)throw function Nu(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ce(204,!1);const a=function ti(i){const o=i&&(i[jr]||i[vn]);return o?(function Ps(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),o):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ce(204,!1)}function Z0(i,o,a){let c;if(ll(i)){const d=q(i);return js(d)||Fy(d)}if(Py(i))c=()=>q(i.useValue);else if(function q0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...xt(i.deps||[]));else if(function z0(i){return!(!i||!i.useExisting)}(i))c=()=>$e(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function JD(i){return!!i.deps}(i))return js(d)||Fy(d);c=()=>new d(...xt(i.deps))}return c}function Ad(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Ly(i,o){for(const a of i)Array.isArray(a)?Ly(a,o):a&&ve(a)?Ly(a.\u0275providers,o):o(a)}class Vy{}class Uy{}class tb{resolveComponentFactory(o){throw function By(i){const o=Error(`No component factory found for ${De(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let sf=(()=>{class i{}return i.NULL=new tb,i})();function nb(){return Ka(ur(),ue())}function Ka(i,o){return new xd(jn(i,o))}let xd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=nb,i})();function Q0(i){return i instanceof xd?i.nativeElement:i}class af{}let ig=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function X0(){const i=ue(),a=rr(ur().index,i);return(Hr(a)?a:i)[kt]}(),i})(),uf=(()=>{class i{}return i.\u0275prov=Je({token:i,providedIn:"root",factory:()=>null}),i})();class jy{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const J0=new jy("15.2.1"),$y={},Hy="ngOriginalError";function Gy(i){return i[Hy]}class Md{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Gy(o);for(;a&&Gy(a);)a=Gy(a);return a||null}}function Za(i){return i instanceof Function?i():i}function nw(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const rw="ng-template";function hb(i,o,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==nw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function iw(i){return 4===i.type&&i.value!==rw}function fb(i,o,a){return o===(4!==i.type||a?i.value:rw)}function sw(i,o,a){let c=4;const d=i.attrs||[],p=function Wy(i){for(let o=0;o<i.length;o++)if(ba(i[o]))return o;return i.length}(d);let _=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!_)if(4&c){if(c=2|1&c,""!==I&&!fb(i,I,a)||""===I&&1===o.length){if(rs(c))return!1;_=!0}}else{const T=8&c?I:o[++E];if(8&c&&null!==i.attrs){if(!hb(i.attrs,T,a)){if(rs(c))return!1;_=!0}continue}const k=pb(8&c?"class":I,d,iw(i),a);if(-1===k){if(rs(c))return!1;_=!0;continue}if(""!==T){let H;H=k>p?"":d[k+1].toLowerCase();const Z=8&c?H:null;if(Z&&-1!==nw(Z,T,0)||2&c&&T!==H){if(rs(c))return!1;_=!0}}}}else{if(!_&&!rs(c)&&!rs(I))return!1;if(_&&rs(I))continue;_=!1,c=I|1&c}}return rs(c)||_}function rs(i){return 0==(1&i)}function pb(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function gb(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function qy(i,o,a=!1){for(let c=0;c<o.length;c++)if(sw(i,o[c],a))return!0;return!1}function cf(i,o){return i?":not("+o.trim()+")":o}function sg(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&c){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!rs(_)&&(o+=cf(p,d),d=""),c=_,p=p||!rs(c);a++}return""!==d&&(o+=cf(p,d)),o}const Bt={};function cw(i){lw(Yt(),ue(),kr()+i,!1)}function lw(i,o,a,c){if(!c)if(3==(3&o[Ot])){const p=i.preOrderCheckHooks;null!==p&&Ks(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Uc(o,p,0,a)}xo(a)}function fw(i,o=null,a=null,c){const d=bi(i,o,a,c);return d.resolveInjectorInitializers(),d}function bi(i,o=null,a=null,c,d=new Set){const p=[a||wt,Cd(i)];return c=c||("object"==typeof i?void 0:De(i)),new K0(p,o||Wa(),c||null,d)}let fl=(()=>{class i{static create(a,c){if(Array.isArray(a))return fw({name:""},c,a,"");{const d=a.name??"";return fw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=fn,i.NULL=new H0,i.\u0275prov=Je({token:i,providedIn:"any",factory:()=>$e(Oy)}),i.__NG_ELEMENT_ID__=-1,i})();function lf(i,o=lt.Default){const a=ue();return null===a?$e(i,o):nd(ur(),a,q(i),o)}function i_(){throw new Error("invalid")}function Ew(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const _=i.data[p];Fc(a[c]),_.contentQueries(2,o[p],p)}}}function cg(i,o,a,c,d,p,_,E,I,T,M){const k=o.blueprint.slice();return k[ri]=d,k[Ot]=76|c,(null!==M||i&&1024&i[Ot])&&(k[Ot]|=1024),ma(k),k[pn]=k[gi]=i,k[bn]=a,k[ys]=_||i&&i[ys],k[kt]=E||i&&i[kt],k[_c]=I||i&&i[_c]||null,k[yo]=T||i&&i[yo]||null,k[Bn]=p,k[vs]=function Bo(){return yy++}(),k[zi]=M,k[mr]=2==o.type?i[mr]:k,k}function Od(i,o,a,c,d){let p=i.data[o];if(null===p)p=function s_(i,o,a,c,d){const p=_a(),_=yu(),I=i.data[o]=function Tb(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I,I.prev=p)),I}(i,o,a,c,d),function Zl(){return St.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const _=function mu(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return qr(p,!0),p}function df(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function lg(i,o,a){wu(o);try{const c=i.viewQuery;null!==c&&_g(1,c,a);const d=i.template;null!==d&&bb(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ew(i,o),i.staticViewQueries&&_g(2,i.viewQuery,a);const p=i.components;null!==p&&function Db(i,o){for(let a=0;a<o.length;a++)mg(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Ot]&=-5,Sp()}}function dg(i,o,a,c){const d=o[Ot];if(128!=(128&d)){wu(o);try{ma(o),function ws(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&bb(i,o,a,2,c);const _=3==(3&d);if(_){const T=i.preOrderCheckHooks;null!==T&&Ks(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Uc(o,T,0,null),Es(o,0)}if(function Vw(i){for(let o=ja(i);null!==o;o=qh(o)){if(!o[Hl])continue;const a=o[Nr];for(let c=0;c<a.length;c++){const d=a[c];512&d[Ot]||ya(d[pn],1),d[Ot]|=512}}}(o),function Lw(i){for(let o=ja(i);null!==o;o=qh(o))for(let a=yr;a<o.length;a++){const c=o[a],d=c[Ye];Ao(c)&&dg(d,c,d.template,c[bn])}}(o),null!==i.contentQueries&&Ew(i,o),_){const T=i.contentCheckHooks;null!==T&&Ks(o,T)}else{const T=i.contentHooks;null!==T&&Uc(o,T,1),Es(o,1)}!function Ib(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)xo(~d);else{const p=d,_=a[++c],E=a[++c];Yl(_,p),E(2,o[p])}}}finally{xo(-1)}}(i,o);const E=i.components;null!==E&&function Iw(i,o){for(let a=0;a<o.length;a++)Uw(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&_g(2,I,c),_){const T=i.viewCheckHooks;null!==T&&Ks(o,T)}else{const T=i.viewHooks;null!==T&&Uc(o,T,2),Es(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Ot]&=-41,512&o[Ot]&&(o[Ot]&=-513,ya(o[pn],-1))}finally{Sp()}}}function bb(i,o,a,c,d){const p=kr(),_=2&c;try{xo(-1),_&&o.length>cn&&lw(i,o,cn,!1),zr(_?2:0,d),a(c,d)}finally{xo(p),zr(_?3:1,d)}}function o_(i,o,a){if(da(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function hg(i,o,a){gu()&&(function xw(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;_i(a)&&function Ab(i,o,a){const c=jn(o,i),d=lo(a),p=i[ys],_=ff(i,cg(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=_}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Po(a,o),xn(c,o);const _=a.initialInputs;for(let E=d;E<p;E++){const I=i.data[E],T=ki(o,i,E,a);xn(T,o),null!==_&&l_(0,E-d,T,I,0,_),Gr(I)&&(rr(a.index,o)[bn]=ki(o,i,E,a))}}(i,o,a,jn(a,o)),64==(64&a.flags)&&c_(i,o,a))}function Ya(i,o,a=jn){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],E=-1===_?a(o,i):i[_];i[d++]=E}}}function lo(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=a_(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function a_(i,o,a,c,d,p,_,E,I,T){const M=cn+c,k=M+d,H=function Dw(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Bt);return a}(M,k),Z="function"==typeof T?T():T;return H[Ye]={type:i,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Z,incompleteFirstPass:!1}}function bw(i,o,a,c){const d=xb(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&vg(i).push(c,d.length-1))}function Nd(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?Cw(a,o,d,p):c.hasOwnProperty(d)&&Cw(a,o,c[d],p)}return a}function Cw(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function mn(i,o,a,c,d,p,_,E){const I=jn(o,a);let M,T=o.inputs;!E&&null!=T&&(M=T[c])?(kd(i,a,M,c,d),_i(o)&&Qa(a,o.index)):3&o.type&&(c=function Tw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=_?_(d,o.value||"",c):d,p.setProperty(I,c,d))}function Qa(i,o){const a=rr(o,i);16&a[Ot]||(a[Ot]|=32)}function fg(i,o,a,c){if(gu()){const d=null===c?null:{"":-1},p=function Rw(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const _=a[p];if(qy(o,_.selectors,!1))if(c||(c=[]),Gr(_))if(null!==_.findHostDirectiveDefs){const E=[];d=d||new Map,_.findHostDirectiveDefs(_,E,d),c.unshift(...E,_),Pd(i,o,E.length)}else c.unshift(_),Pd(i,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,c,d),c.push(_)}return null===c?null:[c,d]}(i,a);let _,E;null===p?_=E=null:[_,E]=p,null!==_&&u_(i,o,a,_,d,E),d&&function Ow(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ce(-301,!1);c.push(o[d],p)}}}(a,c,d)}a.mergedAttrs=Yi(a.mergedAttrs,a.attrs)}function u_(i,o,a,c,d,p){for(let T=0;T<c.length;T++)Ma(Po(a,o),i,c[T].type);!function Pw(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const M=c[T];M.providersResolver&&M.providersResolver(M)}let _=!1,E=!1,I=df(i,o,c.length,null);for(let T=0;T<c.length;T++){const M=c[T];a.mergedAttrs=Yi(a.mergedAttrs,M.hostAttrs),kw(i,a,o,I,M),Nw(I,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const k=M.type.prototype;!_&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),_=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),I++}!function ju(i,o,a){const d=o.directiveEnd,p=i.data,_=o.attrs,E=[];let I=null,T=null;for(let M=o.directiveStart;M<d;M++){const k=p[M],H=a?a.get(k):null,fe=H?H.outputs:null;I=Nd(k.inputs,M,I,H?H.inputs:null),T=Nd(k.outputs,M,T,fe);const Fe=null===I||null===_||iw(o)?null:Fw(I,M,_);E.push(Fe)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=I,o.outputs=T}(i,a,p)}function c_(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,_=function Pc(){return St.lFrame.currentDirectiveIndex}();try{xo(p);for(let E=c;E<d;E++){const I=i.data[E],T=o[E];kc(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Mw(I,T)}}finally{xo(-1),kc(_)}}function Mw(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Pd(i,o,a){o.componentOffset=a,(i.components||(i.components=[])).push(o.index)}function Nw(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Gr(o)&&(a[""]=i)}}function kw(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=js(d.type)),_=new Is(p,Gr(d),lf);i.blueprint[c]=_,a[c]=_,function Sw(i,o,a,c,d){const p=d.hostBindings;if(p){let _=i.hostBindingOpCodes;null===_&&(_=i.hostBindingOpCodes=[]);const E=~o.index;(function Aw(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(_)!=E&&_.push(E),_.push(a,c,p)}}(i,o,c,df(i,a,d.hostVars,Bt),d)}function ho(i,o,a,c,d,p){const _=jn(i,o);!function pg(i,o,a,c,d,p,_){if(null==p)i.removeAttribute(o,d,a);else{const E=null==_?Ee(p):_(p,c||"",d);i.setAttribute(o,d,E,a)}}(o[kt],_,p,i.value,a,c,d)}function l_(i,o,a,c,d,p){const _=p[o];if(null!==_){const E=c.setInput;for(let I=0;I<_.length;){const T=_[I++],M=_[I++],k=_[I++];null!==E?c.setInput(a,k,T,M):a[M]=k}}}function Fw(i,o,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const _=i[p];for(let E=0;E<_.length;E+=2)if(_[E]===o){c.push(p,_[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function gg(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function Uw(i,o){const a=rr(o,i);if(Ao(a)){const c=a[Ye];48&a[Ot]?dg(c,a,c.template,a[bn]):a[Gi]>0&&hf(a)}}function hf(i){for(let c=ja(i);null!==c;c=qh(c))for(let d=yr;d<c.length;d++){const p=c[d];if(Ao(p))if(512&p[Ot]){const _=p[Ye];dg(_,p,_.template,p[bn])}else p[Gi]>0&&hf(p)}const a=i[Ye].components;if(null!==a)for(let c=0;c<a.length;c++){const d=rr(a[c],i);Ao(d)&&d[Gi]>0&&hf(d)}}function mg(i,o){const a=rr(o,i),c=a[Ye];(function Bw(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),lg(c,a,a[bn])}function ff(i,o){return i[_s]?i[vc][Or]=o:i[_s]=o,i[vc]=o,o}function yg(i){for(;i;){i[Ot]|=32;const o=Ii(i);if(ha(i)&&!o)return i;i=o}return null}function Fr(i,o,a,c=!0){const d=o[ys];d.begin&&d.begin();try{dg(i,o,i.template,a)}catch(_){throw c&&wg(o,_),_}finally{d.end&&d.end()}}function _g(i,o,a){Fc(0),o(i,a)}function xb(i){return i[pi]||(i[pi]=[])}function vg(i){return i.cleanup||(i.cleanup=[])}function wg(i,o){const a=i[yo],c=a?a.get(Md,null):null;c&&c.handleError(o)}function kd(i,o,a,c,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,c,E):I[E]=d}}function Xa(i,o,a){const c=Gs(o,i);!function Zc(i,o,a){i.setValue(o,a)}(i[kt],c,a)}function Fd(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=me(d,E):2==p&&(c=me(c,E+": "+o[++_]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Eg(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(On(p)),yi(p))for(let E=yr;E<p.length;E++){const I=p[E],T=I[Ye].firstChild;null!==T&&Eg(I[Ye],I,T,c)}const _=a.type;if(8&_)Eg(i,o,a.child,c);else if(32&_){const E=Ba(a,o);let I;for(;I=E();)c.push(I)}else if(16&_){const E=$p(o,a);if(Array.isArray(E))c.push(...E);else{const I=Ii(o[mr]);Eg(I[Ye],I,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Ig{get rootNodes(){const o=this._lView,a=o[Ye];return Eg(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bn]}set context(o){this._lView[bn]=o}get destroyed(){return 128==(128&this._lView[Ot])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[pn];if(yi(o)){const a=o[Us],c=a?a.indexOf(this):-1;c>-1&&(Kh(o,c),Ou(a,c))}this._attachedToViewContainer=!1}Bp(this._lView[Ye],this._lView)}onDestroy(o){bw(this._lView[Ye],this._lView,null,o)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ot]&=-65}reattach(){this._lView[Ot]|=64}detectChanges(){Fr(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function md(i,o){za(i,o,o[kt],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=o}}class AA extends Ig{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Fr(o[Ye],o,o[bn],!1)}checkNoChanges(){}get context(){return null}}class Mb extends sf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Zt(o);return new Dg(a,this.ngModule)}}function Rb(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class MA{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Et(c);const d=this.injector.get(o,$y,c);return d!==$y||a===$y?d:this.parentInjector.get(o,a,c)}}class Dg extends Uy{get inputs(){return Rb(this.componentDef.inputs)}get outputs(){return Rb(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function aw(i){return i.map(sg).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof dl?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const _=p?new MA(o,p):o,E=_.get(af,null);if(null===E)throw new ce(407,!1);const I=_.get(uf,null),T=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=c?function Cb(i,o,a){return i.selectRootElement(o,a===_t.ShadowDom)}(T,c,this.componentDef.encapsulation):$a(T,M,function xA(i){const o=i.toLowerCase();return"svg"===o?Sn:"math"===o?"math":null}(M)),H=this.componentDef.onPush?288:272,Z=a_(0,null,null,1,0,null,null,null,null,null),fe=cg(null,Z,null,H,null,null,E,T,I,_,null);let Fe,qe;wu(fe);try{const st=this.componentDef;let Tt,Ae=null;st.findHostDirectiveDefs?(Tt=[],Ae=new Map,st.findHostDirectiveDefs(st,Tt,Ae),Tt.push(st)):Tt=[st];const Vt=function Pb(i,o){const a=i[Ye],c=cn;return i[c]=o,Od(a,c,2,"#host",null)}(fe,k),hn=function kb(i,o,a,c,d,p,_,E){const I=d[Ye];!function Fb(i,o,a,c){for(const d of i)o.mergedAttrs=Yi(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Fd(o,o.mergedAttrs,!0),null!==a&&qa(c,a,o))}(c,i,o,_);const T=p.createRenderer(o,a),M=cg(d,lo(a),null,a.onPush?32:16,d[i.index],i,p,T,E||null,null,null);return I.firstCreatePass&&Pd(I,i,c.length-1),ff(d,M),d[i.index]=M}(Vt,k,st,Tt,fe,E,T);qe=So(Z,cn),k&&function pf(i,o,a,c){if(c)Cn(i,a,["ng-version",J0.full]);else{const{attrs:d,classes:p}=function uw(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!rs(d))break;d=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Cn(i,a,d),p&&p.length>0&&Rs(i,a,p.join(" "))}}(T,st,k,c),void 0!==a&&function bg(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(qe,this.ngContentSelectors,a),Fe=function d_(i,o,a,c,d,p){const _=ur(),E=d[Ye],I=jn(_,d);u_(E,d,_,a,null,c);for(let M=0;M<a.length;M++)xn(ki(d,E,_.directiveStart+M,_),d);c_(E,d,_),I&&xn(I,d);const T=ki(d,E,_.directiveStart+_.componentOffset,_);if(i[bn]=d[bn]=T,null!==p)for(const M of p)M(T,o);return o_(E,_,i),T}(hn,st,Tt,Ae,fe,[Ld]),lg(Z,fe,null)}finally{Sp()}return new Ob(this.componentType,Fe,Ka(qe,fe),fe,qe)}}class Ob extends Vy{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new AA(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;kd(p[Ye],p,d,o,a),Qa(p,this._tNode.index)}}get injector(){return new vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Ld(){const i=ur();wa(ue()[Ye],i)}function gf(i){let o=function Vd(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Gr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ce(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const _=i;_.inputs=mf(i.inputs),_.declaredInputs=mf(i.declaredInputs),_.outputs=mf(i.outputs);const E=d.hostBindings;E&&$w(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&Vb(i,I),T&&Cg(i,T),xe(i.inputs,d.inputs),xe(i.declaredInputs,d.declaredInputs),xe(i.outputs,d.outputs),Gr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===gf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Lb(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Yi(d.hostAttrs,a=Yi(a,d.hostAttrs))}}(c)}function mf(i){return i===Xt?{}:i===wt?[]:i}function Vb(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Cg(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function $w(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function $u(i){return!!p_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function p_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ai(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function m_(i,o,a,c){const d=ue();return ai(d,qs(),o)&&(Yt(),ho(gn(),d,i,o,a,c)),m_}function Ud(i,o,a,c){return ai(i,qs(),a)?o+Ee(a)+c:Bt}function Gu(i,o,a,c,d,p){const E=function Hu(i,o,a,c){const d=ai(i,o,a);return ai(i,o+1,c)||d}(i,function Wr(){return St.lFrame.bindingIndex}(),a,d);return Ni(2),E?o+Ee(a)+c+Ee(d)+p:Bt}function Hb(i,o,a,c,d,p,_,E){const I=ue(),T=Yt(),M=i+cn,k=T.firstCreatePass?function Kw(i,o,a,c,d,p,_,E,I){const T=o.consts,M=Od(o,i,4,_||null,Wi(T,E));fg(o,a,M,Wi(T,I)),wa(o,M);const k=M.tViews=a_(2,M,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,T,I,o,a,c,d,p,_):T.data[M];qr(k,!1);const H=I[kt].createComment("");Xc(T,I,H,k),xn(H,I),ff(I,I[M]=gg(H,I,H,k)),wc(k)&&hg(T,I,k),null!=_&&Ya(I,k,E)}function Zw(i,o,a){const c=ue();return ai(c,qs(),o)&&mn(Yt(),gn(),c,i,o,c[kt],a,!1),Zw}function w_(i,o,a,c,d){const _=d?"class":"style";kd(i,a,o.inputs[_],_,c)}function Mg(i,o,a,c){const d=ue(),p=Yt(),_=cn+i,E=d[kt],I=p.firstCreatePass?function Yw(i,o,a,c,d,p){const _=o.consts,I=Od(o,i,2,c,Wi(_,d));return fg(o,a,I,Wi(_,p)),null!==I.attrs&&Fd(I,I.attrs,!1),null!==I.mergedAttrs&&Fd(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(_,p,d,o,a,c):p.data[_],T=d[_]=$a(E,o,function Ap(){return St.lFrame.currentNamespace}()),M=wc(I);return qr(I,!0),qa(E,T,I),32!=(32&I.flags)&&Xc(p,d,T,I),0===function pu(){return St.lFrame.elementDepthCount}()&&xn(T,d),function xc(){St.lFrame.elementDepthCount++}(),M&&(hg(p,d,I),o_(p,I,d)),null!==c&&Ya(d,I),Mg}function Df(){let i=ur();yu()?function _u(){St.lFrame.isParent=!1}():(i=i.parent,qr(i,!1));const o=i;!function Mc(){St.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(wa(a,i),da(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function td(i){return 0!=(8&i.flags)}(o)&&w_(a,o,ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Oh(i){return 0!=(16&i.flags)}(o)&&w_(a,o,ue(),o.stylesWithoutHost,!1),Df}function $d(i,o,a,c){return Mg(i,o,a,c),Df(),$d}function zb(){return ue()}function Og(i){return!!i&&"function"==typeof i.then}function Xw(i){return!!i&&"function"==typeof i.subscribe}const I_=Xw;function D_(i,o,a,c){const d=ue(),p=Yt(),_=ur();return function eE(i,o,a,c,d,p,_){const E=wc(c),T=i.firstCreatePass&&vg(i),M=o[bn],k=xb(o);let H=!0;if(3&c.type||_){const Fe=jn(c,o),qe=_?_(Fe):Fe,st=k.length,Tt=_?Vt=>_(On(Vt[c.index])):c.index;let Ae=null;if(!_&&E&&(Ae=function Jw(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===c){const E=o[pi],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,c.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=p,Ae.__ngLastListenerFn__=p,H=!1;else{p=tE(c,o,M,p,!1);const Vt=a.listen(qe,d,p);k.push(p,Vt),T&&T.push(d,Tt,st,st+1)}}else p=tE(c,o,M,p,!1);const Z=c.outputs;let fe;if(H&&null!==Z&&(fe=Z[d])){const Fe=fe.length;if(Fe)for(let qe=0;qe<Fe;qe+=2){const hn=o[fe[qe]][fe[qe+1]].subscribe(p),nr=k.length;k.push(p,hn),T&&T.push(d,c.index,nr,-(nr+1))}}}(p,d,d[kt],_,i,o,c),D_}function C_(i,o,a,c){try{return zr(6,o,a),!1!==a(c)}catch(d){return wg(i,d),!1}finally{zr(7,o,a)}}function tE(i,o,a,c,d){return function p(_){if(_===Function)return c;yg(i.componentOffset>-1?rr(i.index,o):o);let I=C_(o,a,c,_),T=p.__ngNextListenerFn__;for(;T;)I=C_(o,a,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Ng(i=1){return function dy(i){return(St.lFrame.contextLView=function Jl(i,o){for(;i>0;)o=o[gi],i--;return o}(i,St.lFrame.contextLView))[bn]}(i)}function bf(i,o,a){return Pg(i,"",o,"",a),bf}function Pg(i,o,a,c,d){const p=ue(),_=Ud(p,o,a,c);return _!==Bt&&mn(Yt(),gn(),p,i,_,p[kt],d,!1),Pg}function Cf(i,o){return i<<17|o<<2}function Wu(i){return i>>17&32767}function M_(i){return 2|i}function Ku(i){return(131068&i)>>2}function Fg(i,o){return-131069&i|o<<2}function R_(i){return 1|i}function uE(i,o,a,c,d){const p=i[a+1],_=null===o;let E=c?Wu(p):Ku(p),I=!1;for(;0!==E&&(!1===I||_);){const M=i[E+1];O_(i[E],o)&&(I=!0,i[E+1]=c?R_(M):M_(M)),E=c?Wu(M):Ku(M)}I&&(i[a+1]=c?M_(p):R_(p))}function O_(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&no(i,o)>=0}function fE(i,o){return function fo(i,o,a,c){const d=ue(),p=Yt(),_=Ni(2);p.firstUpdatePass&&function pE(i,o,a,c){const d=i.data;if(null===d[a+1]){const p=d[kr()],_=function Hd(i,o){return o>=i.expandoStartIndex}(i,a);(function Tf(i,o){return 0!=(i.flags&(o?8:16))})(p,c)&&null===o&&!_&&(o=!1),o=function gE(i,o,a,c){const d=function Ki(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Zu(a=tu(null,i,o,a,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=tu(d,i,o,a,c),null===p){let I=function jA(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Ku(c))return i[Wu(c)]}(i,o,c);void 0!==I&&Array.isArray(I)&&(I=tu(null,i,o,I[1],c),I=Zu(I,o.attrs,c),function tC(i,o,a,c){i[Wu(a?o.classBindings:o.styleBindings)]=c}(i,o,c,I))}else p=function he(i,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Zu(c,i[p].hostAttrs,a);return Zu(c,o.attrs,a)}(i,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function aE(i,o,a,c,d,p){let _=p?o.classBindings:o.styleBindings,E=Wu(_),I=Ku(_);i[c]=a;let M,T=!1;if(Array.isArray(a)?(M=a[1],(null===M||no(a,M)>0)&&(T=!0)):M=a,d)if(0!==I){const H=Wu(i[E+1]);i[c+1]=Cf(H,E),0!==H&&(i[H+1]=Fg(i[H+1],c)),i[E+1]=function x_(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=Cf(E,0),0!==E&&(i[E+1]=Fg(i[E+1],c)),E=c;else i[c+1]=Cf(I,0),0===E?E=c:i[I+1]=Fg(i[I+1],c),I=c;T&&(i[c+1]=M_(i[c+1])),uE(i,M,c,!0),uE(i,M,c,!1),function Zb(i,o,a,c,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&no(p,o)>=0&&(a[c+1]=R_(a[c+1]))}(o,M,i,c,p),_=Cf(E,I),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,c)}}(p,i,_,c),o!==Bt&&ai(d,_,o)&&function Yo(i,o,a,c,d,p,_,E){if(!(3&o.type))return;const I=i.data,T=I[E+1],M=function ml(i){return 1==(1&i)}(T)?ct(I,o,a,d,Ku(T),_):void 0;Gd(M)||(Gd(p)||function kA(i){return 2==(2&i)}(T)&&(p=ct(I,null,a,d,E,_)),function Hp(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:Vi.DashCase;null==d?i.removeStyle(a,c,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=Vi.Important),i.setStyle(a,c,d,p))}}(c,_,Gs(kr(),a),d,p))}(p,p.data[kr()],d,d[kt],i,d[_+1]=function Ft(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=De(v(i)))),i}(o,a),c,_)}(i,o,null,!0),fE}function tu(i,o,a,c,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],c=Zu(c,p.hostAttrs,d),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Zu(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),cr(i,_,!!a||o[++p]))}return void 0===i?null:i}function ct(i,o,a,c,d,p){const _=null===o;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),M=T?I[1]:I,k=null===M;let H=a[d+1];H===Bt&&(H=k?wt:void 0);let Z=k?Fo(H,c):M===c?H:void 0;if(T&&!Gd(Z)&&(Z=Fo(I,c)),Gd(Z)&&(E=Z,_))return E;const fe=i[d+1];d=_?Wu(fe):Ku(fe)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Fo(I,c))}return E}function Gd(i){return void 0!==i}function Sf(i,o=""){const a=ue(),c=Yt(),d=i+cn,p=c.firstCreatePass?Od(c,d,1,o,null):c.data[d],_=a[d]=function pd(i,o){return i.createText(o)}(a[kt],o);Xc(c,a,_,p),qr(p,!1)}function _l(i){return Lg("",i,""),_l}function Lg(i,o,a){const c=ue(),d=Ud(c,i,o,a);return d!==Bt&&Xa(c,kr(),d),Lg}function Af(i,o,a,c,d){const p=ue(),_=Gu(p,i,o,a,c,d);return _!==Bt&&Xa(p,kr(),_),Af}const po=void 0;var Rf=["en",[["a","p"],["AM","PM"],po],[["AM","PM"],po,po],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],po,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],po,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",po,"{1} 'at' {0}",po],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aC(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let qd={};function Wd(i){const o=function H_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=$_(o);if(a)return a;const c=o.split("-")[0];if(a=$_(c),a)return a;if("en"===c)return Rf;throw new ce(701,!1)}function j_(i){return Wd(i)[vt.PluralCase]}function $_(i){return i in qd||(qd[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),qd[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Qu="en-US";let zg=Qu;function El(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let p=0;p<i.length;p++)El(i[p],o,a,c,d);else{const p=Yt(),_=ue();let E=ll(i)?i:q(i.provide),I=Z0(i);const T=ur(),M=1048575&T.providerIndexes,k=T.directiveStart,H=T.providerIndexes>>20;if(ll(i)||!i.multi){const Z=new Is(I,d,lf),fe=lv(E,o,d?M:M+H,k);-1===fe?(Ma(Po(T,_),p,E),uv(p,i,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[fe]=Z,_[fe]=Z)}else{const Z=lv(E,o,M+H,k),fe=lv(E,o,M,M+H),qe=fe>=0&&a[fe];if(d&&!qe||!d&&!(Z>=0&&a[Z])){Ma(Po(T,_),p,E);const st=function Hf(i,o,a,c,d){const p=new Is(i,a,lf);return p.multi=[],p.index=o,p.componentProviders=0,cv(p,d,c&&!a),p}(d?vC:_C,a.length,d,c,I);!d&&qe&&(a[fe].providerFactory=st),uv(p,i,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(st),_.push(st)}else uv(p,i,Z>-1?Z:fe,cv(a[d?fe:Z],I,!d&&c));!d&&c&&qe&&a[fe].componentProviders++}}}function uv(i,o,a,c){const d=ll(o),p=function YD(i){return!!i.useClass}(o);if(d||p){const I=(p?q(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,I]):T[M+1].push(c,I)}else T.push(a,I)}}}function cv(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function lv(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function _C(i,o,a,c){return dv(this.multi,[])}function vC(i,o,a,c){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ki(a,a[Ye],this.providerFactory.index,c);p=E.slice(0,_),dv(d,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],dv(d,p);return p}function dv(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function su(i,o=[]){return a=>{a.providersResolver=(c,d)=>function $f(i,o,a){const c=Yt();if(c.firstCreatePass){const d=Gr(i);El(a,c.data,c.blueprint,d,!0),El(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Il{}class hv{}function WE(i,o){return new KE(i,o??null)}class KE extends Il{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mb(this);const c=ar(o);this._bootstrapComponents=Za(c.bootstrap),this._r3Injector=bi(o,a,[{provide:Il,useValue:this},{provide:sf,useValue:this.componentFactoryResolver}],De(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class fv extends hv{constructor(o){super(),this.moduleType=o}create(o){return new KE(this.moduleType,o)}}class ZE extends Il{constructor(o,a,c){super(),this.componentFactoryResolver=new Mb(this),this.instance=null;const d=new K0([...o,{provide:Il,useValue:this},{provide:sf,useValue:this.componentFactoryResolver}],a||Wa(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function pv(i,o,a=null){return new ZE(i,o,a).injector}let YE=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Td(0,a.type),d=c.length>0?pv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Je({token:i,providedIn:"environment",factory:()=>new i($e(dl))}),i})();function gv(i){i.getStandaloneInjector=o=>o.get(YE).getOrCreateStandaloneInjector(i)}function ym(i){return o=>{setTimeout(i,void 0,o)}}const os=class Iv extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),_=c;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),p=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(p=ym(p),d&&(d=ym(d)),_&&(_=ym(_)));const E=super.subscribe({next:d,error:p,complete:_});return o instanceof X.w0&&o.add(E),E}};function aI(){return this._results[Symbol.iterator]()}class _m{get changes(){return this._changes||(this._changes=new os)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=_m.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=aI)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function wi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function fy(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let go=(()=>{class i{}return i.__NG_ELEMENT_ID__=lI,i})();const uI=go,cI=class extends uI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tViews,d=cg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[_o]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[mi];return null!==_&&(d[mi]=_.createEmbeddedView(c)),lg(c,d,o),new Ig(d)}};function lI(){return Kf(ur(),ue())}function Kf(i,o){return 4&i.type?new cI(o,i,Ka(i,o)):null}let bl=(()=>{class i{}return i.__NG_ELEMENT_ID__=as,i})();function as(){return hI(ur(),ue())}const dI=bl,Dv=class extends dI{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Ka(this._hostTNode,this._hostLView)}get injector(){return new vi(this._hostTNode,this._hostLView)}get parentInjector(){const o=Cu(this._hostTNode,this._hostLView);if(Bc(o)){const a=Du(o,this._hostLView),c=Ca(o);return new vi(a[Ye].data[c+8],a)}return new vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Cl(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const _=o.createEmbeddedView(a||{},p);return this.insert(_,d),_}createComponent(o,a,c,d,p){const _=o&&!function Ru(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,p=k.environmentInjector||k.ngModuleRef}const I=_?o:new Dg(Zt(o)),T=c||this.parentInjector;if(!p&&null==I.ngModule){const H=(_?T:this.parentInjector).get(dl,null);H&&(p=H)}const M=I.create(T,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,a){const c=o._lView,d=c[Ye];if(function hu(i){return yi(i[pn])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=c[pn],H=new Dv(k,k[Bn],k[pn]);H.detach(H.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Iy(i,o,a,c){const d=yr+c,p=a.length;c>0&&(a[d-1][Or]=o),c<p-yr?(o[Or]=a[d],cd(a,yr+c,o)):(a.push(o),o[Or]=null),o[pn]=a;const _=o[_o];null!==_&&a!==_&&function Dy(i,o){const a=i[Nr];o[mr]!==o[pn][pn][mr]&&(i[Hl]=!0),null===a?i[Nr]=[o]:a.push(o)}(_,o);const E=o[mi];null!==E&&E.insertView(i),o[Ot]|=64}(d,c,_,p);const E=Xr(p,_),I=c[kt],T=Qc(I,_[vo]);return null!==T&&function Up(i,o,a,c,d,p){c[ri]=d,c[Bn]=o,za(i,c,a,1,d,p)}(d,_[Bn],I,c,T,E),o.attachToViewContainerRef(),cd(bv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Cl(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Kh(this._lContainer,a);c&&(Ou(bv(this._lContainer),a),Bp(c[Ye],c))}detach(o){const a=this._adjustIndex(o,-1),c=Kh(this._lContainer,a);return c&&null!=Ou(bv(this._lContainer),a)?new Ig(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Cl(i){return i[Us]}function bv(i){return i[Us]||(i[Us]=[])}function hI(i,o){let a;const c=o[i.index];if(yi(c))a=c;else{let d;if(8&i.type)d=On(c);else{const p=o[kt];d=p.createComment("");const _=jn(i,o);Ha(p,Qc(p,_),d,function Sy(i,o){return i.nextSibling(o)}(p,_),!1)}o[i.index]=a=gg(c,o,d,i),ff(o,a)}return new Dv(a,i,o)}class Zf{constructor(o){this.queryList=o,this.matches=null}clone(){return new Zf(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Cv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==gI(o,a).matches&&this.queries[a].setDirty()}}class fI{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class vm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new vm(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Tv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Tv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,wm(a,p)),this.matchTNodeWithReadOption(o,a,Xs(a,o,p,!1,!1))}else c===go?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Xs(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===xd||d===bl||d===go&&4&a.type)this.addMatch(a.index,-2);else{const p=Xs(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function wm(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function pI(i,o,a,c){return-1===a?function AC(i,o){return 11&i.type?Ka(i,o):4&i.type?Kf(i,o):null}(o,i):-2===a?function Vr(i,o,a){return a===xd?Ka(o,i):a===go?Kf(o,i):a===bl?hI(o,i):void 0}(i,o,c):ki(i,i[Ye],a,o)}function Tl(i,o,a,c){const d=o[mi].queries[c];if(null===d.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:pI(o,p[T],_[I+1],a.metadata.read))}d.matches=E}return d.matches}function ea(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Tl(i,o,d,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(_[E/2]);else{const T=p[E+1],M=o[-I];for(let k=yr;k<M.length;k++){const H=M[k];H[_o]===H[pn]&&ea(H[Ye],H,T,c)}if(null!==M[Nr]){const k=M[Nr];for(let H=0;H<k.length;H++){const Z=k[H];ea(Z[Ye],Z,T,c)}}}}}return c}function Em(i){const o=ue(),a=Yt(),c=Ql();Fc(c+1);const d=gI(a,c);if(i.dirty&&function ga(i){return 4==(4&i[Ot])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?ea(a,o,c,[]):Tl(a,o,d,c);i.reset(p,Q0),i.notifyOnChanges()}return!0}return!1}function Oe(i,o,a,c){const d=Yt();if(d.firstCreatePass){const p=ur();(function nt(i,o,a){null===i.queries&&(i.queries=new vm),i.queries.track(new Tv(o,a))})(d,new fI(o,a,c),p.index),function dt(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Im(i,o,a){const c=new _m(4==(4&a));bw(i,o,c,c.destroy),null===o[mi]&&(o[mi]=new Cv),o[mi].queries.push(new Zf(c))}(d,ue(),a)}function tr(){return function Sl(i,o){return i[mi].queries[o].queryList}(ue(),Ql())}function gI(i,o){return i.queries.getByIndex(o)}function Sv(i){return!!ar(i)}function rc(...i){}const Pv=new an("Application Initializer");let Sm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=rc,this.reject=rc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Og(p))a.push(p);else if(I_(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($e(Pv,8))},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const TI=new an("AppId",{providedIn:"root",factory:function hr(){return`${ta()}${ta()}${ta()}`}});function ta(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zn=new an("Platform Initializer"),Ml=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Am=new an("appBootstrapListener");let ic=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const na=new an("LocaleId",{providedIn:"root",factory:()=>et(na,lt.Optional|lt.SkipSelf)||function Mm(){return typeof $localize<"u"&&$localize.locale||Qu}()}),ra=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nh{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let kv=(()=>{class i{compileModuleSync(a){return new fv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Za(ar(a).declarations).reduce((_,E)=>{const I=Zt(E);return I&&_.push(new Dg(I)),_},[]);return new nh(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const AI=(()=>Promise.resolve(0))();function Uv(i){typeof Zone>"u"?AI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class cs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new os(!1),this.onMicrotaskEmpty=new os(!1),this.onStable=new os(!1),this.onError=new os(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function FC(){let i=Rt.requestAnimationFrame,o=Rt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function MI(i){const o=()=>{!function xI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,qt(i),i.isCheckStableRunning=!0,Om(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),qt(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,_,E)=>{try{return ln(i),a.invokeTask(d,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),Nl(i)}},onInvoke:(a,c,d,p,_,E,I)=>{try{return ln(i),a.invoke(d,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),Nl(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,qt(i),Om(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cs.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(cs.isInAngularZone())throw new ce(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,sc,rc,rc);try{return p.runTask(_,a,c)}finally{p.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const sc={};function Om(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function qt(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ln(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Nl(i){i._nesting--,Om(i)}class Bv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new os,this.onMicrotaskEmpty=new os,this.onStable=new os,this.onError=new os}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const Nm=new an(""),jv=new an("");let Pm,$v=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Pm||(function RI(i){Pm=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cs.assertNotInAngularZone(),Uv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)($e(cs),$e(Hv),$e(jv))},i.\u0275prov=Je({token:i,factory:i.\u0275fac}),i})(),Hv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Pm?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),oc=null;const OI=new an("AllowMultipleToken"),Gv=new an("PlatformDestroyListeners"),ia=!1;class jC{constructor(o,a){this.name=o,this.token=a}}function Ur(i,o,a=[]){const c=`Platform: ${o}`,d=new an(c);return(p=[])=>{let _=ci();if(!_||_.injector.get(OI,!1)){const E=[...a,...p,{provide:d,useValue:!0}];i?i(E):function rh(i){if(oc&&!oc.get(OI,!1))throw new ce(400,!1);oc=i;const o=i.get(Cr);(function qn(i){const o=i.get(zn,null);o&&o.forEach(a=>a())})(i)}(function qv(i=[],o){return fl.create({name:o,providers:[{provide:W0,useValue:"platform"},{provide:Gv,useValue:new Set([()=>oc=null])},...i]})}(E,c))}return function yn(i){const o=ci();if(!o)throw new ce(401,!1);return o}()}}function ci(){return oc?.get(Cr)??null}let Cr=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Tn(i,o){let a;return a="noop"===i?new Bv:("zone.js"===i?void 0:i)||new cs(o),a}(c?.ngZone,function Wv(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:cs,useValue:d}];return d.run(()=>{const _=fl.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(_),I=E.injector.get(Md,null);if(!I)throw new ce(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:M=>{I.handleError(M)}});E.onDestroy(()=>{ac(this._modules,E),T.unsubscribe()})}),function NI(i,o,a){try{const c=a();return Og(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(I,d,()=>{const T=E.injector.get(Sm);return T.runInitializers(),T.donePromise.then(()=>(function q_(i){Ze(i,"Expected localeId to be defined"),"string"==typeof i&&(zg=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(na,Qu)||Qu),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=km({},c);return function VC(i,o,a){const c=new fv(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(sa);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ce(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Gv,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($e(fl))},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function km(i,o){return Array.isArray(o)?o.reduce(km,i):{...i,...o}}let sa=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),_=new P.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{cs.assertNotInAngularZone(),Uv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ne.T)(p,_.pipe((0,se.B)()))}bootstrap(a,c){const d=a instanceof Uy;if(!this._injector.get(Sm).done){!d&&Un(a);throw new ce(405,ia)}let _;_=d?a:this._injector.get(sf).resolveComponentFactory(a),this.componentTypes.push(_.componentType);const E=function BC(i){return i.isBoundToModule}(_)?void 0:this._injector.get(Il),T=_.create(fl.NULL,[],c||_.selector,E),M=T.location.nativeElement,k=T.injector.get(Nm,null);return k?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),ac(this.components,T),k?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ac(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Am,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ac(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ce(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)($e(cs),$e(dl),$e(Md))},i.\u0275prov=Je({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ac(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function PI(){return!1}let kI=(()=>{class i{}return i.__NG_ELEMENT_ID__=Kv,i})();function Kv(i){return function Lm(i,o,a){if(_i(i)&&!a){const c=rr(i.index,o);return new Ig(c,c)}return 47&i.type?new Ig(o[mr],o):null}(ur(),ue(),16==(16&i))}class lc{constructor(){}supports(o){return $u(o)}create(o){return new ah(o)}}const BI=(i,o)=>o;class ah{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||BI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const _=!c||a&&a.currentIndex<HI(c,d,p)?a:c,E=HI(_,d,p),I=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,M=I-d;if(T!=M){for(let H=0;H<T;H++){const Z=H<p.length?p[H]:p[H]=0,fe=Z+H;M<=fe&&fe<T&&(p[H]=Z+1)}p[_.previousIndex]=M-T}}E!==I&&o(_,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!$u(o))throw new ce(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),c=!0),a=a._next}else d=0,function Sg(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new jI(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new uh),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uh),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class jI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $I{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class uh{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new $I,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HI(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class GI{constructor(){}supports(o){return o instanceof Map||p_(o)}create(){return new kn}}class kn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||p_(o)))throw new ce(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const c=new jm(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class jm{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ap(){return new $m([new lc])}let $m=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ap()),deps:[[i,new Fu,new La]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ce(901,!1)}}return i.\u0275prov=Je({token:i,providedIn:"root",factory:ap}),i})();function ch(){return new Jv([new GI])}let Jv=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ch()),deps:[[i,new Fu,new La]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ce(901,!1)}}return i.\u0275prov=Je({token:i,providedIn:"root",factory:ch}),i})();const qI=Ur(null,"core",[]);let WI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($e(sa))},i.\u0275mod=Dn({type:i}),i.\u0275inj=Fn({}),i})();function dh(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(gt,Se,F)=>{F.d(Se,{Z:()=>He});var f=F(2090),X=F(4859),P=F(9681),ne=F(1877);class se{constructor(ce,we){this._delegate=ce,this.firebase=we,(0,P._addComponent)(ce,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ce,we=P._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(ce);return!ke.isInitialized()&&"EXPLICIT"===(null===(Ee=ke.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:we})}_removeServiceInstance(ce,we=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(we)}_addComponent(ce){(0,P._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,P._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function me(){const rt=function De(rt){const ce={},we={__esModule:!0,initializeApp:function _e(Me,V={}){const de=P.initializeApp(Me,V);if((0,f.r3)(ce,de.name))return ce[de.name];const Ve=new rt(de,we);return ce[de.name]=Ve,Ve},app:ke,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function be(Me){const V=Me.name,de=V.replace("-compat","");if(P._registerComponent(Me)&&"PUBLIC"===Me.type){const Ve=(Ge=ke())=>{if("function"!=typeof Ge[de])throw xe.create("invalid-app-argument",{appName:V});return Ge[de]()};void 0!==Me.serviceProps&&(0,f.ZB)(Ve,Me.serviceProps),we[de]=Ve,rt.prototype[de]=function(...Ge){return this._getService.bind(this,V).apply(this,Me.multipleInstances?Ge:[])}}return"PUBLIC"===Me.type?we[de]:null},removeApp:function Ee(Me){delete ce[Me]},useAsService:function Le(Me,V){return"serverAuth"===V?null:V},modularAPIs:P}};function ke(Me){if(!(0,f.r3)(ce,Me=Me||P._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:Me});return ce[Me]}return we.default=we,Object.defineProperty(we,"apps",{get:function ge(){return Object.keys(ce).map(Me=>ce[Me])}}),ke.App=rt,we}(se);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function ce(we){(0,f.ZB)(rt,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),$=new ne.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=j;!function ve(rt){(0,P.registerVersion)("@firebase/app-compat","0.2.4",rt)}()},9681:(gt,Se,F)=>{F.r(Se),F.d(Se,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>Pe,_addComponent:()=>tn,_addOrOverwriteComponent:()=>yt,_apps:()=>Ze,_clearComponents:()=>Fn,_components:()=>We,_getProvider:()=>Je,_registerComponent:()=>Qt,_removeServiceInstance:()=>At,deleteApp:()=>gs,getApp:()=>ni,getApps:()=>jr,initializeApp:()=>Ps,onLog:()=>lt,registerVersion:()=>$r,setLogLevel:()=>ms});var f=F(5861),X=F(4859),P=F(1877),ne=F(2090),se=F(8766);class oe{constructor(ye){this.container=ye}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function xe($e){return"VERSION"===$e.getComponent()?.type}(et)){const Et=et.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(et=>et).join(" ")}}const De="@firebase/app",j=new P.Yd("@firebase/app"),Pe="[DEFAULT]",Be={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ze=new Map,We=new Map;function tn($e,ye){try{$e.container.addComponent(ye)}catch(et){j.debug(`Component ${ye.name} failed to register with FirebaseApp ${$e.name}`,et)}}function yt($e,ye){$e.container.addOrOverwriteComponent(ye)}function Qt($e){const ye=$e.name;if(We.has(ye))return j.debug(`There were multiple attempts to register component ${ye}.`),!1;We.set(ye,$e);for(const et of Ze.values())tn(et,$e);return!0}function Je($e,ye){const et=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),$e.container.getProvider(ye)}function At($e,ye,et=Pe){Je($e,ye).clearInstance(et)}function Fn(){We.clear()}const _n=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(ye,et,Et){this._isDeleted=!1,this._options=Object.assign({},ye),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ye){this._isDeleted=ye}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}const ti="9.17.2";function Ps($e,ye={}){let et=$e;"object"!=typeof ye&&(ye={name:ye});const Et=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},ye),xt=Et.name;if("string"!=typeof xt||!xt)throw _n.create("bad-app-name",{appName:String(xt)});if(et||(et=(0,ne.aH)()),!et)throw _n.create("no-options");const Pt=Ze.get(xt);if(Pt){if((0,ne.vZ)(et,Pt.options)&&(0,ne.vZ)(Et,Pt.config))return Pt;throw _n.create("duplicate-app",{appName:xt})}const gr=new X.H0(xt);for(const L of We.values())gr.addComponent(L);const U=new wn(et,Et,gr);return Ze.set(xt,U),U}function ni($e=Pe){const ye=Ze.get($e);if(!ye&&$e===Pe)return Ps();if(!ye)throw _n.create("no-app",{appName:$e});return ye}function jr(){return Array.from(Ze.values())}function gs($e){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*($e){const ye=$e.name;Ze.has(ye)&&(Ze.delete(ye),yield Promise.all($e.container.getProviders().map(et=>et.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function $r($e,ye,et){var Et;let xt=null!==(Et=Be[$e])&&void 0!==Et?Et:$e;et&&(xt+=`-${et}`);const Pt=xt.match(/\s|\//),gr=ye.match(/\s|\//);if(Pt||gr){const U=[`Unable to register library "${xt}" with version "${ye}":`];return Pt&&U.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Pt&&gr&&U.push("and"),gr&&U.push(`version name "${ye}" contains illegal characters (whitespace or "/")`),void j.warn(U.join(" "))}Qt(new X.wA(`${xt}-version`,()=>({library:xt,version:ye}),"VERSION"))}function lt($e,ye){if(null!==$e&&"function"!=typeof $e)throw _n.create("invalid-log-argument");(0,P.Am)($e,ye)}function ms($e){(0,P.Ub)($e)}const hi="firebase-heartbeat-database",En=1,fr="firebase-heartbeat-store";let ks=null;function Rt(){return ks||(ks=(0,se.X3)(hi,En,{upgrade:($e,ye)=>{0===ye&&$e.createObjectStore(fr)}}).catch($e=>{throw _n.create("idb-open",{originalErrorMessage:$e.message})})),ks}function Ct(){return(Ct=(0,f.Z)(function*($e){try{return(yield Rt()).transaction(fr).objectStore(fr).get(Ln($e))}catch(ye){if(ye instanceof ne.ZR)j.warn(ye.message);else{const et=_n.create("idb-get",{originalErrorMessage:ye?.message});j.warn(et.message)}}})).apply(this,arguments)}function Fs($e,ye){return fn.apply(this,arguments)}function fn(){return(fn=(0,f.Z)(function*($e,ye){try{const Et=(yield Rt()).transaction(fr,"readwrite");return yield Et.objectStore(fr).put(ye,Ln($e)),Et.done}catch(et){if(et instanceof ne.ZR)j.warn(et.message);else{const Et=_n.create("idb-set",{originalErrorMessage:et?.message});j.warn(Et.message)}}})).apply(this,arguments)}function Ln($e){return`${$e.name}!${$e.options.appId}`}class aa{constructor(ye){this.container=ye,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Kt(et),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var ye=this;return(0,f.Z)(function*(){const Et=ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=on();if(null===ye._heartbeatsCache&&(ye._heartbeatsCache=yield ye._heartbeatsCachePromise),ye._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ye._heartbeatsCache.heartbeats.some(Pt=>Pt.date===xt))return ye._heartbeatsCache.heartbeats.push({date:xt,agent:Et}),ye._heartbeatsCache.heartbeats=ye._heartbeatsCache.heartbeats.filter(Pt=>{const gr=new Date(Pt.date).valueOf();return Date.now()-gr<=2592e6}),ye._storage.overwrite(ye._heartbeatsCache)})()}getHeartbeatsHeader(){var ye=this;return(0,f.Z)(function*(){if(null===ye._heartbeatsCache&&(yield ye._heartbeatsCachePromise),null===ye._heartbeatsCache||0===ye._heartbeatsCache.heartbeats.length)return"";const et=on(),{heartbeatsToSend:Et,unsentEntries:xt}=function Hi($e,ye=1024){const et=[];let Et=$e.slice();for(const xt of $e){const Pt=et.find(gr=>gr.agent===xt.agent);if(Pt){if(Pt.dates.push(xt.date),Rr(et)>ye){Pt.dates.pop();break}}else if(et.push({agent:xt.agent,dates:[xt.date]}),Rr(et)>ye){et.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:et,unsentEntries:Et}}(ye._heartbeatsCache.heartbeats),Pt=(0,ne.L)(JSON.stringify({version:2,heartbeats:Et}));return ye._heartbeatsCache.lastSentHeartbeatDate=et,xt.length>0?(ye._heartbeatsCache.heartbeats=xt,yield ye._storage.overwrite(ye._heartbeatsCache)):(ye._heartbeatsCache.heartbeats=[],ye._storage.overwrite(ye._heartbeatsCache)),Pt})()}}function on(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(ye){this.app=ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ye=this;return(0,f.Z)(function*(){return(yield ye._canUseIndexedDBPromise)&&(yield function ft($e){return Ct.apply(this,arguments)}(ye.app))||{heartbeats:[]}})()}overwrite(ye){var et=this;return(0,f.Z)(function*(){var Et;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return Fs(et.app,{lastSentHeartbeatDate:null!==(Et=ye.lastSentHeartbeatDate)&&void 0!==Et?Et:Pt.lastSentHeartbeatDate,heartbeats:ye.heartbeats})}})()}add(ye){var et=this;return(0,f.Z)(function*(){var Et;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return Fs(et.app,{lastSentHeartbeatDate:null!==(Et=ye.lastSentHeartbeatDate)&&void 0!==Et?Et:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...ye.heartbeats]})}})()}}function Rr($e){return(0,ne.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Mi($e){Qt(new X.wA("platform-logger",ye=>new oe(ye),"PRIVATE")),Qt(new X.wA("heartbeat",ye=>new aa(ye),"PRIVATE")),$r(De,"0.9.4",$e),$r(De,"0.9.4","esm2017"),$r("fire-js","")}("")},4859:(gt,Se,F)=>{F.d(Se,{H0:()=>De,wA:()=>P});var f=F(5861),X=F(2090);class P{constructor(j,$,q){this.name=j,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ne="[DEFAULT]";class se{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const q=new X.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:$});Ue&&q.resolve(Ue)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const q=this.normalizeInstanceIdentifier(j?.identifier),Ue=null!==($=j?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(ve){if(Ue)return null;throw ve}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function xe(me){return"EAGER"===me.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier($);try{const ve=this.getOrInitializeService({instanceIdentifier:Ue});q.resolve(ve)}catch{}}}}clearInstance(j=ne){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ne){return this.instances.has(j)}getOptions(j=ne){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[ve,He]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(ve)&&He.resolve(Ue);return Ue}onInit(j,$){var q;const Ue=this.normalizeInstanceIdentifier($),ve=null!==(q=this.onInitCallbacks.get(Ue))&&void 0!==q?q:new Set;ve.add(j),this.onInitCallbacks.set(Ue,ve);const He=this.instances.get(Ue);return He&&j(He,Ue),()=>{ve.delete(j)}}invokeOnInitCallbacks(j,$){const q=this.onInitCallbacks.get($);if(q)for(const Ue of q)try{Ue(j,$)}catch{}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let q=this.instances.get(j);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(me=j,me===ne?void 0:me),options:$}),this.instances.set(j,q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,q)}catch{}var me;return q||null}normalizeInstanceIdentifier(j=ne){return this.component?this.component.multipleInstances?j:ne:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new se(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Se,F)=>{F.d(Se,{Am:()=>me,Ub:()=>De,Yd:()=>xe,in:()=>X});const f=[];var X=(()=>{return(j=X||(X={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",X;var j})();const P={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ne=X.INFO,se={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},oe=(j,$,...q)=>{if($<j.logLevel)return;const Ue=(new Date).toISOString(),ve=se[$];if(!ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[ve](`[${Ue}]  ${j.name}:`,...q)};class xe{constructor($){this.name=$,this._logLevel=ne,this._logHandler=oe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in X))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?P[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...$),this._logHandler(this,X.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...$),this._logHandler(this,X.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,X.INFO,...$),this._logHandler(this,X.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,X.WARN,...$),this._logHandler(this,X.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...$),this._logHandler(this,X.ERROR,...$)}}function De(j){f.forEach($=>{$.setLogLevel(j)})}function me(j,$){for(const q of f){let Ue=null;$&&$.level&&(Ue=P[$.level]),q.userLogHandler=null===j?null:(ve,He,...rt)=>{const ce=rt.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch{return null}}).filter(we=>we).join(" ");He>=(Ue??ve.logLevel)&&j({level:X[He].toLowerCase(),message:ce,args:rt,type:ve.name})}}}},259:(gt,Se,F)=>{F.d(Se,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=F(9681);(0,f.registerVersion)("firebase","9.17.2","app")},9260:(gt,Se,F)=>{F.d(Se,{Z:()=>f.Z});var f=F(3942);f.Z.registerVersion("firebase","9.17.2","app-compat")},4217:(gt,Se,F)=>{F.r(Se);var f=F(5861),X=F(3942),P=F(2090),ne=F(9681),se=F(1877),oe=F(655),xe=F(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_EMAIL_SIGNIN="EMAIL_SIGNIN",q_PASSWORD_RESET="PASSWORD_RESET",q_RECOVER_EMAIL="RECOVER_EMAIL",q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",q_VERIFY_EMAIL="VERIFY_EMAIL";const He=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},rt=function ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ce=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new se.Yd("@firebase/auth");function ke(y,...h){Ee.logLevel<=se.in.ERROR&&Ee.error(`Auth (${ne.SDK_VERSION}): ${y}`,...h)}function _e(y,...h){throw Me(y,...h)}function ge(y,...h){return Me(y,...h)}function be(y,h,g){const v=Object.assign(Object.assign({},rt()),{[h]:g});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function Le(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&_e(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(y,...h){if("string"!=typeof y){const g=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return ce.create(y,...h)}function V(y,h,...g){if(!y)throw Me(h,...g)}function de(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ke(h),new Error(h)}function Ve(y,h){y||de(h)}const Ge=new Map;function ut(y){Ve(y instanceof Function,"Expected a class definition");let h=Ge.get(y);return h?(Ve(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ge.set(y,h),h)}function ae(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function pe(){return"http:"===Ce()||"https:"===Ce()}function Ce(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ze{constructor(h,g){this.shortDelay=h,this.longDelay=g,Ve(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Pe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pe()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function We(y,h){Ve(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class tn{static initialize(h,g,v){this.fetchImpl=h,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new Ze(3e4,6e4);function Je(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function At(y,h,g,v){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y,h,g,v,S={}){return un(y,S,(0,f.Z)(function*(){let R={},z={};v&&("GET"===h?z=v:R={body:JSON.stringify(v)});const ie=(0,P.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ne=yield y._getAdditionalHeaders();return Ne["Content-Type"]="application/json",y.languageCode&&(Ne["X-Firebase-Locale"]=y.languageCode),tn.fetch()(Ps(y,y.config.apiHost,g,ie),Object.assign({method:h,headers:Ne,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function un(y,h,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},yt),h);try{const S=new ni(y),R=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw jr(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const ie=R.ok?z.errorMessage:z.error.message,[Ne,Qe]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw jr(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ne)throw jr(y,"email-already-in-use",z);if("USER_DISABLED"===Ne)throw jr(y,"user-disabled",z);const Dt=v[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw be(y,Dt,Qe);_e(y,Dt)}}catch(S){if(S instanceof P.ZR)throw S;_e(y,"internal-error",{message:String(S)})}})).apply(this,arguments)}function wn(y,h,g,v){return ti.apply(this,arguments)}function ti(){return(ti=(0,f.Z)(function*(y,h,g,v,S={}){const R=yield At(y,h,g,v,S);return"mfaPendingCredential"in R&&_e(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ps(y,h,g,v){const S=`${h}${g}?${v}`;return y.config.emulator?We(y.config,S):`${y.config.apiScheme}://${S}`}class ni{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ge(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jr(y,h,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const S=ge(y,h,v);return S.customData._tokenResponse=g,S}function vn(){return(vn=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function En(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Rt(){return(Rt=(0,f.Z)(function*(y,h=!1){const g=(0,P.m9)(y),v=yield g.getIdToken(h),S=Ct(v);V(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,z=R?.sign_in_provider;return{claims:S,token:v,authTime:En(ft(S.auth_time)),issuedAtTime:En(ft(S.iat)),expirationTime:En(ft(S.exp)),signInProvider:z||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function Ct(y){const[h,g,v]=y.split(".");if(void 0===h||void 0===g||void 0===v)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,P.tV)(g);return S?JSON.parse(S):(ke("Failed to decode base64 JWT payload"),null)}catch(S){return ke("Caught error parsing JWT payload as JSON",S?.toString()),null}}function fn(y,h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&function Mr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}class pr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class aa{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(y){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,f.Z)(function*(y){var h;const g=y.auth,v=yield y.getIdToken(),S=yield fn(y,function ms(y,h){return hi.apply(this,arguments)}(g,{idToken:v}));V(S?.users.length,g,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const z=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?function $e(y){return y.map(h=>{var{providerId:g}=h,v=(0,oe._T)(h,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(R.providerUserInfo):[],ie=function Mi(y,h){return[...y.filter(v=>!h.some(S=>S.providerId===v.providerId)),...h]}(y.providerData,z),Dt=!!y.isAnonymous&&!(y.email&&R.passwordHash||ie?.length),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ie,metadata:new aa(R.createdAt,R.lastLoginAt),isAnonymous:Dt};Object.assign(y,ht)}),Hi.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield on(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function et(){return(et=(0,f.Z)(function*(y,h){const g=yield un(y,{},(0,f.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,z=Ps(y,S,"/v1/token",`key=${R}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",tn.fetch()(z,{method:"POST",headers:ie,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Fs(y){const h=Ct(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var v=this;return(0,f.Z)(function*(){return V(!v.accessToken||v.refreshToken,h,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var v=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:z}=yield function ye(y,h){return et.apply(this,arguments)}(h,g);v.updateTokensAndExpiration(S,R,Number(z))})()}updateTokensAndExpiration(h,g,v){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,g){const{refreshToken:v,accessToken:S,expirationTime:R}=g,z=new Et;return v&&(V("string"==typeof v,"internal-error",{appName:h}),z.refreshToken=v),S&&(V("string"==typeof S,"internal-error",{appName:h}),z.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return de("not implemented")}}function xt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Pt{constructor(h){var{uid:g,auth:v,stsTokenManager:S}=h,R=(0,oe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new aa(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const v=yield fn(g,g.stsTokenManager.getToken(g.auth,h));return V(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(h){return function ks(y){return Rt.apply(this,arguments)}(this,h)}reload(){return function Kt(y){return Rr.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var v=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield on(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield fn(h,function gs(y,h){return vn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var v,S,R,z,ie,Ne,Qe,Dt;const ht=null!==(v=g.displayName)&&void 0!==v?v:void 0,or=null!==(S=g.email)&&void 0!==S?S:void 0,Er=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,nl=null!==(z=g.photoURL)&&void 0!==z?z:void 0,Zp=null!==(ie=g.tenantId)&&void 0!==ie?ie:void 0,Wo=null!==(Ne=g._redirectEventId)&&void 0!==Ne?Ne:void 0,ts=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,Ko=null!==(Dt=g.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:rl,emailVerified:il,isAnonymous:sl,providerData:Yp,stsTokenManager:ol}=g;V(rl&&ol,h,"internal-error");const U0=Et.fromJSON(this.name,ol);V("string"==typeof rl,h,"internal-error"),xt(ht,h.name),xt(or,h.name),V("boolean"==typeof il,h,"internal-error"),V("boolean"==typeof sl,h,"internal-error"),xt(Er,h.name),xt(nl,h.name),xt(Zp,h.name),xt(Wo,h.name),xt(ts,h.name),xt(Ko,h.name);const al=new Pt({uid:rl,auth:h,email:or,emailVerified:il,displayName:ht,isAnonymous:sl,photoURL:nl,phoneNumber:Er,tenantId:Zp,stsTokenManager:U0,createdAt:ts,lastLoginAt:Ko});return Yp&&Array.isArray(Yp)&&(al.providerData=Yp.map(ul=>Object.assign({},ul))),Wo&&(al._redirectEventId=Wo),al}static _fromIdTokenResponse(h,g,v=!1){return(0,f.Z)(function*(){const S=new Et;S.updateFromServerResponse(g);const R=new Pt({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:v});return yield on(R),R})()}}const U=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var S=this;return(0,f.Z)(function*(){S.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const S=v.storage[g];return void 0===S?null:S})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function L(y,h,g){return`firebase:${y}:${h}:${g}`}class G{constructor(h,g,v){this.persistence=h,this.auth=g,this.userKey=v;const{config:S,name:R}=this.auth;this.fullUserKey=L(this.userKey,S.apiKey,R),this.fullPersistenceKey=L("persistence",S.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Pt._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new G(ut(U),h,v);const S=(yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=S[0]||ut(U);const z=L(v,h.config.apiKey,h.name);let ie=null;for(const Qe of g)try{const Dt=yield Qe._get(z);if(Dt){const ht=Pt._fromJSON(h,Dt);Qe!==R&&(ie=ht),R=Qe;break}}catch{}const Ne=S.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Ne.length?(R=Ne[0],ie&&(yield R._set(z,ie.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,f.Z)(function*(Dt){if(Dt!==R)try{yield Dt._remove(z)}catch{}});return function(Dt){return Qe.apply(this,arguments)}}())),new G(R,h,v)):new G(R,h,v)})()}}function le(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Xt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ee(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(In(h))return"Blackberry";if(Vn(h))return"Webos";if(it(h))return"Safari";if((h.includes("chrome/")||_t(h))&&!h.includes("edge/"))return"Chrome";if(wt(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function ee(y=(0,P.z$)()){return/firefox\//i.test(y)}function it(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function _t(y=(0,P.z$)()){return/crios\//i.test(y)}function Xt(y=(0,P.z$)()){return/iemobile/i.test(y)}function wt(y=(0,P.z$)()){return/android/i.test(y)}function In(y=(0,P.z$)()){return/blackberry/i.test(y)}function Vn(y=(0,P.z$)()){return/webos/i.test(y)}function Ht(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Dh(y=(0,P.z$)()){return Ht(y)||wt(y)||Vn(y)||In(y)||/windows phone/i.test(y)||Xt(y)}function uu(y,h=[]){let g;switch(y){case"Browser":g=le((0,P.z$)());break;case"Worker":g=`${le((0,P.z$)())}-${y}`;break;default:g=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ne.SDK_VERSION}/${v}`}class mc{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const v=R=>new Promise((z,ie)=>{try{z(h(R))}catch(Ne){ie(Ne)}});v.onAbort=g,this.queue.push(v);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const v=[];try{for(const S of g.queue)yield S(h),S.onAbort&&v.push(S.onAbort)}catch(S){v.reverse();for(const R of v)try{R()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class jl{constructor(h,g,v){this.app=h,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $l(this),this.idTokenSubscription=new $l(this),this.beforeStateQueue=new mc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,g){var v=this;return g&&(this._popupRedirectResolver=ut(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,R;if(!v._deleted&&(v.persistenceManager=yield G.create(v,h),!v._deleted)){if(null!==(S=v._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var v;const S=yield g.assertedPersistence.getCurrentUser();let R=S,z=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ie=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,Ne=R?._redirectEventId,Qe=yield g.tryRedirectSignIn(h);(!ie||ie===Ne)&&Qe?.user&&(R=Qe.user,z=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield g.beforeStateQueue.runMiddleware(R)}catch(ie){R=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ie))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield on(h)}catch(v){if("auth/network-request-failed"!==v?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&V(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(h,g=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&V(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ut(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,g,v){return this.registerStateListener(this.authStateSubscription,h,g,v)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,v){return this.registerStateListener(this.idTokenSubscription,h,g,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var v=this;return(0,f.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=h&&ut(h)||g._popupRedirectResolver;V(v,g,"argument-error"),g.redirectPersistenceManager=yield G.create(g,[ut(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var v,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,v,S){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),z=this._isInitialized?Promise.resolve():this._initializationPromise;return V(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,v,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=uu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(v["X-Firebase-Client"]=S),v})()}}function Dn(y){return(0,P.m9)(y)}class $l{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ca(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Zt(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Rn{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return de("not implemented")}_getIdTokenResponse(h){return de("not implemented")}_linkToIdToken(h,g){return de("not implemented")}_getReauthenticationResolver(h){return de("not implemented")}}function Un(y,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:resetPassword",Je(y,h))})).apply(this,arguments)}function ri(y,h){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",Je(y,h))})).apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPassword",Je(y,h))})).apply(this,arguments)}function Bn(y,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:sendOobCode",Je(y,h))})).apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithEmailLink",Je(y,h))})).apply(this,arguments)}function mi(){return(mi=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithEmailLink",Je(y,h))})).apply(this,arguments)}class vs extends Rn{constructor(h,g,v,S=null){super("password",v),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new vs(h,g,"password")}static _fromEmailAndCode(h,g,v=null){return new vs(h,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Or(y,h){return Gi.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function mr(y,h){return _o.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return ri(h,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Vs(y,h){return mi.apply(this,arguments)}(h,{idToken:g,email:v._email,oobCode:v._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function zi(y,h){return cn.apply(this,arguments)}function cn(){return(cn=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithIdp",Je(y,h))})).apply(this,arguments)}class ii extends Rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new ii(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):_e("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S}=g,R=(0,oe._T)(g,["providerId","signInMethod"]);if(!v||!S)return null;const z=new ii(v,S);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(h){return zi(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,zi(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,zi(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,P.xO)(g)}return h}}function vo(){return(vo=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:sendVerificationCode",Je(y,h))})).apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Je(y,h))})).apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(y,h){const g=yield wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Je(y,h));if(g.temporaryProof)throw jr(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Hr={USER_NOT_FOUND:"user-not-found"};function da(){return(da=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPhoneNumber",Je(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Hr)})).apply(this,arguments)}class _i extends Rn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new _i({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new _i({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Us(y,h){return Nr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function yr(y,h){return Gl.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function yi(y,h){return da.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:v,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:v,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:R}=h;return v||g||S||R?new _i({verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:R}):null}}class ha{constructor(h){var g,v,S,R,z,ie;const Ne=(0,P.zd)((0,P.pd)(h)),Qe=null!==(g=Ne.apiKey)&&void 0!==g?g:null,Dt=null!==(v=Ne.oobCode)&&void 0!==v?v:null,ht=function wc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ne.mode)&&void 0!==S?S:null);V(Qe&&Dt&&ht,"argument-error"),this.apiKey=Qe,this.operation=ht,this.code=Dt,this.continueUrl=null!==(R=Ne.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Ne.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ie=Ne.tenantId)&&void 0!==ie?ie:null}static parseLink(h){const g=function Gr(y){const h=(0,P.zd)((0,P.pd)(y)).link,g=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||g||h||y}(h);try{return new ha(g)}catch{return null}}}let Ec=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return vs._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const S=ha.parseLink(v);return V(S,"argument-error"),vs._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class qi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class wo extends qi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class fa extends wo{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),ii._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return fa.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return fa.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:R,nonce:z,providerId:ie}=h;if(!v&&!S&&!g&&!R||!ie)return null;try{return new fa(ie)._credential({idToken:g,accessToken:v,nonce:z,pendingToken:R})}catch{return null}}}let Ic=(()=>{class y extends wo{constructor(){super("facebook.com")}static credential(g){return ii._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ch=(()=>{class y extends wo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return ii._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:S}=g;if(!v&&!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Th=(()=>{class y extends wo{constructor(){super("github.com")}static credential(g){return ii._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Eo extends Rn{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return zi(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,zi(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,zi(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:S,pendingToken:R}=g;return v&&S&&R&&v===S?new Eo(v,R):null}static _create(h,g){return new Eo(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oi extends qi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Oi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Oi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Eo.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:v}=h;if(!g||!v)return null;try{return Eo._create(v,g)}catch{return null}}}let Cp=(()=>{class y extends wo{constructor(){super("twitter.com")}static credential(g,v){return ii._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=g;if(!v||!S)return null;try{return y.credential(v,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dc(y,h){return bc.apply(this,arguments)}function bc(){return(bc=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signUp",Je(y,h))})).apply(this,arguments)}class Pr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,v,S=!1){return(0,f.Z)(function*(){const R=yield Pt._fromIdTokenResponse(h,v,S),z=Cc(v);return new Pr({user:R,providerId:z,_tokenResponse:v,operationType:g})})()}static _forOperation(h,g,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const S=Cc(v);return new Pr({user:h,providerId:S,_tokenResponse:v,operationType:g})})()}}function Cc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Sh(){return(Sh=(0,f.Z)(function*(y){var h;const g=Dn(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new Pr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Dc(g,{returnSecureToken:!0}),S=yield Pr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Tc extends P.ZR{constructor(h,g,v,S){var R;super(g.code,g.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,Tc.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,g,v,S){return new Tc(h,g,v,S)}}function js(y,h,g,v){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Tc._fromErrorAndOperation(y,R,h,v):R})}function $s(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Io(){return Io=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);yield Hs(!0,g,h);const{providerUserInfo:v}=yield function $r(y,h){return lt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=$s(v||[]);return g.providerData=g.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Io.apply(this,arguments)}function lu(y,h){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,h,g=!1){const v=yield fn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return Pr._forOperation(y,"link",v)})).apply(this,arguments)}function Hs(y,h,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,h,g){yield on(h);const S=!1===y?"provider-already-linked":"no-such-provider";V($s(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function Sc(y,h){return bo.apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(y,h,g=!1){const{auth:v}=y,S="reauthenticate";try{const R=yield fn(y,js(v,S,h,y),g);V(R.idToken,v,"internal-error");const z=Ct(R.idToken);V(z,v,"internal-error");const{sub:ie}=z;return V(y.uid===ie,v,"user-mismatch"),Pr._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&_e(v,"user-mismatch"),R}})).apply(this,arguments)}function Co(y,h){return zr.apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(y,h,g=!1){const v="signIn",S=yield js(y,v,h),R=yield Pr._fromIdTokenResponse(y,v,S);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,h){return du.apply(this,arguments)}function du(){return(du=(0,f.Z)(function*(y,h){return Co(Dn(y),h)})).apply(this,arguments)}function On(y,h){return To.apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);return yield Hs(!1,g,h.providerId),lu(g,h)})).apply(this,arguments)}function Gs(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,f.Z)(function*(y,h){return Sc((0,P.m9)(y),h)})).apply(this,arguments)}function So(){return(So=(0,f.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithCustomToken",Je(y,h))})).apply(this,arguments)}function rr(){return rr=(0,f.Z)(function*(y,h){const g=Dn(y),v=yield function Ac(y,h){return So.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),S=yield Pr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(S.user),S}),rr.apply(this,arguments)}class ga{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Ao._fromServerResponse(h,g):_e(h,"internal-error")}}class Ao extends ga{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Ao(g)}}function hu(y,h,g){var v;V((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function ma(){return ma=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&hu(v,S,g),yield function ys(y,h){return kt.apply(this,arguments)}(v,S)}),ma.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h,g){yield Un((0,P.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ql(){return ql=(0,f.Z)(function*(y,h){yield function Ot(y,h){return pn.apply(this,arguments)}((0,P.m9)(y),{oobCode:h})}),ql.apply(this,arguments)}function pu(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),v=yield Un(g,{oobCode:h}),S=v.requestType;switch(V(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(v.mfaInfo,g,"internal-error");default:V(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=ga._fromServerResponse(Dn(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y,h){const{data:g}=yield pu((0,P.m9)(y),h);return g.email})).apply(this,arguments)}function Rc(){return(Rc=(0,f.Z)(function*(y,h,g){const v=Dn(y),S=yield Dc(v,{returnSecureToken:!0,email:h,password:g}),R=yield Pr._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Oc(){return Oc=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,v,"argument-error"),g&&hu(v,S,g),yield function _c(y,h){return _s.apply(this,arguments)}(v,S)}),Oc.apply(this,arguments)}function _a(){return(_a=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),S=Ec.credentialWithLink(h,g||ae());return V(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,S)})).apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:createAuthUri",Je(y,h))})).apply(this,arguments)}function _u(){return _u=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:pe()?ae():"http://localhost"},{signinMethods:S}=yield function mu(y,h){return qr.apply(this,arguments)}((0,P.m9)(y),v);return S||[]}),_u.apply(this,arguments)}function Nc(){return Nc=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&hu(g.auth,S,h);const{email:R}=yield function bn(y,h){return yo.apply(this,arguments)}(g.auth,S);R!==y.email&&(yield y.reload())}),Nc.apply(this,arguments)}function Qn(){return Qn=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&hu(v.auth,R,g);const{email:z}=yield function vc(y,h){return gi.apply(this,arguments)}(v.auth,R);z!==y.email&&(yield y.reload())}),Qn.apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ni(){return Ni=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const v=(0,P.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},z=yield fn(v,function Wr(y,h){return ws.apply(this,arguments)}(v.auth,R));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const ie=v.providerData.find(({providerId:Ne})=>"password"===Ne);ie&&(ie.displayName=v.displayName,ie.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)}),Ni.apply(this,arguments)}function Yl(y,h,g){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(y,h,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const z=yield fn(y,ri(v,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Ki{constructor(h,g,v={}){this.isNewUser=h,this.providerId=g,this.profile=v}}class Ql extends Ki{constructor(h,g,v,S){super(h,g,v),this.username=S}}class Fc extends Ki{constructor(h,g){super(h,"facebook.com",g)}}class Xl extends Ql{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class xh extends Ki{constructor(h,g){super(h,"google.com",g)}}class wu extends Ql{constructor(h,g,v){super(h,"twitter.com",g,v)}}function Mh(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function kc(y){var h,g;if(!y)return null;const{providerId:v}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const z=null===(g=null===(h=Ct(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(z)return new Ki(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new Fc(R,S);case"github.com":return new Xl(R,S);case"google.com":return new xh(R,S);case"twitter.com":return new wu(R,S,y.screenName||null);case"custom":case"anonymous":return new Ki(R,null);default:return new Ki(R,v,S)}}(g)}class Ws{constructor(h,g,v){this.type=h,this.credential=g,this.auth=v}static _fromIdtoken(h,g){return new Ws("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ws("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,v;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ws._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return Ws._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Vc{constructor(h,g,v){this.session=h,this.hints=g,this.signInResolver=v}static _fromError(h,g){const v=Dn(h),S=g.customData._serverResponse,R=(S.mfaInfo||[]).map(ie=>ga._fromServerResponse(v,ie));V(S.mfaPendingCredential,v,"internal-error");const z=Ws._fromMfaPendingCredential(S.mfaPendingCredential);return new Vc(z,R,function(){var ie=(0,f.Z)(function*(Ne){const Qe=yield Ne._process(v,z);delete S.mfaInfo,delete S.mfaPendingCredential;const Dt=Object.assign(Object.assign({},S),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const ht=yield Pr._fromIdTokenResponse(v,g.operationType,Dt);return yield v._updateCurrentUser(ht.user),ht;case"reauthenticate":return V(g.user,v,"internal-error"),Pr._forOperation(g.user,g.operationType,Dt);default:_e(v,"internal-error")}});return function(Ne){return ie.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}class wa{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ga._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new wa(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Ws._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var v=this;return(0,f.Z)(function*(){const S=h,R=yield v.getSession(),z=yield fn(v.user,S._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,S=yield g.user.getIdToken();try{const R=yield fn(g.user,function xp(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(y,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:z})=>z!==v),yield g.user._updateTokensIfNecessary(R),yield g.user.reload()}catch(R){throw R}})()}}const Ks=new WeakMap,Es="__sak";class Ea{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Eu=(()=>{class y extends Ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ia(){const y=(0,P.z$)();return it(y)||Ht(y)}()&&function ua(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Dh(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),R=this.localCache[v];S!==R&&g(v,R,S)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ie,Ne,Qe)=>{this.notifyListeners(ie,Qe)});const S=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(S);if(g.newValue!==ie)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!v)return}const R=()=>{const ie=this.storage.getItem(S);!v&&this.localCache[S]===ie||this.notifyListeners(S,ie)},z=this.storage.getItem(S);!function Ls(){return(0,P.w1)()&&10===document.documentMode}()||z===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var S=()=>super._set,R=this;return(0,f.Z)(function*(){yield S().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,S=this;return(0,f.Z)(function*(){const R=yield v().call(S,g);return S.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,S=this;return(0,f.Z)(function*(){yield v().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Zs=(()=>{class y extends Ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Oh=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const S=g,{eventId:R,eventType:z,data:ie}=S.data,Ne=v.handlersMap[z];if(!Ne?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const Qe=Array.from(Ne).map(function(){var ht=(0,f.Z)(function*(or){return or(S.origin,ie)});return function(or){return ht.apply(this,arguments)}}()),Dt=yield function td(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return h.apply(this,arguments)}}()))}(Qe);S.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:Dt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ys(y="",h=10){let g="";for(let v=0;v<h;v++)g+=Math.floor(10*Math.random());return y+g}class Da{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,v=50){var S=this;return(0,f.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,ie;return new Promise((Ne,Qe)=>{const Dt=Ys("",20);R.port1.start();const ht=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);ie={messageChannel:R,onMessage(or){const Er=or;if(Er.data.eventId===Dt)switch(Er.data.status){case"ack":clearTimeout(ht),z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ne(Er.data.response);break;default:clearTimeout(ht),clearTimeout(z),Qe(new Error("invalid_response"))}}},S.handlers.add(ie),R.port1.addEventListener("message",ie.onMessage),S.target.postMessage({eventType:h,eventId:Dt,data:g},[R.port2])}).finally(()=>{ie&&S.removeMessageHandler(ie)})})()}}function Cn(){return window}function Zi(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function Ro(){return(Ro=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Iu="firebaseLocalStorageDb",Du=1,Ds="firebaseLocalStorage",Oo="fbase_key";class No{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ta(y,h){return y.transaction([Ds],h?"readwrite":"readonly").objectStore(Ds)}function bu(){const y=indexedDB.open(Iu,Du);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ds,{keyPath:Oo})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ds)?h(v):(v.close(),yield function Sa(){const y=indexedDB.deleteDatabase(Iu);return new No(y).toPromise()}(),h(yield bu()))}))})}function _r(y,h,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h,g){const v=Ta(y,!0).put({[Oo]:h,value:g});return new No(v).toPromise()})).apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,h){const g=Ta(y,!1).get(h),v=yield new No(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function xa(y,h){const g=Ta(y,!0).delete(h);return new No(g).toPromise()}const Qs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield bu()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(S++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Zi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=Oh._getInstance(function Ca(){return Zi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(S,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(S,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,S;if(g.activeServiceWorker=yield function Yi(){return Ro.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Da(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);R&&null!==(v=R[0])&&void 0!==v&&v.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Bc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield bu();return yield _r(g,Es,"1"),yield xa(g,Es),!0}catch{}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(R=>_r(R,g,v)),S.localCache[g]=v,S.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const S=yield v._withRetries(R=>function Po(y,h){return bs.apply(this,arguments)}(R,g));return v.localCache[g]=S,S})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(S=>xa(S,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(z=>{const ie=Ta(z,!1).getAll();return new No(ie).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:z,value:ie}of v)R.add(z),JSON.stringify(g.localCache[z])!==JSON.stringify(ie)&&(g.notifyListeners(z,ie),S.push(z));for(const z of Object.keys(g.localCache))g.localCache[z]&&!R.has(z)&&(g.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const R of Array.from(S))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Tu(){return(Tu=(0,f.Z)(function*(y){return(yield At(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ki(y){return new Promise((h,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=S=>{const R=ge("internal-error");R.customData=S,g(R)},v.type="text/javascript",v.charset="UTF-8",function Xs(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function rd(y){return`__${y}${Math.floor(1e6*Math.random())}`}const vi=1e12;class Mp{constructor(h){this.auth=h,this.counter=vi,this._widgets=new Map}render(h,g){const v=this.counter;return this._widgets.set(v,new id(h,this.auth.name,g||{})),this.counter++,v}reset(h){var g;const v=h||vi;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(h){var g;return(null===(g=this._widgets.get(h||vi))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(h||vi))||void 0===v||v.execute(),""})()}}class id{constructor(h,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Au(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sd=rd("rcb"),$c=new Ze(3e4,6e4);class Xi{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Cn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function Oa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Cn().grecaptcha):new Promise((v,S)=>{const R=Cn().setTimeout(()=>{S(ge(h,"network-request-failed"))},$c.get());Cn()[sd]=()=>{Cn().clearTimeout(R),delete Cn()[sd];const ie=Cn().grecaptcha;if(!ie)return void S(ge(h,"internal-error"));const Ne=ie.render;ie.render=(Qe,Dt)=>{const ht=Ne(Qe,Dt);return this.counter++,ht},this.hostLanguage=g,v(ie)},ki(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:sd,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),S(ge(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=Cn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mu{load(h){return(0,f.Z)(function*(){return new Mp(h)})()}clearedOneInstance(){}}const od="recaptcha",Nh={theme:"light",type:"image"};class Na{constructor(h,g=Object.assign({},Nh),v){this.parameters=g,this.type=od,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(v),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mu:new Xi,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const z=ie=>{ie&&(h.tokenChangeListeners.delete(z),R(ie))};h.tokenChangeListeners.add(z),h.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof h)h(g);else if("string"==typeof h){const v=Cn()[h];"function"==typeof v&&v(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){V(pe()&&!Zi(),h.auth,"internal-error"),yield function Ph(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Pi(y){return Tu.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ad{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=_i._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function ud(){return(ud=(0,f.Z)(function*(y,h,g){const v=Dn(y),S=yield Gc(v,h,(0,P.m9)(g));return new ad(S,R=>Sn(v,R))})).apply(this,arguments)}function Hc(){return(Hc=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);yield Hs(!1,v,"phone");const S=yield Gc(v.auth,h,(0,P.m9)(g));return new ad(S,R=>On(v,R))})).apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),S=yield Gc(v.auth,h,(0,P.m9)(g));return new ad(S,R=>Gs(v,R))})).apply(this,arguments)}function Gc(y,h,g){return ka.apply(this,arguments)}function ka(){return ka=(0,f.Z)(function*(y,h,g){var v;const S=yield g.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(g.type===od,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const z=R.session;if("phoneNumber"in R)return V("enroll"===z.type,y,"internal-error"),(yield function Rh(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:start",Je(y,h))}(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===z.type,y,"internal-error");const ie=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return V(ie,y,"missing-multi-factor-info"),(yield function Ra(y,h){return At(y,"POST","/v2/accounts/mfaSignIn:start",Je(y,h))}(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield function Hl(y,h){return vo.apply(this,arguments)}(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return z}}finally{g._reset()}}),ka.apply(this,arguments)}function kh(){return(kh=(0,f.Z)(function*(y,h){yield lu((0,P.m9)(y),h)})).apply(this,arguments)}let eo=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Dn(g)}verifyPhoneNumber(g,v){return Gc(this.auth,g,(0,P.m9)(v))}static credential(g,v){return _i._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:S}=g;return v&&S?_i._fromTokenResponse(v,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function dn(y,h){return h?ut(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Fa extends Rn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return zi(h,this._buildIdpRequest())}_linkToIdToken(h,g){return zi(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return zi(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Ru(y){return Co(y.auth,new Fa(y),y.bypassAuthState)}function fy(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Sc(g,new Fa(y),y.bypassAuthState)}function wi(y){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),lu(g,new Fa(y),y.bypassAuthState)})).apply(this,arguments)}class cd{constructor(h,g,v,S,R=!1){this.auth=h,this.resolver=v,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(v,S){h.pendingPromise={resolve:v,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:R,tenantId:z,error:ie,type:Ne}=h;if(ie)return void g.reject(ie);const Qe={auth:g.auth,requestUri:v,sessionId:S,tenantId:z||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ne)(Qe))}catch(Dt){g.reject(Dt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ru;case"linkViaPopup":case"linkViaRedirect":return wi;case"reauthViaPopup":case"reauthViaRedirect":return fy;default:_e(this.auth,"internal-error")}}resolve(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ou=new Ze(2e3,1e4);function ld(){return(ld=(0,f.Z)(function*(y,h,g){const v=Dn(y);Le(y,h,qi);const S=dn(v,g);return new Fo(v,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);Le(v.auth,h,qi);const S=dn(v.auth,g);return new Fo(v.auth,"reauthViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);Le(v.auth,h,qi);const S=dn(v.auth,g);return new Fo(v.auth,"linkViaPopup",h,S,v).executeNotNull()})).apply(this,arguments)}let Fo=(()=>{class y extends cd{constructor(g,v,S,R,z){super(g,v,R,z),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return V(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){Ve(1===g.filter.length,"Popup operations only handle one event");const v=Ys();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ge(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,S;this.pollId=null!==(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ou.get())};g()}}return y.currentPopupAction=null,y})();const no="pendingRedirect",Lo=new Map;class Rp extends cd{constructor(h,g,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=Lo.get(g.auth._key());if(!v){try{const R=(yield function Nn(y,h){return ro.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;v=()=>Promise.resolve(R)}catch(S){v=()=>Promise.reject(S)}Lo.set(g.auth._key(),v)}return g.bypassAuthState||Lo.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(v,h);if("unknown"!==h.type){if(h.eventId){const S=yield v.auth._redirectUserForId(h.eventId);if(S)return v.user=S,g().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ro(){return(ro=(0,f.Z)(function*(y,h){const g=Kr(h),v=io(y);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(g));return yield v._remove(g),S})).apply(this,arguments)}function at(y,h){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,f.Z)(function*(y,h){return io(y)._set(Kr(h),"true")})).apply(this,arguments)}function ku(y,h){Lo.set(y._key(),h)}function io(y){return ut(y._redirectPersistence)}function Kr(y){return L(no,y.config.apiKey,y.name)}function Ji(y,h,g){return function La(y,h,g){return Fi.apply(this,arguments)}(y,h,g)}function Fi(){return(Fi=(0,f.Z)(function*(y,h,g){const v=Dn(y);Le(y,h,qi),yield v._initializationPromise;const S=dn(v,g);return yield at(S,v),S._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Fu(y,h,g){return function Vh(y,h,g){return Va.apply(this,arguments)}(y,h,g)}function Va(){return(Va=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);Le(v.auth,h,qi),yield v.auth._initializationPromise;const S=dn(v.auth,g);yield at(S,v.auth);const R=yield W(v);return S._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Cs(y,h,g){return function Mt(y,h,g){return zc.apply(this,arguments)}(y,h,g)}function zc(){return(zc=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);Le(v.auth,h,qi),yield v.auth._initializationPromise;const S=dn(v.auth,g);yield Hs(!1,v,h.providerId),yield at(S,v.auth);const R=yield W(v);return S._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function C(){return(C=(0,f.Z)(function*(y,h){return yield Dn(y)._initializationPromise,x(y,h,!1)})).apply(this,arguments)}function x(y,h){return N.apply(this,arguments)}function N(){return(N=(0,f.Z)(function*(y,h,g=!1){const v=Dn(y),S=dn(v,h),z=yield new Rp(v,S,g).execute();return z&&!g&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,h)),z})).apply(this,arguments)}function W(y){return Y.apply(this,arguments)}function Y(){return(Y=(0,f.Z)(function*(y){const h=Ys(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class tt{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(g=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function jt(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var v;if(h.error&&!mt(h)){const S=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ge(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const v=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ot(h))}saveEventToCache(h){this.cachedEventUids.add(ot(h)),this.lastProcessedEventTime=Date.now()}}function ot(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function mt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function It(y){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,f.Z)(function*(y,h={}){return At(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Jn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vo=/^https?/;function Zr(){return(Zr=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield It(y);for(const g of h)try{if(Yr(g))return}catch{}_e(y,"unauthorized-domain")})).apply(this,arguments)}function Yr(y){const h=ae(),{protocol:g,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&z.hostname===v}if(!Vo.test(g))return!1;if(Jn.test(y))return v===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const $n=new Ze(3e4,6e4);function Ua(){const y=Cn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let An=null;const L0=new Ze(5e3,15e3),Li="__/auth/iframe",oi="emulator/auth/iframe",Uh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},py=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?We(h,oi):`https://${y.config.authDomain}/${Li}`,v={apiKey:h.apiKey,appName:y.name,v:ne.SDK_VERSION},S=py.get(y.config.apiHost);S&&(v.eid=S);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,P.xO)(v).slice(1)}`}function Ss(){return Ss=(0,f.Z)(function*(y){const h=yield function dd(y){return An=An||function Op(y){return new Promise((h,g)=>{var v,S,R;function z(){Ua(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ua(),g(ge(y,"network-request-failed"))},timeout:$n.get()})}if(null!==(S=null===(v=Cn().gapi)||void 0===v?void 0:v.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Cn().gapi)||void 0===R||!R.load){const ie=rd("iframefcb");return Cn()[ie]=()=>{gapi.load?z():g(ge(y,"network-request-failed"))},ki(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Ne=>g(Ne))}z()}}).catch(h=>{throw An=null,h})}(y),An}(y),g=Cn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:V0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uh,dontclear:!0},v=>new Promise(function(){var S=(0,f.Z)(function*(R,z){yield v.restyle({setHideOnLeave:!1});const ie=ge(y,"network-request-failed"),Ne=Cn().setTimeout(()=>{z(ie)},L0.get());function Qe(){Cn().clearTimeout(Ne),R(v)}v.ping(Qe).then(Qe,()=>{z(ie)})});return function(R,z){return S.apply(this,arguments)}}()))}),Ss.apply(this,arguments)}const vr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},As=500,Np=600,Bh="_blank",hd="http://localhost";class Vi{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const jh="__/auth/handler",Nt="emulator/auth/handler";function so(y,h,g,v,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:ne.SDK_VERSION,eventId:S};if(h instanceof qi){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ne,Qe]of Object.entries(R||{}))z[Ne]=Qe}if(h instanceof wo){const Ne=h.getScopes().filter(Qe=>""!==Qe);Ne.length>0&&(z.scopes=Ne.join(","))}y.tenantId&&(z.tid=y.tenantId);const ie=z;for(const Ne of Object.keys(ie))void 0===ie[Ne]&&delete ie[Ne];return`${function yy({config:y}){return y.emulator?We(y,Nt):`https://${y.authDomain}/${jh}`}(y)}?${(0,P.xO)(ie).slice(1)}`}const Bo="webStorageSupport",$h=class _y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=x,this._overrideRedirectResult=ku}_openPopup(h,g,v,S){var R=this;return(0,f.Z)(function*(){var z;Ve(null===(z=R.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ie=so(h,g,v,ae(),S);return function gy(y,h,g,v=As,S=Np){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let ie="";const Ne=Object.assign(Object.assign({},vr),{width:v.toString(),height:S.toString(),top:R,left:z}),Qe=(0,P.z$)().toLowerCase();g&&(ie=_t(Qe)?Bh:g),ee(Qe)&&(h=h||hd,Ne.scrollbars="yes");const Dt=Object.entries(Ne).reduce((or,[Er,nl])=>`${or}${Er}=${nl},`,"");if(function Zn(y=(0,P.z$)()){var h;return Ht(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Qe)&&"_self"!==ie)return function my(y,h){const g=document.createElement("a");g.href=y,g.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(h||"",ie),new Vi(null);const ht=window.open(h||"",ie,Dt);V(ht,y,"popup-blocked");try{ht.focus()}catch{}return new Vi(ht)}(h,ie,Ys())})()}_openRedirect(h,g,v,S){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function ba(y){Cn().location.href=y}(so(h,g,v,ae(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:R}=this.eventManagers[g];return S?Promise.resolve(S):(Ve(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const v=yield function Uo(y){return Ss.apply(this,arguments)}(h),S=new tt(h);return v.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=v,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Bo,{type:Bo},S=>{var R;const z=null===(R=S?.[0])||void 0===R?void 0:R[Bo];void 0!==z&&g(!!z),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ts(y){return Zr.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Dh()||it()||Ht()}};class xs{constructor(h){this.factorId=h}_process(h,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,v);case"signin":return this._finalizeSignIn(h,g.credential);default:return de("unexpected MultiFactorSessionType")}}}class fd extends xs{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new fd(h)}_finalizeEnroll(h,g,v){return function Ap(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:finalize",Je(y,h))}(h,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function nd(y,h){return At(y,"POST","/v2/accounts/mfaSignIn:finalize",Je(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qr=(()=>{class y{constructor(){}static assertion(g){return fd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var qc="@firebase/auth";class sr{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(v=>{h(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $o(){return window}(0,P.Pz)("authIdTokenMaxAge"),function jo(y){(0,ne._registerComponent)(new xe.wA("auth",(h,{options:g})=>{const v=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:z}=v.options;return((ie,Ne)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:ie.name}),V(!z?.includes(":"),"argument-error",{appName:ie.name});const Qe={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uu(y)},Dt=new jl(ie,Ne,Qe);return function re(y,h){const g=h?.persistence||[],v=(Array.isArray(g)?g:[g]).map(ut);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(Dt,g),Dt})(v,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,v)=>{h.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new xe.wA("auth-internal",h=>{const g=Dn(h.getProvider("auth").getImmediate());return new sr(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(qc,"0.21.4",function xn(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ne.registerVersion)(qc,"0.21.4","esm2017")}("Browser");const Lp=2e3;function Lu(){return Lu=(0,f.Z)(function*(y,h,g){var v;const{BuildInfo:S}=$o();Ve(h.sessionId,"AuthEvent did not contain a session ID");const R=yield function Wc(y){return ja.apply(this,arguments)}(h.sessionId),z={};return Ht()?z.ibi=S.packageName:wt()?z.apn=S.packageName:_e(y,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=R,so(y,g,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,z)}),Lu.apply(this,arguments)}function Ut(){return(Ut=(0,f.Z)(function*(y){const{BuildInfo:h}=$o(),g={};Ht()?g.iosBundleId=h.packageName:wt()?g.androidPackageName=h.packageName:_e(y,"operation-not-supported-in-this-environment"),yield It(y,g)})).apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(y,h,g){const{cordova:v}=$o();let S=()=>{};try{yield new Promise((R,z)=>{let ie=null;function Ne(){var ht;R();const or=null===(ht=v.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof or&&or(),"function"==typeof g?.close&&g.close()}function Qe(){ie||(ie=window.setTimeout(()=>{z(ge(y,"redirect-cancelled-by-user"))},Lp))}function Dt(){"visible"===document?.visibilityState&&Qe()}h.addPassiveListener(Ne),document.addEventListener("resume",Qe,!1),wt()&&document.addEventListener("visibilitychange",Dt,!1),S=()=>{h.removePassiveListener(Ne),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",Dt,!1),ie&&window.clearTimeout(ie)}})}finally{S()}})).apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(y){const h=function qh(y){if(Ve(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Kc=20;class Ms extends tt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Vp(y){return $a.apply(this,arguments)}function $a(){return($a=(0,f.Z)(function*(y){const h=yield md()._get(Wh(y));return h&&(yield md()._remove(Wh(y))),h})).apply(this,arguments)}function Up(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Kc;g++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function md(){return ut(Eu)}function Wh(y){return L("authEvent",y.config.apiKey,y.name)}function Go(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,P.zd)(g.join("?"))}const Zh=class Bp{constructor(){this._redirectPersistence=Zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=x,this._overrideRedirectResult=ku}_initialize(h){var g=this;return(0,f.Z)(function*(){const v=h._key();let S=g.eventManagers.get(v);return S||(S=new Ms(h),g.eventManagers.set(v,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,v,S){var R=this;return(0,f.Z)(function*(){!function Ey(y){var h,g,v,S,R,z,ie,Ne,Qe,Dt;const ht=$o();V("function"==typeof(null===(h=ht?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=ht?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(v=ht?.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ne=null===(ie=null===(z=ht?.cordova)||void 0===z?void 0:z.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ne?void 0:Ne.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Dt=null===(Qe=ht?.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===Dt?void 0:Dt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield R._initialize(h);yield z.initialized(),z.resetRedirect(),function lr(){Lo.clear()}(),yield R._originValidation(h);const ie=function pd(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Up(),postBody:null,tenantId:y.tenantId,error:ge(y,"no-auth-event")}}(h,v,S);yield function Zc(y,h){return md()._set(Wh(y),h)}(h,ie);const Ne=yield function zh(y,h,g){return Lu.apply(this,arguments)}(h,ie,g),Qe=yield function Ba(y){const{cordova:h}=$o();return new Promise(g=>{h.plugins.browsertab.isAvailable(v=>{let S=null;v?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function fi(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Ne);return function wy(y,h,g){return Ii.apply(this,arguments)}(h,z,Qe)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ho(y){return Ut.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:v,handleOpenURL:S,BuildInfo:R}=$o(),z=setTimeout((0,f.Z)(function*(){yield Vp(h),g.onEvent(jp())}),500),ie=function(){var Dt=(0,f.Z)(function*(ht){clearTimeout(z);const or=yield Vp(h);let Er=null;or&&ht?.url&&(Er=function gd(y,h){var g,v;const S=function Dy(y){const h=Go(y),g=h.link?decodeURIComponent(h.link):void 0,v=Go(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Go(S).link||S||v||g||y}(h);if(S.includes("/__/auth/callback")){const R=Go(S),z=R.firebaseError?function Iy(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ie=null===(v=null===(g=z?.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ne=ie?ge(ie):null;return Ne?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ne,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(or,ht.url)),g.onEvent(Er||jp())});return function(or){return Dt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,ie);const Ne=S,Qe=`${R.packageName.toLowerCase()}://`;$o().handleOpenURL=function(){var Dt=(0,f.Z)(function*(ht){if(ht.toLowerCase().startsWith(Qe)&&ie({url:ht}),"function"==typeof Ne)try{Ne(ht)}catch(or){console.error(or)}});return function(ht){return Dt.apply(this,arguments)}}()}};function jp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ge("no-auth-event")}}const Ha=1e3;function Ui(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Cy(y=(0,P.z$)()){return!("file:"!==Ui()&&"ionic:"!==Ui()&&"capacitor:"!==Ui()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ga(){try{const y=self.localStorage,h=Ys();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Vu(y=(0,P.z$)()){return function Qc(){return(0,P.w1)()&&11===document?.documentMode}()||function Sy(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return oo()&&(0,P.hl)()}return!1}function oo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uu(){return(function _d(){return"http:"===Ui()||"https:"===Ui()}()||(0,P.ru)()||Cy())&&!function Ty(){return(0,P.b$)()||(0,P.UG)()}()&&Ga()&&!oo()}function vd(){return Cy()&&typeof document<"u"}function es(){return(es=(0,f.Z)(function*(){return!!vd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},Ha);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Xr={LOCAL:"local",NONE:"none",SESSION:"session"},zo=V,wd="persistence";function qo(y){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Hp(),g=L(wd,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Hp(){var y;try{return(null===(y=function $p(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Gp=V;class Rs{constructor(){this.browserResolver=ut($h),this.cordovaResolver=ut(Zh),this.underlyingResolver=null,this._redirectPersistence=Zs,this._completeRedirectFn=x,this._overrideRedirectResult=ku}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,v,S){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,v,S)})()}_openRedirect(h,g,v,S){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,v,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return vd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Xc(){return es.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function qa(y){return y.unwrap()}function Jc(y){return el(y)}function el(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return eo.credentialFromResult(y);const g=h.providerId;if(!g||g===me.PASSWORD)return null;let v;switch(g){case me.GOOGLE:v=Ch;break;case me.FACEBOOK:v=Ic;break;case me.GITHUB:v=Th;break;case me.TWITTER:v=Cp;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ie,nonce:Ne}=h;return R||z||S||ie?ie?g.startsWith("saml.")?Eo._create(g,ie):ii._fromParams({providerId:g,signInMethod:g,pendingToken:ie,idToken:S,accessToken:R}):new fa(g).credential({idToken:S,accessToken:R,rawNonce:Ne}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function wr(y,h){return h.catch(g=>{throw g instanceof P.ZR&&function Bi(y,h){var g;const v=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Xh(y,function ir(y,h){var g;const v=(0,P.m9)(y),S=h;return V(h.customData.operationType,v,"argument-error"),V(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Vc._fromError(v,S)}(y,h));else if(v){const S=el(h),R=h;S&&(R.credential=S,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Jc(g),additionalUserInfo:Mh(g),user:ao.getOrCreate(S)}})}function Id(y,h){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:v=>wr(y,g.confirm(v))}})).apply(this,arguments)}class Xh{constructor(h,g){this.resolver=g,this.auth=function Di(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return wr(qa(this.auth),this.resolver.resolveSignIn(h))}}class ao{constructor(h){this._delegate=h,this.multiFactor=function Uc(y){const h=(0,P.m9)(y);return Ks.has(h)||Ks.set(h,wa._fromUser(h)),Ks.get(h)}(h)}static getOrCreate(h){return ao.USER_MAP.has(h)||ao.USER_MAP.set(h,new ao(h)),ao.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return wr(g.auth,On(g._delegate,h))})()}linkWithPhoneNumber(h,g){var v=this;return(0,f.Z)(function*(){return Id(v.auth,function hy(y,h,g){return Hc.apply(this,arguments)}(v._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return wr(g.auth,function Lh(y,h,g){return cr.apply(this,arguments)}(g._delegate,h,Rs))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield qo(Dn(g.auth)),Cs(g._delegate,h,Rs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return wr(g.auth,Gs(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Id(this.auth,function Js(y,h,g){return Pa.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return wr(this.auth,function Fh(y,h,g){return Pu.apply(this,arguments)}(this._delegate,h,Rs))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield qo(Dn(g.auth)),Fu(g._delegate,h,Rs)})()}sendEmailVerification(h){return function Kl(y,h){return Nc.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function cu(y,h){return Io.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Zl(y,h){return Yl((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function va(y,h){return Yl((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ko(y,h){return kh.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function qs(y,h){return Ni.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function vu(y,h,g){return Qn.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ao.USER_MAP=new WeakMap;const Bu=V;let tl=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Bu(S,"invalid-api-key",{appName:g.name}),Bu(S,"invalid-api-key",{appName:g.name});const R=typeof window<"u"?Rs:void 0;this._delegate=v.initialize({options:{persistence:zp(S,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ao.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function yc(y,h,g){const v=Dn(y);V(v._canInitEmulator,v,"emulator-config-failed"),V(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const S=!!g?.disableWarnings,R=ca(h),{host:z,port:ie}=function la(y){const h=ca(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const R=S[1];return{host:R,port:Zt(v.substr(R.length+1))}}{const[R,z]=v.split(":");return{host:R,port:Zt(z)}}}(h);v.config.emulator={url:`${R}//${z}${null===ie?"":`:${ie}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:ie,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Yn(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function fu(y,h){return ql.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return pu(this._delegate,g)}confirmPasswordReset(g,v){return function ya(y,h,g){return St.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var S=this;return(0,f.Z)(function*(){return wr(S._delegate,function Ah(y,h,g){return Rc.apply(this,arguments)}(S._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function yu(y,h){return _u.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Wl(y,h){return"EMAIL_SIGNIN"===ha.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Bu(Uu(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function D(y,h){return C.apply(this,arguments)}(g._delegate,Rs);return v?wr(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function by(y,h){Dn(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,v,S){const{next:R,error:z,complete:ie}=Dd(g,v,S);return this._delegate.onAuthStateChanged(R,z,ie)}onIdTokenChanged(g,v,S){const{next:R,error:z,complete:ie}=Dd(g,v,S);return this._delegate.onIdTokenChanged(R,z,ie)}sendSignInLinkToEmail(g,v){return function Yt(y,h,g){return Oc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function Wi(y,h,g){return ma.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let S;switch(function za(y,h){zo(Object.values(Xr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?zo(h!==Xr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?zo(h===Xr.NONE,y,"unsupported-persistence-type"):oo()?zo(h===Xr.NONE||h===Xr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):zo(h===Xr.NONE||Ga(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Xr.SESSION:S=Zs;break;case Xr.LOCAL:S=(yield ut(Qs)._isAvailable())?Qs:Eu;break;case Xr.NONE:S=U;break;default:return _e("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return wr(this._delegate,function zl(y){return Sh.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return wr(this._delegate,Sn(this._delegate,g))}signInWithCustomToken(g){return wr(this._delegate,function zs(y,h){return rr.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return wr(this._delegate,function ue(y,h,g){return Sn((0,P.m9)(y),Ec.credential(h,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return wr(this._delegate,function ur(y,h,g){return _a.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Id(this._delegate,function an(y,h,g){return ud.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return Bu(Uu(),v._delegate,"operation-not-supported-in-this-environment"),wr(v._delegate,function Nu(y,h,g){return ld.apply(this,arguments)}(v._delegate,g,Rs))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return Bu(Uu(),v._delegate,"operation-not-supported-in-this-environment"),yield qo(v._delegate),Ji(v._delegate,g,Rs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Mc(y,h){return gu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Xr,y})();function Dd(y,h,g){let v=y;"function"!=typeof y&&({next:v,error:h,complete:g}=y);const S=v;return{next:z=>S(z&&ao.getOrCreate(z)),error:h,complete:g}}function zp(y,h){const g=function Yh(y,h){const g=Hp();if(!g)return[];const v=L(wd,y,h);switch(g.getItem(v)){case Xr.NONE:return[U];case Xr.LOCAL:return[Qs,Zs];case Xr.SESSION:return[Zs];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(Qs)&&g.push(Qs),typeof window<"u")for(const v of[Eu,Zs])g.includes(v)||g.push(v);return g.includes(U)||g.push(U),g}class bd{constructor(){this.providerId="phone",this._delegate=new eo(qa(X.Z.auth()))}static credential(h,g){return eo.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}bd.PHONE_SIGN_IN_METHOD=eo.PHONE_SIGN_IN_METHOD,bd.PROVIDER_ID=eo.PROVIDER_ID;const qp=V;class Wp{constructor(h,g,v=X.Z.app()){var S;qp(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Na(h,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Kp(y){y.INTERNAL.registerComponent(new xe.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new tl(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_EMAIL_SIGNIN,PASSWORD_RESET:q_PASSWORD_RESET,RECOVER_EMAIL:q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q_VERIFY_EMAIL}},EmailAuthProvider:Ec,FacebookAuthProvider:Ic,GithubAuthProvider:Th,GoogleAuthProvider:Ch,OAuthProvider:fa,SAMLAuthProvider:Oi,PhoneAuthProvider:bd,PhoneMultiFactorGenerator:Qr,RecaptchaVerifier:Wp,TwitterAuthProvider:Cp,Auth:tl,AuthCredential:Rn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.4")}(X.Z)},8766:(gt,Se,F)=>{F.d(Se,{Lj:()=>_e,X3:()=>ke});var f=F(5861);const X=(V,de)=>de.some(Ve=>V instanceof Ve);let P,ne;const xe=new WeakMap,De=new WeakMap,me=new WeakMap,j=new WeakMap,$=new WeakMap;let ve={get(V,de,Ve){if(V instanceof IDBTransaction){if("done"===de)return De.get(V);if("objectStoreNames"===de)return V.objectStoreNames||me.get(V);if("store"===de)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return we(V[de])},set:(V,de,Ve)=>(V[de]=Ve,!0),has:(V,de)=>V instanceof IDBTransaction&&("done"===de||"store"===de)||de in V};function ce(V){return"function"==typeof V?function rt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...de){return V.apply(Ee(this),de),we(xe.get(this))}:function(...de){return we(V.apply(Ee(this),de))}:function(de,...Ve){const Ge=V.call(Ee(this),de,...Ve);return me.set(Ge,de.sort?de.sort():[de]),we(Ge)}}(V):(V instanceof IDBTransaction&&function Ue(V){if(De.has(V))return;const de=new Promise((Ve,Ge)=>{const ut=()=>{V.removeEventListener("complete",Xe),V.removeEventListener("error",re),V.removeEventListener("abort",re)},Xe=()=>{Ve(),ut()},re=()=>{Ge(V.error||new DOMException("AbortError","AbortError")),ut()};V.addEventListener("complete",Xe),V.addEventListener("error",re),V.addEventListener("abort",re)});De.set(V,de)}(V),X(V,function se(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,ve):V)}function we(V){if(V instanceof IDBRequest)return function q(V){const de=new Promise((Ve,Ge)=>{const ut=()=>{V.removeEventListener("success",Xe),V.removeEventListener("error",re)},Xe=()=>{Ve(we(V.result)),ut()},re=()=>{Ge(V.error),ut()};V.addEventListener("success",Xe),V.addEventListener("error",re)});return de.then(Ve=>{Ve instanceof IDBCursor&&xe.set(Ve,V)}).catch(()=>{}),$.set(de,V),de}(V);if(j.has(V))return j.get(V);const de=ce(V);return de!==V&&(j.set(V,de),$.set(de,V)),de}const Ee=V=>$.get(V);function ke(V,de,{blocked:Ve,upgrade:Ge,blocking:ut,terminated:Xe}={}){const re=indexedDB.open(V,de),ae=we(re);return Ge&&re.addEventListener("upgradeneeded",pe=>{Ge(we(re.result),pe.oldVersion,pe.newVersion,we(re.transaction))}),Ve&&re.addEventListener("blocked",()=>Ve()),ae.then(pe=>{Xe&&pe.addEventListener("close",()=>Xe()),ut&&pe.addEventListener("versionchange",()=>ut())}).catch(()=>{}),ae}function _e(V,{blocked:de}={}){const Ve=indexedDB.deleteDatabase(V);return de&&Ve.addEventListener("blocked",()=>de()),we(Ve).then(()=>{})}const ge=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Le=new Map;function Me(V,de){if(!(V instanceof IDBDatabase)||de in V||"string"!=typeof de)return;if(Le.get(de))return Le.get(de);const Ve=de.replace(/FromIndex$/,""),Ge=de!==Ve,ut=be.includes(Ve);if(!(Ve in(Ge?IDBIndex:IDBObjectStore).prototype)||!ut&&!ge.includes(Ve))return;const Xe=function(){var re=(0,f.Z)(function*(ae,...pe){const Ce=this.transaction(ae,ut?"readwrite":"readonly");let Pe=Ce.store;return Ge&&(Pe=Pe.index(pe.shift())),(yield Promise.all([Pe[Ve](...pe),ut&&Ce.done]))[0]});return function(pe){return re.apply(this,arguments)}}();return Le.set(de,Xe),Xe}!function He(V){ve=V(ve)}(V=>({...V,get:(de,Ve,Ge)=>Me(de,Ve)||V.get(de,Ve,Ge),has:(de,Ve)=>!!Me(de,Ve)||V.has(de,Ve)}))},5861:(gt,Se,F)=>{function f(P,ne,se,oe,xe,De,me){try{var j=P[De](me),$=j.value}catch(q){return void se(q)}j.done?ne($):Promise.resolve($).then(oe,xe)}function X(P){return function(){var ne=this,se=arguments;return new Promise(function(oe,xe){var De=P.apply(ne,se);function me($){f(De,oe,xe,me,j,"next",$)}function j($){f(De,oe,xe,me,j,"throw",$)}me(void 0)})}}F.d(Se,{Z:()=>X})}},gt=>{gt(gt.s=6890)}]);